!function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,a=c(e);if(t){var n=c(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return o(this,i)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{n60B:function(e,n,o){"use strict";o.r(n),o.d(n,"UserModule",function(){return rt});var c=o("xfXw"),s=o("V0Zc"),l=o("ofXK"),u=function(e){a(n,e);var t=r(n);function n(){return i(this,n),t.apply(this,arguments)}return n}(o("FMWu").a),d=o("xP/o"),b=o("fXoL"),f=o("jhN1"),h=o("tk/3"),m=o("dD+E"),p=o("R1yZ"),g=o("w6oe"),v=o("dlKe"),w=o("ZRK5"),T=o("tyNb"),S=o("8VXs"),y=o("/RsI"),U=o("7zfz"),k=o("3Pt+"),P=o("Y+ZO"),D=o("+pS1"),C=o("RCHe"),R=o("vR4d"),B=o("Wp6s"),x=o("bTqV"),j=o("Qu3c"),A=o("STbY"),I=o("NFeN"),O=["form"];function M(e,t){1&e&&b.Pb(0,"app-waiting")}function L(e,t){1&e&&(b.Ub(0,"span"),b.Rc(1,"Public"),b.Tb())}function F(e,t){1&e&&(b.Ub(0,"span"),b.Rc(1,"Private"),b.Tb())}function _(e,t){if(1&e&&(b.Ub(0,"span"),b.Rc(1),b.Tb()),2&e){var i=b.ic(2);b.Bb(1),b.Tc("-- ",i.item.feeling,"")}}function q(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",34),b.ec("click",function(){b.Hc(i);var e=b.ic(2);return e.onBtnDeleteClick(e.item.id)}),b.Ub(1,"span"),b.Rc(2),b.Tb(),b.Tb()}2&e&&(b.qc("title","Delete"),b.Bb(2),b.Sc("Delete"))}function E(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",34),b.ec("click",function(){return b.Hc(i),b.ic(2).editJournal()}),b.Ub(1,"span"),b.Rc(2),b.Tb(),b.Tb()}2&e&&(b.qc("title","Edit"),b.Bb(2),b.Sc("Edit"))}function N(e,t){if(1&e&&b.Pb(0,"img",35),2&e){var i=b.ic(2);b.pc("src",i.item.image,b.Jc)}}function z(e,t){if(1&e&&(b.Ub(0,"div",36),b.Pb(1,"i",37),b.Rc(2),b.Tb()),2&e){var i=b.ic(2);b.Bb(2),b.Tc(" Liked by ",i.likes," people ")}}function J(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",40),b.ec("click",function(){return b.Hc(i),b.ic(3).onBtnLikeClick()}),b.Rc(1,"LIKE"),b.Tb()}}function H(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",41),b.ec("click",function(){return b.Hc(i),b.ic(3).onBtnUnLikeClick()}),b.Rc(1,"LIKED"),b.Tb()}}function V(e,t){if(1&e&&(b.Ub(0,"div"),b.Pc(1,J,2,0,"button",38),b.Pc(2,H,2,0,"button",39),b.Tb()),2&e){var i=b.ic(2);b.Bb(1),b.pc("ngIf",!i.liked),b.Bb(1),b.pc("ngIf",i.liked)}}function X(e,t){if(1&e){var i=b.Vb();b.Ub(0,"mat-card",16),b.Ub(1,"mat-card-header",17),b.Ub(2,"div",18),b.Ub(3,"div",19),b.Pb(4,"img",20),b.Tb(),b.Ub(5,"div",21),b.Ub(6,"mat-card-title",22),b.Ub(7,"a",23),b.ec("click",function(){b.Hc(i);var e=b.ic();return e.goToUser(e.item.createdBy)}),b.Rc(8),b.Tb(),b.Tb(),b.Ub(9,"mat-card-subtitle",24),b.Pc(10,L,2,0,"span",1),b.Pc(11,F,2,0,"span",1),b.Pc(12,_,2,1,"span",1),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"div",25),b.Ub(14,"div",26),b.Ub(15,"small",27),b.Rc(16),b.Tb(),b.Pb(17,"i",28),b.Tb(),b.Ub(18,"button",29),b.Ub(19,"mat-icon"),b.Rc(20,"more_vert"),b.Tb(),b.Tb(),b.Ub(21,"mat-menu",null,30),b.Pc(23,q,3,2,"button",31),b.Pc(24,E,3,2,"button",31),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"mat-card-content"),b.Ub(26,"p"),b.Rc(27),b.Ub(28,"i"),b.Rc(29),b.jc(30,"date"),b.Tb(),b.Tb(),b.Pc(31,N,1,1,"img",32),b.Tb(),b.Ub(32,"mat-card-actions"),b.Pc(33,z,3,1,"div",33),b.Pc(34,V,3,2,"div",1),b.Tb(),b.Tb()}if(2&e){var a=b.Dc(22),n=b.ic();b.Bb(4),b.pc("src",n.avatar,b.Jc),b.Bb(4),b.Sc(n.item.userName),b.Bb(2),b.pc("ngIf",0!=n.item.status),b.Bb(1),b.pc("ngIf",0==n.item.status),b.Bb(1),b.pc("ngIf",n.item.feeling),b.Bb(4),b.Sc(n.calculateTime(n.item.createdAt)),b.Bb(2),b.pc("matMenuTriggerFor",a),b.Bb(5),b.pc("ngIf",n.authService.getUserId()==n.item.createdBy),b.Bb(1),b.pc("ngIf",n.authService.getUserId()==n.item.createdBy),b.Bb(3),b.Tc(" ",n.item.content+" "," "),b.Bb(2),b.Tc("Created at ",b.kc(30,14,n.item.createdAt),""),b.Bb(2),b.pc("ngIf",n.item.image),b.Bb(2),b.pc("ngIf",n.likes>0),b.Bb(1),b.pc("ngIf",n.authService.isAuthenticated())}}function Y(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",42),b.ec("click",function(){return b.Hc(i),b.ic().onBtnAddJournal()}),b.Rc(1),b.Tb(),b.Ub(2,"button",43),b.ec("click",function(){return b.Hc(i),b.ic().onBtnCancelJournal()}),b.Rc(3),b.Tb()}2&e&&(b.rc("title","","SAVE","(Enter) "),b.Bb(1),b.Tc(" ","Save"," "),b.Bb(1),b.rc("title","","CANCEL","(Esc) "),b.Bb(1),b.Sc("Cancel"))}var $,W=function(){return{width:"70%%"}},Z=(($=function(){function e(t,a,n,r,o,c){i(this,e),this.sanitizer=t,this.noti=a,this.router=n,this.cdr=r,this.authService=o,this.journalService=c,this.formDataAdd=new FormData,this.avatar="assets/img/cf_bg1.jpg",this.liked=!1,this.formDisplay=!1,this.loaded=!1,this.journalAdd={},this.dataSource={},this.likedUsers=[],this.likes=0,this.event=new b.n,this.item={}}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.loaded=!1,this.service.selectById(this.id).subscribe(function(t){e.item=t,e.likes=t.likes,e.likedUsers=t.likedUsers,e.likedUsers.findIndex(function(t){return t==e.authService.getUserId()})>-1&&(e.liked=!0);var i=[];e.item.imageDirectories&&e.item.imageDirectories.length>0&&e.item.imageDirectories.forEach(function(e){i.push(e)}),e.avatar="assets/img/cf_bg1.jpg",e.item&&e.item.avatarPath&&(e.avatar=e.item.avatarPath),e.item.images=i,e.item.images&&(e.item.image=e.item.images[0]),e.loaded=!0}),this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id}},{key:"onBtnUnLikeClick",value:function(){var e=this;this.item.id&&this.journalService.like(this.item).subscribe(function(t){e.liked=!1,e.likedUsers=t.likedUsers,e.likes--,e.cdr.detectChanges()})}},{key:"onBtnLikeClick",value:function(){var e=this;this.item.id&&this.journalService.like(this.item).subscribe(function(t){e.liked=!0,e.likedUsers=t.likedUsers,e.likes++,e.cdr.detectChanges()})}},{key:"goToUser",value:function(e){e==this.authService.getUserId()?this.router.navigate(["/app/user"]):this.router.navigate(["/app/user/user-view",e])}},{key:"onBtnDeleteClick",value:function(e){var t=this;this.service.delete(e).subscribe(function(e){t.noti.showSuccess(),t.event.emit(!0)})}},{key:"calculateTime",value:function(e){var t=new Date(e),i=new Date,a=t.getSeconds(),n=i.getSeconds(),r=t.getHours(),o=i.getHours(),c=t.getMonth(),s=i.getMonth(),l=t.getDate(),u=i.getDate(),d=t.getUTCFullYear(),b=i.getUTCFullYear(),f=t.getMinutes(),h=i.getMinutes();return b-d>1?b-d+" yrs ago":b-d>0?b-d+" yr ago":s-c>1?s-c+" months ago":s-c>0?s-c+" month ago":u-l>1?u-l+" days ago":u-l>0?u-l+" day ago":o-r>1?o-r+" hours ago":o-r>0?o-r+" hour ago":h-f>1?h-f+" minutes ago":h-f>0?h-f+" minute ago":n-a>1?n-a+" secs ago":n-a>0?n-a+" sec ago":void 0}},{key:"editJournal",value:function(){var e=this;this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id,setTimeout(function(){e.form.form.markAsPristine()},0),this.formDisplay=!0}},{key:"onBtnAddJournal",value:function(){var e=this;if(this.form.form.dirty){var t=new w.c;t.accept=function(){1==e.journalStatus&&(e.itemAdd.status=1),0==e.journalStatus&&(e.itemAdd.status=0),e.journalService.merge(e.itemAdd).subscribe(function(t){e.journalService.uploadJournalImages(t.id,e.formDataAdd).subscribe(function(t){e.noti.showSuccess(),e.journalContent="",e.journalStatus=!1,e.itemAdd={},e.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0),e.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges();this.cdr.detectChanges()}},{key:"onBtnCancelJournal",value:function(){var e=this;if(this.form.form.dirty){var t=new w.a;t.accept=function(){e.formDisplay=!1,e.journalStatus=!1,e.itemAdd={},setTimeout(function(){e.form.form.markAsPristine()},0),e.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges();this.formDataAdd=new FormData}},{key:"upload",value:function(e){this.formDataAdd=e}}]),e}()).\u0275fac=function(e){return new(e||$)(b.Ob(f.b),b.Ob(g.a),b.Ob(T.b),b.Ob(b.h),b.Ob(S.a),b.Ob(m.a))},$.\u0275cmp=b.Ib({type:$,selectors:[["app-post"]],viewQuery:function(e,t){var i;1&e&&b.Xc(O,3),2&e&&b.Cc(i=b.fc())&&(t.form=i.first)},inputs:{id:"id",createdAt:"createdAt",name:"name",imageSource:"imageSource",content:"content",feeling:"feeling",status:"status",avatar:"avatar",service:"service",userName:"userName"},outputs:{event:"event"},decls:38,vars:23,consts:[[2,"margin","0.5rem"],[4,"ngIf"],["class","container-fluid ",4,"ngIf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange"],[1,"fal","fa-user-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show","offLabel","hide","offIcon","pi pi-times","onIcon","pi pi-check","iconPos","right","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","name ",3,"form"],["rows","5 ","cols","30","pitemTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[1,"container-fluid"],[1,"justify-content-between",2,"text-align","center"],[2,"display","flex","width","200px","word-wrap","break-word","flex-direction","row"],["mat-card-avatar","",1,"example-header-image",2,"margin-bottom","16px"],[2,"height","40px","width","40px","border-radius","50%","flex-shrink","0","object-fit","cover",3,"src"],[2,"margin-left","10px","text-align","left"],[1,"wrap-text",2,"margin-bottom","0","word-wrap","break-word"],[2,"cursor","pointer",3,"click"],[1,"wrap-text",2,"word-wrap","break-word"],[1,"float-right",2,"display","flex","flex-direction","row"],[1,"d-flex","flex-row","mt-1","ellipsis"],[1,"mr-2"],[1,"fa","fa-ellipsis-h"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click",4,"ngIf"],["alt","Photo of journal",3,"src",4,"ngIf"],["style","    font-size: 0.5rem;\n    font-weight: 100;\n    line-height: 0.5;\n    color: deeppink;padding-left: 9px;",4,"ngIf"],["mat-menu-item","",3,"title","click"],["alt","Photo of journal",3,"src"],[2,"font-size","0.5rem","font-weight","100","line-height","0.5","color","deeppink","padding-left","9px"],[1,"pi","pi-thumbs-up",2,"font-size","0.75rem"],["mat-button","",3,"click",4,"ngIf"],["style","color: deeppink;","mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","",2,"color","deeppink",3,"click"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(e,t){if(1&e&&(b.Ub(0,"div",0),b.Pc(1,M,1,0,"app-waiting",1),b.Pc(2,X,35,16,"mat-card",2),b.Tb(),b.Ub(3,"p-dialog",3),b.ec("visibleChange",function(e){return t.formDisplay=e}),b.Ub(4,"p-header"),b.Pb(5,"i",4),b.Rc(6),b.Tb(),b.Ub(7,"form",null,5),b.Ub(9,"div",6),b.Ub(10,"div",7),b.Ub(11,"div",8),b.Ub(12,"label"),b.Rc(13),b.Tb(),b.Ub(14,"input",9),b.ec("ngModelChange",function(e){return t.itemAdd.feeling=e}),b.Tb(),b.Tb(),b.Ub(15,"div",8),b.Ub(16,"div",10),b.Ub(17,"label"),b.Rc(18),b.Tb(),b.Ub(19,"div"),b.Ub(20,"p-toggleButton",11),b.ec("ngModelChange",function(e){return t.journalStatus=e}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(21,"div",7),b.Ub(22,"div",8),b.Ub(23,"div",10),b.Ub(24,"label"),b.Rc(25),b.Tb(),b.Pb(26,"validate-form",12),b.Ub(27,"textarea",13),b.ec("ngModelChange",function(e){return t.itemAdd.content=e}),b.Tb(),b.Tb(),b.Tb(),b.Ub(28,"div",8),b.Ub(29,"div",10),b.Ub(30,"label"),b.Rc(31),b.Tb(),b.Ub(32,"app-upload",14),b.ec("onFileLoad",function(e){return t.upload(e)}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(33,"br"),b.Pb(34,"br"),b.Pb(35,"br"),b.Pb(36,"br"),b.Pc(37,Y,4,4,"ng-template",15),b.Tb()),2&e){var i=b.Dc(8);b.Bb(1),b.pc("ngIf",0==t.loaded),b.Bb(1),b.pc("ngIf",t.loaded),b.Bb(1),b.Lc(b.tc(22,W)),b.pc("visible",t.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),b.Bb(3),b.Tc(" ","Edit journal"," "),b.Bb(7),b.Sc("How are you feeling today?"),b.Bb(1),b.rc("placeholder","","Tell people how you feel"," "),b.pc("ngModel",t.itemAdd.feeling),b.Bb(4),b.Sc("Public/private"),b.Bb(2),b.pc("ngModel",t.journalStatus),b.Bb(5),b.Sc("What do you want to share?"),b.Bb(1),b.pc("form",i),b.Bb(1),b.rc("placeholder","","Your journal goes here"," "),b.pc("ngModel",t.itemAdd.content),b.Bb(4),b.Sc("We have not developed retrieving images, please reupload"),b.Bb(1),b.pc("preview",!0)}},directives:[l.m,y.a,U.h,k.u,k.l,k.m,k.c,k.k,k.n,P.a,D.a,k.r,C.a,U.k,R.a,B.a,B.e,B.c,B.h,B.g,x.b,j.a,A.d,I.a,A.a,B.d,B.b,A.b],pipes:[l.e],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-size:cover}img[_ngcontent-%COMP%]{display:block;width:100%;height:400px;-o-object-fit:cover;object-fit:cover}.card[_ngcontent-%COMP%]{margin:.5rem}[_nghost-%COMP%] .mat-card-header-text{display:none}.img-shop[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:9rem}.card[_ngcontent-%COMP%]{border:none}.ellipsis[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#a09c9c}hr[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:8px}.muted-color[_ngcontent-%COMP%]{color:#a09c9c;font-size:13px}.ellipsis[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:3px;cursor:pointer}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}@media (min-width:0px) and (max-width:800px){.wrap-text[_ngcontent-%COMP%]{width:130px}}@media (min-width:1200px){.wrap-text[_ngcontent-%COMP%]{width:450px}}.icons[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red}.icons[_ngcontent-%COMP%]   .fa-smile-o[_ngcontent-%COMP%]{color:#ff0;font-size:29px}.img-profile[_ngcontent-%COMP%]{display:block;height:300px;width:100%;-o-object-fit:cover;object-fit:cover}.rounded-image[_ngcontent-%COMP%]{border-radius:50%!important;display:flex;justify-content:center;align-items:center;height:50px;width:50px}.name[_ngcontent-%COMP%]{font-weight:600}.comment-text[_ngcontent-%COMP%]{font-size:12px}.status[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:10px;color:#00f}.form-control[_ngcontent-%COMP%]{border-radius:26px}.comment-input[_ngcontent-%COMP%]{position:relative}.fonts[_ngcontent-%COMP%]{position:absolute;right:13px;top:8px;color:#a09c9c}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#8bbafe;outline:0;box-shadow:none}@media (min-width:1200px){img[_ngcontent-%COMP%]{display:block;width:100%;height:800px;-o-object-fit:cover;object-fit:cover}}@media (min-width:800px) and (max-width:1200px){img[_ngcontent-%COMP%]{display:block;width:100%;height:600px;-o-object-fit:cover;object-fit:cover}}"]}),$),K=o("IaCn");function G(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-post",15),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("feeling",i.feeling)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.journalService)("userName",i.name)}}function Q(e,t){1&e&&b.Pb(0,"app-waiting")}function ee(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-review",16),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("rating",i.rating)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.reviewService)("userName",i.userName)}}function te(e,t){1&e&&b.Pb(0,"app-waiting")}var ie,ae=((ie=function(){function e(t,a,n,r,o,c){i(this,e),this.cdr=t,this.sanitizer=a,this.http=n,this.journalService=r,this.reviewService=o,this.noti=c,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.selectedFile=null,this.isLoadedReview=!1,this.request=new u,this.reviewRequest=new d.a,this.imageUrl="assets/img/cf_bg1.jpg"}return t(e,[{key:"ngOnInit",value:function(){this.initJournal(),this.initReview()}},{key:"initReview",value:function(){var e=this;this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){e.dataSourceReview.items=t,e.dataSourceReview.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"initJournal",value:function(){var e=this;this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(function(t){e.dataSource.items=t,e.dataSource.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"onScrollDownReview",value:function(){var e=this;1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoadedReview=!0,e.dataSourceReview.items=e.dataSourceReview.items?e.dataSourceReview.items.concat(t):t):e.stopScrollingReview=!0})):this.isLoadedReview=!0}},{key:"onScrollDown",value:function(){var e=this;1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoaded=!0,e.dataSource.items=e.dataSource.items?e.dataSource.items.concat(t):t):e.stopScrolling=!0})):this.isLoaded=!0}}]),e}()).\u0275fac=function(e){return new(e||ie)(b.Ob(b.h),b.Ob(f.b),b.Ob(h.b),b.Ob(m.a),b.Ob(p.a),b.Ob(g.a))},ie.\u0275cmp=b.Ib({type:ie,selectors:[["app-forum"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(e,t){1&e&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"ul",3),b.Ub(4,"li",4),b.Ub(5,"a",5),b.Rc(6,"Details"),b.Tb(),b.Tb(),b.Ub(7,"li",4),b.Ub(8,"a",6),b.Rc(9,"Reviews"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(10,"div",7),b.Ub(11,"div",8),b.Ub(12,"div",9),b.Ub(13,"div",10),b.ec("scrolled",function(){return t.onScrollDown()}),b.Pc(14,G,2,8,"div",11),b.Tb(),b.Pc(15,Q,1,0,"app-waiting",12),b.Tb(),b.Ub(16,"div",13),b.Ub(17,"div",10),b.ec("scrolled",function(){return t.onScrollDownReview()}),b.Pc(18,ee,2,8,"div",11),b.Tb(),b.Pc(19,te,1,0,"app-waiting",12),b.Tb(),b.Tb(),b.Tb(),b.Pb(20,"div",14),b.Tb(),b.Tb()),2&e&&(b.Bb(14),b.pc("ngForOf",t.dataSource.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded),b.Bb(3),b.pc("ngForOf",t.dataSourceReview.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded))},directives:[v.a,l.l,l.m,Z,R.a,K.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),ie),ne=o("7mip"),re=o("cp0P"),oe=o("rF8k"),ce=o("M9IT"),se=o("rEr+"),le=o("dts7");function ue(e,t){if(1&e&&(b.Ub(0,"th",9),b.Rc(1),b.Tb()),2&e){var i=t.$implicit;b.pc("width",i.width)("ngClass",i.class),b.Bb(1),b.Tc(" ",i.header," ")}}function de(e,t){if(1&e&&(b.Ub(0,"tr"),b.Pc(1,ue,2,3,"th",8),b.Tb()),2&e){var i=b.ic();b.Bb(1),b.pc("ngForOf",i.cols)}}function be(e,t){if(1&e&&(b.Ub(0,"span"),b.Rc(1),b.Tb()),2&e){var i=t.$implicit;b.Bb(1),b.Tc("",i.name+" "," ")}}var fe=function(e){return["/app/shop/shop-item",e]};function he(e,t){if(1&e){var i=b.Vb();b.Ub(0,"tr"),b.Ub(1,"td",10),b.Rc(2),b.Tb(),b.Ub(3,"td",10),b.Ub(4,"a",11),b.Rc(5),b.Tb(),b.Tb(),b.Ub(6,"td",10),b.Rc(7),b.Tb(),b.Ub(8,"td",10),b.Pc(9,be,2,1,"span",12),b.Tb(),b.Ub(10,"td",13),b.Ub(11,"button",14),b.Ub(12,"mat-icon"),b.Rc(13,"more_vert"),b.Tb(),b.Tb(),b.Ub(14,"mat-menu",null,15),b.Ub(16,"button",16),b.ec("click",function(){b.Hc(i);var e=t.$implicit;return b.ic().onBtnDeleteClick(e.id)}),b.Ub(17,"span"),b.Rc(18),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&e){var a=t.$implicit,n=t.rowIndex,r=b.Dc(15);b.Bb(1),b.pc("title",n+1),b.Bb(1),b.Tc(" ",n+1," "),b.Bb(1),b.pc("title",a.name),b.Bb(1),b.pc("routerLink",b.uc(15,fe,a.id)),b.Bb(1),b.Tc(" ",a.name,""),b.Bb(1),b.pc("title",a.address),b.Bb(1),b.Wc(" ",a.address,", ",a.street,", ",a.district,", ",a.city," "),b.Bb(1),b.pc("title","Categories"),b.Bb(1),b.pc("ngForOf",a.shopCategory),b.Bb(2),b.pc("matMenuTriggerFor",r),b.Bb(5),b.qc("title","X\xf3a"),b.Bb(2),b.Sc("DELETE")}}function me(e,t){1&e&&(b.Ub(0,"div",19),b.Rc(1,"No data to display"),b.Tb())}function pe(e,t){1&e&&(b.Ub(0,"p-messages",17),b.Pc(1,me,2,0,"ng-template",18),b.Tb())}var ge,ve=function(){return[12,24,36]},we=((ge=function(){function e(t,a,n,r,o){i(this,e),this.userShopService=t,this.authService=a,this.cd=n,this.router=r,this.noti=o,this.subscriptions=[],this.userShopRequest=new ne.a,this.dataSource={},this.cols=[{width:"50px",header:"No"},{width:"100px",header:"Name"},{width:"300px",header:"Address"},{width:"200px",header:"Category"},{width:"70px",header:"",maxWidth:"50px",class:"action"}]}return t(e,[{key:"ngOnInit",value:function(){this.initData()}},{key:"onPageChange",value:function(e){this.userShopRequest.pageIndex=e.pageIndex,this.userShopRequest.pageSize=e.pageSize,this.initData()}},{key:"initData",value:function(){var e=this,t=[this.userShopService.select(this.userShopRequest),this.userShopService.count(this.userShopRequest)],i=Object(re.a)(t).subscribe(function(t){e.userName=e.authService.getUser(),e.dataSource.items=t[0],e.dataSource.paginatorTotal=t[1],e.cd&&!e.cd.destroyed&&e.cd.detectChanges()});this.cd.detectChanges(),this.subscriptions.push(i),this.cd.detectChanges()}},{key:"viewShop",value:function(e){this.router.navigate(["apps/shop/shop-item/".concat(e)])}},{key:"onBtnDeleteClick",value:function(e){var t=this;this.userShopRequest.shopId=e,this.userShopService.deleteShopFromUser(this.userShopRequest).subscribe(function(e){t.noti.showSuccess(),t.userShopRequest=new ne.a,t.initData(),t.cd.detectChanges()})}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}()).\u0275fac=function(e){return new(e||ge)(b.Ob(oe.a),b.Ob(S.a),b.Ob(b.h),b.Ob(T.b),b.Ob(g.a))},ge.\u0275cmp=b.Ib({type:ge,selectors:[["app-shop-saved"]],decls:10,vars:9,consts:[[1,"container-fluid",2,"margin-top","30px"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column","margin-bottom","4rem"],[3,"pageSize","pageSizeOptions","length","showFirstLastButtons","page"],[1,"mat-table__wrapper"],["tableStyleClass","table-no-wrap",3,"value","autoLayout"],["pTemplate","header"],["pTemplate","body"],["severity","info",4,"ngIf"],["class","table-no-wrap",3,"width","ngClass",4,"ngFor","ngForOf"],[1,"table-no-wrap",3,"width","ngClass"],[3,"title"],["data-toggle","tooltip","data-placement","bottom","title","Go to shop","trigger","hover focus ",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"action"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click"],["severity","info"],["pTemplate",""],[1,"p-ml-2"]],template:function(e,t){1&e&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"h2"),b.Rc(3),b.Tb(),b.Tb(),b.Ub(4,"mat-paginator",2),b.ec("page",function(e){return t.onPageChange(e)}),b.Tb(),b.Ub(5,"div",3),b.Ub(6,"p-table",4),b.Pc(7,de,2,1,"ng-template",5),b.Pc(8,he,19,17,"ng-template",6),b.Tb(),b.Pc(9,pe,2,0,"p-messages",7),b.Tb(),b.Tb()),2&e&&(b.Bb(3),b.Tc(" Hi ",t.userName,", this is your list of saved shops"),b.Bb(1),b.pc("pageSize",12)("pageSizeOptions",b.tc(8,ve))("length",t.dataSource.paginatorTotal)("showFirstLastButtons",!0),b.Bb(2),b.pc("value",t.dataSource.items)("autoLayout",!0),b.Bb(3),b.pc("ngIf",!t.dataSource.items||0==t.dataSource.items.length))},directives:[ce.a,se.f,U.k,l.m,l.l,l.k,T.d,x.b,j.a,A.d,I.a,A.a,A.b,le.a],styles:[""]}),ge),Te=o("LqhL"),Se=o("T5lM"),ye=o("5I3+"),Ue=o("iadO"),ke=o("zFJ7"),Pe=["calendar"],De=["form"];function Ce(e,t){1&e&&b.Pb(0,"app-waiting")}function Re(e,t){if(1&e&&b.Pb(0,"img",36),2&e){var i=b.ic();b.pc("src",i.imageUrl,b.Jc)}}function Be(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",18),b.ec("click",function(){return b.Hc(i),b.ic().uploadAvatar()}),b.Rc(1,"Update avatar"),b.Tb()}}function xe(e,t){1&e&&(b.Ub(0,"div",39),b.Rc(1,"No data to display "),b.Tb())}function je(e,t){1&e&&(b.Ub(0,"p-messages",37),b.Pc(1,xe,2,0,"ng-template",38),b.Tb())}function Ae(e,t){if(1&e){var i=b.Vb();b.Ub(0,"div"),b.Ub(1,"app-post",40),b.ec("event",function(){return b.Hc(i),b.ic().initData()}),b.Tb(),b.Tb()}if(2&e){var a=t.$implicit,n=b.ic();b.Bb(1),b.pc("id",a.id)("status",a.status)("feeling",a.feeling)("createdAt",a.createdAt)("content",a.content)("name","Testing user")("avatar",n.postAvatar)("service",n.journalService)("userName",a.name)}}function Ie(e,t){1&e&&b.Pb(0,"app-waiting")}function Oe(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",41),b.ec("click",function(){return b.Hc(i),b.ic().onBtnAddJournal()}),b.Rc(1),b.Tb(),b.Ub(2,"button",42),b.ec("click",function(){return b.Hc(i),b.ic().onBtnCancelJournal()}),b.Rc(3),b.Tb()}2&e&&(b.rc("title","","SAVE","(Enter) "),b.Bb(1),b.Tc(" ","Save"," "),b.Bb(1),b.rc("title","","CANCEL","(Esc) "),b.Bb(1),b.Sc("Cancel"))}var Me,Le=function(){return{width:"70%%"}},Fe=((Me=function(e){a(o,e);var n=r(o);function o(e,t,a,r,c,s,d){var b;return i(this,o),(b=n.call(this)).cdr=e,b.sanitizer=t,b.http=a,b.journalService=r,b.noti=c,b.authService=s,b.userService=d,b.input={},b.formDataAdd=new FormData,b.formDataAvatar=new FormData,b.pipe=new l.e("en-US"),b.daysSelected=[],b.formDisplay=!1,b.isLoaded=!1,b.avatarLoaded=!1,b.journalAdd={},b.dataSource={},b.images=[],b.selectedFile=null,b.request=new u,b.stopScroll=!1,b.allItems=!1,b.pageLoaded=!1,b.imageUrl="assets/img/cf_bg1.jpg",b.isSelected=function(e){var t=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);return b.daysSelected.find(function(e){return e==t})?"selected":null},b}return t(o,[{key:"ngOnInit",value:function(){var e=this;this.userName=this.authService.getUser(),this.userService.selectById(this.authService.getUserId()).subscribe(function(t){t.avatarPath&&(e.postAvatar=t.avatarPath,e.imageUrl=e.postAvatar),e.pageLoaded=!0}),this.resetCalendar(),this.initData()}},{key:"initData",value:function(){var e=this;this.request.pageIndex=0,this.request.pageSize=3,this.journalService.select(this.request).subscribe(function(t){e.dataSource.items=t,e.dataSource.items&&e.dataSource.items.length>0&&e.dataSource.items.forEach(function(t){if(0!=t.length){var i=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(function(e){i.push(e)}),t.images=i,t.images&&(t.image=t.images[0])),e.cdr.detectChanges()}else e.allItems=!0}),e.data=e.dataSource.items,e.stopScroll=!1,e.allItems=!1})}},{key:"upload",value:function(e){this.formDataAdd=e}},{key:"loadAvatar",value:function(e){this.formDataAvatar=e,this.avatarLoaded=!0}},{key:"loadAvatarImage",value:function(e){this.imageUrl=e,this.cdr.detectChanges()}},{key:"renewPage",value:function(){this.resetCalendar(),this.initData()}},{key:"reset",value:function(){var e=this;this.formDataAdd=new FormData,this.input={},this.journalStatus=!1,this.journalContent="",this.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0)}},{key:"uploadAvatar",value:function(){var e=this;this.userService.uploadAvatar(this.formDataAvatar).subscribe(function(t){e.noti.showSuccess(),e.avatarLoaded=!1,e.userService.selectById(e.authService.getUserId()).subscribe(function(t){t.avatarPath&&(e.imageUrl=t.avatarPath,e.cdr.detectChanges())})})}},{key:"onScrollDown",value:function(){var e=this;1!=this.stopScroll&&1!=this.allItems?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.select(this.request).subscribe(function(t){0!=t.length?(t.forEach(function(t){var i=new Date(t.createdAt);e.selectNew(i,e.calendar),e.isSelected(i)}),t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoaded=!0,e.dataSource.items=e.dataSource.items=e.dataSource.items?e.dataSource.items.concat(t):t,e.data=e.dataSource.items):e.allItems=!0})):this.isLoaded=!0}},{key:"resetCalendar",value:function(){var e=this;this.journalService.getAllById().subscribe(function(t){t.forEach(function(t){var i=new Date(t.createdAt);e.selectNew(i,e.calendar),e.isSelected(i)}),e.cdr.detectChanges()})}},{key:"update",value:function(e){this.dates=this.dateJournal}},{key:"selectNew",value:function(e,t){var i=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);this.daysSelected.findIndex(function(e){return e==i})<0&&this.daysSelected.push(i),t.updateTodaysDate()}},{key:"format",value:function(e){return e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)}},{key:"select",value:function(e,t){var i=this,a=this.format(e);this.daysSelected.findIndex(function(e){return e==a}),this.data=this.dataSource.items.filter(function(e){return i.format(new Date(e.createdAt))==a}),this.stopScroll=!0,this.cdr.detectChanges(),t.updateTodaysDate()}},{key:"handleFileInput",value:function(e){var t=this;if(e.target.files){var i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=function(e){t.imageUrl=e.target.result}}}},{key:"onFileSelected",value:function(e){this.selectedFile=e.target.files[0]}},{key:"editJournal",value:function(e){var t=this;this.input={},this.input.content="",e&&(this.input.name=e.name,this.input.id=e.id,this.input.code=e.code),setTimeout(function(){t.form.form.markAsPristine()},0),this.formDisplay=!0}},{key:"onBtnSaveJournal",value:function(){var e=this;this.journalAdd.content=this.journalContent,1==this.journalStatus&&(this.journalAdd.status=1),0==this.journalStatus&&(this.journalAdd.status=0),this.journalAdd.created=new Date,this.journalService.insert(this.journalAdd).subscribe(function(t){e.journalService.uploadJournalImages(t.id,e.formDataAdd).subscribe(function(t){e.noti.showSuccess(),e.journalContent="",e.journalStatus=!1,e.cdr.detectChanges(),e.initData(),e.resetCalendar()})})}},{key:"onBtnAddJournal",value:function(){var e=this;if(this.form){if(!this.validateForm(this.form,"journal-edit"))return;if(this.form.form.dirty){var t=new Se.a;t.accept=function(){1==e.journalStatus&&(e.input.status=1),0==e.journalStatus&&(e.input.status=0),e.journalService.insert(e.input).subscribe(function(t){e.journalService.uploadJournalImages(t.id,e.formDataAdd).subscribe(function(t){e.noti.showSuccess(),e.journalContent="",e.journalStatus=!1,e.input={},e.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0),e.initData(),e.resetCalendar(),e.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.input={},setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges()}this.cdr.detectChanges()}},{key:"onBtnCancelJournal",value:function(){var e=this;if(this.form.form.dirty){var t=new w.a;t.accept=function(){e.formDisplay=!1,e.journalContent="",e.journalStatus=!1,e.formDataAdd=new FormData,e.input={},setTimeout(function(){e.form.form.markAsPristine()},0),e.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,this.formDataAdd=new FormData,setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges()}}]),o}(Te.a)).\u0275fac=function(e){return new(e||Me)(b.Ob(b.h),b.Ob(f.b),b.Ob(h.b),b.Ob(m.a),b.Ob(g.a),b.Ob(S.a),b.Ob(ye.a))},Me.\u0275cmp=b.Ib({type:Me,selectors:[["app-user"]],viewQuery:function(e,t){var i;1&e&&(b.Xc(Pe,1),b.Xc(De,3)),2&e&&(b.Cc(i=b.fc())&&(t.calendar=i.first),b.Cc(i=b.fc())&&(t.form=i.first))},features:[b.yb],decls:71,vars:29,consts:[[1,"container-fluid",2,"margin-top","30px","width","100%"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[4,"ngIf"],["style","width: 250px; height:250px; object-fit: cover; border-radius: 50%;",3,"src",4,"ngIf"],[2,"flex-direction","row"],[3,"onReadImage","onFileLoad"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"col-md-4"],[1,"sticky-top",2,"top","4rem"],["id","all",1,"btn","float-right",2,"background-color","deeppink","color","white",3,"click"],[3,"click"],[3,"dateClass","selectedChange"],["calendar",""],[1,"col-md-8"],[2,"margin","0.5rem"],[1,"btn","btn-primary",3,"click"],["severity","info",4,"ngIf"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange","onHide"],[1,"fal","fa-user-edit"],["autocomplete","off","id","journal-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text ","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show ","offLabel","hide ","offIcon","pi pi-times ","onIcon","pi pi-check ","iconPos","right ","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","content",3,"form"],["rows","5 ","cols","30","pInputTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],["severity","info"],["pTemplate",""],[1,"p-ml-2"],[3,"id","status","feeling","createdAt","content","name","avatar","service","userName","event"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(e,t){if(1&e){var i=b.Vb();b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"h2"),b.Rc(3),b.Tb(),b.Pc(4,Ce,1,0,"app-waiting",2),b.Pc(5,Re,1,1,"img",3),b.Ub(6,"div",4),b.Ub(7,"app-upload",5),b.ec("onReadImage",function(e){return t.loadAvatarImage(e)})("onFileLoad",function(e){return t.loadAvatar(e)}),b.Tb(),b.Tb(),b.Pc(8,Be,2,0,"button",6),b.Tb(),b.Ub(9,"div",7),b.Pb(10,"div",8),b.Ub(11,"div",9),b.Ub(12,"div",7),b.Ub(13,"div",10),b.Ub(14,"div",11),b.Ub(15,"mat-card"),b.Ub(16,"mat-card-title"),b.Rc(17," My coffee journey "),b.Ub(18,"button",12),b.ec("click",function(){return t.initData()}),b.Rc(19,"All"),b.Tb(),b.Tb(),b.Ub(20,"mat-card-subtitle"),b.Rc(21,"Click highlighted date to view journals"),b.Tb(),b.Ub(22,"div",13),b.ec("click",function(e){return e.stopPropagation()}),b.Ub(23,"mat-calendar",14,15),b.ec("selectedChange",function(e){b.Hc(i);var a=b.Dc(24);return t.select(e,a)}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"div",16),b.Ub(26,"div",17),b.Ub(27,"h2"),b.Rc(28,"Share your coffee journal now"),b.Tb(),b.Ub(29,"button",18),b.ec("click",function(){return t.editJournal()}),b.Rc(30,"Add Journal"),b.Tb(),b.Tb(),b.Pc(31,je,2,0,"p-messages",19),b.Ub(32,"div",20),b.ec("scrolled",function(){return t.onScrollDown()}),b.Pc(33,Ae,2,9,"div",21),b.Tb(),b.Pc(34,Ie,1,0,"app-waiting",2),b.Tb(),b.Tb(),b.Pb(35,"div",8),b.Tb(),b.Tb(),b.Tb(),b.Ub(36,"p-dialog",22),b.ec("visibleChange",function(e){return t.formDisplay=e})("onHide",function(){return t.reset()}),b.Ub(37,"p-header"),b.Pb(38,"i",23),b.Rc(39),b.Tb(),b.Ub(40,"form",24,25),b.Ub(42,"div",26),b.Ub(43,"div",27),b.Ub(44,"div",28),b.Ub(45,"label"),b.Rc(46),b.Tb(),b.Ub(47,"input",29),b.ec("ngModelChange",function(e){return t.input.feeling=e}),b.Tb(),b.Tb(),b.Ub(48,"div",28),b.Ub(49,"div",30),b.Ub(50,"label"),b.Rc(51),b.Tb(),b.Ub(52,"div"),b.Ub(53,"p-toggleButton",31),b.ec("ngModelChange",function(e){return t.journalStatus=e}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(54,"div",27),b.Ub(55,"div",28),b.Ub(56,"div",30),b.Ub(57,"label"),b.Rc(58),b.Tb(),b.Pb(59,"validate-form",32),b.Ub(60,"textarea",33),b.ec("ngModelChange",function(e){return t.input.content=e}),b.Tb(),b.Tb(),b.Tb(),b.Ub(61,"div",28),b.Ub(62,"div",30),b.Ub(63,"label"),b.Rc(64),b.Tb(),b.Ub(65,"app-upload",34),b.ec("onFileLoad",function(e){return t.upload(e)}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(66,"br"),b.Pb(67,"br"),b.Pb(68,"br"),b.Pb(69,"br"),b.Pc(70,Oe,4,4,"ng-template",35),b.Tb()}if(2&e){var a=b.Dc(41);b.Bb(3),b.Tc("Welcome to your journey page ",t.userName,""),b.Bb(1),b.pc("ngIf",0==t.pageLoaded),b.Bb(1),b.pc("ngIf",1==t.pageLoaded),b.Bb(3),b.pc("ngIf",1==t.avatarLoaded),b.Bb(15),b.pc("dateClass",t.isSelected),b.Bb(8),b.pc("ngIf",!t.data||0==t.data.length),b.Bb(2),b.pc("ngForOf",t.data),b.Bb(1),b.pc("ngIf",0==t.isLoaded),b.Bb(2),b.Lc(b.tc(28,Le)),b.pc("visible",t.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),b.Bb(3),b.Tc(" ","Add journal "," "),b.Bb(7),b.Sc("How are you feeling today?"),b.Bb(1),b.rc("placeholder","","Tell people how you feel"," "),b.pc("ngModel",t.input.feeling),b.Bb(4),b.Sc("Public/private"),b.Bb(2),b.pc("ngModel",t.journalStatus),b.Bb(5),b.Sc("What do you want to share?"),b.Bb(1),b.pc("form",a),b.Bb(1),b.rc("placeholder","","Your journal goes here"," "),b.pc("ngModel",t.input.content),b.Bb(4),b.Sc("Do you have any photo you want to share?"),b.Bb(1),b.pc("preview",!0)}},directives:[l.m,C.a,B.a,B.h,B.g,Ue.a,v.a,l.l,y.a,U.h,k.u,k.l,k.m,k.c,k.k,k.n,P.a,D.a,ke.a,k.r,U.k,R.a,le.a,Z],styles:[".first{height:50vh;min-height:200px;background-size:cover;background-image:linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef),linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef);background-position:50%}#all:hover{opacity:.5}.mat-calendar-body-cell-content{color:inherit}.mat-calendar-body-cell.selected{background-color:#ff1493!important;color:#fff;border-radius:50%}.drop-calendar{width:100%}.p-datepicker table td.p-datepicker-today>span{background:var(--hue-color-2);color:#495057;border-color:transparent}.p-datepicker table td>span{width:2.5rem;height:2.5rem;border-radius:50%;transition:box-shadow .2s;border:1px solid transparent}.p-datepicker table td.p-datepicker-today>span.p-highlight{color:#495057;background:red}.p-datepicker table td>span.p-highlight{color:#f5f5f5;background:#ff1493}"],encapsulation:2}),Me),_e=o("vza5");function qe(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-post",17),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("feeling",i.feeling)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.journalService)("userName",i.name)}}function Ee(e,t){1&e&&b.Pb(0,"app-waiting")}function Ne(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-review",18),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("rating",i.rating)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.reviewService)("userName",i.userName)}}function ze(e,t){1&e&&b.Pb(0,"app-waiting")}var Je,He,Ve,Xe=[{path:"",component:Fe,canActivate:[_e.a]},{path:"saved-shops",component:we,canActivate:[_e.a]},{path:"forum",component:ae},{path:"user-view/:id",component:(Je=function(){function e(t,a,n,r,o,c){i(this,e),this.cdr=t,this.journalService=a,this.reviewService=n,this.noti=r,this.route=o,this.userService=c,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.isLoadedReview=!1,this.request=new u,this.reviewRequest=new d.a,this.imageUrl="assets/img/cf_bg1.jpg"}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.sub=this.route.params.subscribe(function(t){e.id=t.id,e.userService.viewUserById(e.id).subscribe(function(t){e.imageUrl=t.avatarPath?t.avatarPath:"assets/img/cf_bg1.jpg",e.userName=t.userName,e.request.createdBy=e.id,e.reviewRequest.createdBy=e.id,e.request.status=1,e.reviewRequest.status=1,e.initJournal(),e.initReview()})})}},{key:"initReview",value:function(){var e=this;this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){e.dataSourceReview.items=t,e.dataSourceReview.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"initJournal",value:function(){var e=this;this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(function(t){e.dataSource.items=t,e.dataSource.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"onScrollDownReview",value:function(){var e=this;1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoadedReview=!0,e.dataSourceReview.items=e.dataSourceReview.items?e.dataSourceReview.items.concat(t):t):e.stopScrollingReview=!0})):this.isLoadedReview=!0}},{key:"onScrollDown",value:function(){var e=this;1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoaded=!0,e.dataSource.items=e.dataSource.items?e.dataSource.items.concat(t):t):e.stopScrolling=!0})):this.isLoaded=!0}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}}]),e}(),Je.\u0275fac=function(e){return new(e||Je)(b.Ob(b.h),b.Ob(m.a),b.Ob(p.a),b.Ob(g.a),b.Ob(T.a),b.Ob(ye.a))},Je.\u0275cmp=b.Ib({type:Je,selectors:[["app-user-view"]],decls:25,vars:6,consts:[[1,"container-fluid"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(e,t){1&e&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"h2"),b.Rc(3),b.Tb(),b.Pb(4,"img",2),b.Tb(),b.Ub(5,"div",3),b.Ub(6,"div",4),b.Ub(7,"ul",5),b.Ub(8,"li",6),b.Ub(9,"a",7),b.Rc(10,"Details"),b.Tb(),b.Tb(),b.Ub(11,"li",6),b.Ub(12,"a",8),b.Rc(13,"Reviews"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(14,"div",9),b.Ub(15,"div",10),b.Ub(16,"div",11),b.Ub(17,"div",12),b.ec("scrolled",function(){return t.onScrollDown()}),b.Pc(18,qe,2,8,"div",13),b.Tb(),b.Pc(19,Ee,1,0,"app-waiting",14),b.Tb(),b.Ub(20,"div",15),b.Ub(21,"div",12),b.ec("scrolled",function(){return t.onScrollDownReview()}),b.Pc(22,Ne,2,8,"div",13),b.Tb(),b.Pc(23,ze,1,0,"app-waiting",14),b.Tb(),b.Tb(),b.Tb(),b.Pb(24,"div",16),b.Tb(),b.Tb()),2&e&&(b.Bb(3),b.Tc("Viewing ",t.userName,""),b.Bb(1),b.pc("src",t.imageUrl,b.Jc),b.Bb(14),b.pc("ngForOf",t.dataSource.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded),b.Bb(3),b.pc("ngForOf",t.dataSourceReview.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded))},directives:[v.a,l.l,l.m,Z,R.a,K.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),Je)}],Ye=((He=function e(){i(this,e)}).\u0275mod=b.Mb({type:He}),He.\u0275inj=b.Lb({factory:function(e){return new(e||He)},imports:[[T.e.forChild(Xe)],T.e]}),He),$e=o("1kSV"),We=o("FKr1"),Ze=o("eO1q"),Ke=o("0IaG"),Ge=o("qFsG"),Qe=o("Xa2L"),et=o("d3UM"),tt=o("Nf9I"),it=o("7kUa"),at=o("xlun"),nt=o("Ka1L"),rt=((Ve=function e(){i(this,e)}).\u0275mod=b.Mb({type:Ve}),Ve.\u0275inj=b.Lb({factory:function(e){return new(e||Ve)},imports:[[l.c,Ye,nt.a,h.c,c.a,k.g,k.q,$e.b,y.b,ke.b,P.b,I.b,A.c,Ue.b,We.g,B.f,Ze.b,v.b,s.a,se.g,le.b,x.c,et.b,Ge.c,ce.b,Qe.a,j.b,Ke.b,$e.a,$e.f,tt.b,it.b,at.b]]}),Ve)}}])}();