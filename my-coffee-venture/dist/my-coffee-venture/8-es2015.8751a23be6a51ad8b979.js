(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{SPc8:function(e,t,i){"use strict";i.r(t),i.d(t,"ReviewerModule",function(){return ee});var a=i("lvTd"),s=i("V0Zc"),r=i("ofXK"),c=i("tyNb"),n=i("vza5"),o=i("xP/o"),d=i("fXoL"),l=i("jhN1"),h=i("tk/3"),b=i("R1yZ"),p=i("w6oe"),u=i("8VXs"),f=i("5I3+"),g=i("Wp6s"),m=i("iadO"),v=i("dlKe"),w=i("gqqX"),S=i("dts7"),y=i("7zfz"),D=i("IaCn"),T=i("vR4d");const U=["calendar"];function k(e,t){1&e&&(d.Ub(0,"div",21),d.Rc(1,"No data to display "),d.Tb())}function I(e,t){1&e&&(d.Ub(0,"p-messages",19),d.Pc(1,k,2,0,"ng-template",20),d.Tb())}function x(e,t){if(1&e){const e=d.Vb();d.Ub(0,"div"),d.Ub(1,"app-review",22),d.ec("event",function(){return d.Hc(e),d.ic().initData()}),d.Tb(),d.Tb()}if(2&e){const e=t.$implicit,i=d.ic();d.Bb(1),d.pc("id",e.id)("service",i.reviewService)("userName",e.name)}}function C(e,t){1&e&&d.Pb(0,"app-waiting")}const N=[{path:"",component:(()=>{class e{constructor(e,t,i,a,s,r,c){this.cdr=e,this.sanitizer=t,this.http=i,this.reviewService=a,this.noti=s,this.authService=r,this.userService=c,this.input={},this.formDataAdd=new FormData,this.formDataAvatar=new FormData,this.daysSelected=[],this.formDisplay=!1,this.isLoaded=!1,this.avatarLoaded=!1,this.dataSource={},this.images=[],this.selectedFile=null,this.request=new o.a,this.stopScroll=!1,this.allItems=!1,this.pageLoaded=!1,this.imageUrl="assets/img/cf_bg1.jpg",this.isSelected=e=>{const t=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);return this.daysSelected.find(e=>e==t)?"selected":null}}ngOnInit(){this.formDisplay=!1,this.userName=this.authService.getUser(),this.userService.selectById(this.authService.getUserId()).subscribe(e=>{e.avatarPath&&(this.postAvatar=e.avatarPath,this.imageUrl=this.postAvatar),this.pageLoaded=!0}),this.resetCalendar(),this.initData()}initData(){this.request.pageIndex=0,this.request.pageSize=3,this.reviewService.select(this.request).subscribe(e=>{this.dataSource.items=e,this.dataSource.items.forEach(e=>{if(0==e.length)return void(this.allItems=!0);let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t,e.images&&(e.image=e.images[0])),this.cdr.detectChanges()}),this.data=this.dataSource.items,this.stopScroll=!1,this.allItems=!1})}onScrollDown(){1!=this.stopScroll&&1!=this.allItems?(this.isLoaded=!1,this.request.pageIndex++,this.reviewService.select(this.request).subscribe(e=>{0!=e.length?(e.forEach(e=>{let t=new Date(e.createdAt);this.selectNew(t,this.calendar),this.isSelected(t)}),e.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(e):e,this.data=this.dataSource.items):this.allItems=!0})):this.isLoaded=!0}resetCalendar(){this.reviewService.getAllById().subscribe(e=>{e.forEach(e=>{let t=new Date(e.createdAt);this.selectNew(t,this.calendar),this.isSelected(t)}),this.cdr.detectChanges()})}update(e){this.dates=this.datereview}selectNew(e,t){const i=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);this.daysSelected.findIndex(e=>e==i)<0&&this.daysSelected.push(i),t.updateTodaysDate()}editReview(){this.input={},this.input.content="",this.formDisplay=!0}format(e){return e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)}select(e,t){const i=this.format(e);this.daysSelected.findIndex(e=>e==i)>=0&&(this.data=this.dataSource.items.filter(e=>this.format(new Date(e.createdAt))==i),this.stopScroll=!0,this.cdr.detectChanges()),t.updateTodaysDate()}onUploadEvent(e){this.formDisplay=!1,e&&(this.resetCalendar(),this.initData())}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(d.h),d.Ob(l.b),d.Ob(h.b),d.Ob(b.a),d.Ob(p.a),d.Ob(u.a),d.Ob(f.a))},e.\u0275cmp=d.Ib({type:e,selectors:[["app-reviewer"]],viewQuery:function(e,t){if(1&e&&d.Xc(U,1),2&e){let e;d.Cc(e=d.fc())&&(t.calendar=e.first)}},decls:32,vars:7,consts:[[1,"container-fluid",2,"margin-top","30px","width","100%"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column","margin-bottom","4rem"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"col-md-4"],[1,"sticky-top",2,"top","5rem"],["id","all",1,"btn","float-right",2,"background-color","deeppink","color","white",3,"click"],[3,"click"],[3,"dateClass","selectedChange"],["calendar",""],[1,"col-md-8"],[2,"margin","0.5rem"],[1,"btn","btn-primary",3,"click"],["severity","info",4,"ngIf"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"formDisplay","input","event"],["severity","info"],["pTemplate",""],[1,"p-ml-2"],[3,"id","service","userName","event"]],template:function(e,t){if(1&e){const e=d.Vb();d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"h2"),d.Rc(3),d.Tb(),d.Tb(),d.Ub(4,"div",2),d.Pb(5,"div",3),d.Ub(6,"div",4),d.Ub(7,"div",2),d.Ub(8,"div",5),d.Ub(9,"div",6),d.Ub(10,"mat-card"),d.Ub(11,"mat-card-title"),d.Rc(12," My coffee review "),d.Ub(13,"button",7),d.ec("click",function(){return t.initData()}),d.Rc(14,"All"),d.Tb(),d.Tb(),d.Ub(15,"mat-card-subtitle"),d.Rc(16,"Click highlighted date to view reviews"),d.Tb(),d.Ub(17,"div",8),d.ec("click",function(e){return e.stopPropagation()}),d.Ub(18,"mat-calendar",9,10),d.ec("selectedChange",function(i){d.Hc(e);const a=d.Dc(19);return t.select(i,a)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(20,"div",11),d.Ub(21,"div",12),d.Ub(22,"h2"),d.Rc(23,"Share your coffee review now"),d.Tb(),d.Ub(24,"button",13),d.ec("click",function(){return t.editReview()}),d.Rc(25,"Add review"),d.Tb(),d.Tb(),d.Pc(26,I,2,0,"p-messages",14),d.Ub(27,"div",15),d.ec("scrolled",function(){return t.onScrollDown()}),d.Pc(28,x,2,3,"div",16),d.Tb(),d.Pc(29,C,1,0,"app-waiting",17),d.Tb(),d.Tb(),d.Pb(30,"div",3),d.Tb(),d.Tb(),d.Tb(),d.Ub(31,"app-review-add",18),d.ec("event",function(e){return t.onUploadEvent(e)}),d.Tb()}2&e&&(d.Bb(3),d.Tc("Welcome to your review page ",t.userName,""),d.Bb(15),d.pc("dateClass",t.isSelected),d.Bb(8),d.pc("ngIf",!t.data||0==t.data.length),d.Bb(2),d.pc("ngForOf",t.data),d.Bb(1),d.pc("ngIf",0==t.isLoaded),d.Bb(2),d.pc("formDisplay",t.formDisplay)("input",t.input))},directives:[g.a,g.h,g.g,m.a,r.m,v.a,r.l,w.a,S.a,y.k,D.a,T.a],styles:[".first{height:50vh;min-height:200px;background-size:cover;background-image:linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef),linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef);background-position:50%}#all:hover{opacity:.5}.mat-calendar-body-cell-content{color:inherit}.mat-calendar-body-cell.selected{background-color:#ff1493!important;color:#fff;border-radius:50%}.drop-calendar{width:100%}.p-datepicker table td.p-datepicker-today>span{background:var(--hue-color-2);color:#495057;border-color:transparent}.p-datepicker table td>span{width:2.5rem;height:2.5rem;border-radius:50%;transition:box-shadow .2s;border:1px solid transparent}.p-datepicker table td.p-datepicker-today>span.p-highlight{color:#495057;background:red}.p-datepicker table td>span.p-highlight{color:#f5f5f5;background:#ff1493}"],encapsulation:2}),e})(),canActivate:[n.a],data:{expectedRole:"ADMIN"}}];let R=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[c.e.forChild(N)],c.e]}),e})();var F=i("3Pt+"),L=i("FKr1"),O=i("NFeN"),P=i("STbY"),q=i("1kSV"),A=i("eO1q"),M=i("/RsI"),B=i("zFJ7"),E=i("rEr+"),z=i("Y+ZO"),X=i("Js94"),V=i("xfXw"),j=i("bTqV"),Y=i("d3UM"),J=i("0IaG"),K=i("qFsG"),Z=i("M9IT"),G=i("Xa2L"),H=i("Qu3c"),Q=i("Nf9I"),W=i("7kUa"),$=i("xlun"),_=i("Ka1L");let ee=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[r.c,R,X.b,_.a,h.c,V.a,P.c,F.g,F.q,q.b,M.b,B.b,z.b,O.b,m.b,L.g,g.f,A.b,v.b,s.a,E.g,S.b,a.b,j.c,P.c,Y.b,K.c,Z.b,G.a,H.b,J.b,q.a,q.f,Q.b,W.b,$.b]]}),e})()}}]);