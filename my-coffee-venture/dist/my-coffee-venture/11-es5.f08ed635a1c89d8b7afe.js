!function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,a=c(e);if(t){var n=c(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return o(this,i)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{n60B:function(e,n,o){"use strict";o.r(n),o.d(n,"UserModule",function(){return ct});var c=o("YdpT"),s=o("WGHq"),l=o("ofXK"),u=function(e){a(n,e);var t=r(n);function n(){return i(this,n),t.apply(this,arguments)}return n}(o("ON/h").a),d=o("fliq"),b=o("fXoL"),f=o("vYlj"),h=o("+75q"),m=o("dlKe"),p=o("avVo"),g=o("jhN1"),v=o("CQAr"),w=o("tyNb"),S=o("UPkN"),T=o("/RsI"),U=o("7zfz"),k=o("3Pt+"),y=o("Y+ZO"),P=o("dm/z"),R=o("ceAI"),A=o("gixc"),D=o("Wp6s"),B=o("bTqV"),C=o("Qu3c"),O=o("STbY"),j=o("NFeN"),x=["form"];function I(e,t){1&e&&b.Pb(0,"app-waiting")}function E(e,t){1&e&&(b.Ub(0,"span"),b.Rc(1,"Public"),b.Tb())}function M(e,t){1&e&&(b.Ub(0,"span"),b.Rc(1,"Private"),b.Tb())}function _(e,t){if(1&e&&(b.Ub(0,"span"),b.Rc(1),b.Tb()),2&e){var i=b.ic(2);b.Bb(1),b.Tc("-- ",i.item.feeling,"")}}function L(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",34),b.ec("click",function(){b.Hc(i);var e=b.ic(2);return e.onBtnDeleteClick(e.item.id)}),b.Ub(1,"span"),b.Rc(2),b.Tb(),b.Tb()}2&e&&(b.qc("title","Delete"),b.Bb(2),b.Sc("Delete"))}function F(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",34),b.ec("click",function(){return b.Hc(i),b.ic(2).editJournal()}),b.Ub(1,"span"),b.Rc(2),b.Tb(),b.Tb()}2&e&&(b.qc("title","Edit"),b.Bb(2),b.Sc("Edit"))}function q(e,t){if(1&e&&b.Pb(0,"img",35),2&e){var i=b.ic(2);b.pc("src",i.item.image,b.Jc)}}function N(e,t){if(1&e&&(b.Ub(0,"div",36),b.Pb(1,"i",37),b.Rc(2),b.Tb()),2&e){var i=b.ic(2);b.Bb(2),b.Tc(" Liked by ",i.likes," people ")}}function z(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",40),b.ec("click",function(){return b.Hc(i),b.ic(3).onBtnLikeClick()}),b.Rc(1,"LIKE"),b.Tb()}}function J(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",41),b.ec("click",function(){return b.Hc(i),b.ic(3).onBtnUnLikeClick()}),b.Rc(1,"LIKED"),b.Tb()}}function H(e,t){if(1&e&&(b.Ub(0,"div"),b.Pc(1,z,2,0,"button",38),b.Pc(2,J,2,0,"button",39),b.Tb()),2&e){var i=b.ic(2);b.Bb(1),b.pc("ngIf",!i.liked),b.Bb(1),b.pc("ngIf",i.liked)}}function V(e,t){if(1&e){var i=b.Vb();b.Ub(0,"mat-card",16),b.Ub(1,"mat-card-header",17),b.Ub(2,"div",18),b.Ub(3,"div",19),b.Pb(4,"img",20),b.Tb(),b.Ub(5,"div",21),b.Ub(6,"mat-card-title",22),b.Ub(7,"a",23),b.ec("click",function(){b.Hc(i);var e=b.ic();return e.goToUser(e.item.createdBy)}),b.Rc(8),b.Tb(),b.Tb(),b.Ub(9,"mat-card-subtitle",24),b.Pc(10,E,2,0,"span",1),b.Pc(11,M,2,0,"span",1),b.Pc(12,_,2,1,"span",1),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"div",25),b.Ub(14,"div",26),b.Ub(15,"small",27),b.Rc(16),b.Tb(),b.Pb(17,"i",28),b.Tb(),b.Ub(18,"button",29),b.Ub(19,"mat-icon"),b.Rc(20,"more_vert"),b.Tb(),b.Tb(),b.Ub(21,"mat-menu",null,30),b.Pc(23,L,3,2,"button",31),b.Pc(24,F,3,2,"button",31),b.Tb(),b.Tb(),b.Tb(),b.Ub(25,"mat-card-content"),b.Ub(26,"p"),b.Rc(27),b.Ub(28,"i"),b.Rc(29),b.jc(30,"date"),b.Tb(),b.Tb(),b.Pc(31,q,1,1,"img",32),b.Tb(),b.Ub(32,"mat-card-actions"),b.Pc(33,N,3,1,"div",33),b.Pc(34,H,3,2,"div",1),b.Tb(),b.Tb()}if(2&e){var a=b.Dc(22),n=b.ic();b.Bb(4),b.pc("src",n.avatar,b.Jc),b.Bb(4),b.Sc(n.item.userName),b.Bb(2),b.pc("ngIf",0!=n.item.status),b.Bb(1),b.pc("ngIf",0==n.item.status),b.Bb(1),b.pc("ngIf",n.item.feeling),b.Bb(4),b.Sc(n.calculateTime(n.item.createdAt)),b.Bb(2),b.pc("matMenuTriggerFor",a),b.Bb(5),b.pc("ngIf",n.authService.getUserId()==n.item.createdBy),b.Bb(1),b.pc("ngIf",n.authService.getUserId()==n.item.createdBy),b.Bb(3),b.Tc(" ",n.item.content+" "," "),b.Bb(2),b.Tc("Created at ",b.kc(30,14,n.item.createdAt),""),b.Bb(2),b.pc("ngIf",n.item.image),b.Bb(2),b.pc("ngIf",n.likes>0),b.Bb(1),b.pc("ngIf",n.authService.isAuthenticated())}}function Y(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",42),b.ec("click",function(){return b.Hc(i),b.ic().onBtnAddJournal()}),b.Rc(1),b.Tb(),b.Ub(2,"button",43),b.ec("click",function(){return b.Hc(i),b.ic().onBtnCancelJournal()}),b.Rc(3),b.Tb()}2&e&&(b.rc("title","","SAVE","(Enter) "),b.Bb(1),b.Tc(" ","Save"," "),b.Bb(1),b.rc("title","","CANCEL","(Esc) "),b.Bb(1),b.Sc("Cancel"))}var G,W=function(){return{width:"70%%"}},$=((G=function(){function e(t,a,n,r,o,c){i(this,e),this.sanitizer=t,this.noti=a,this.router=n,this.cdr=r,this.authService=o,this.journalService=c,this.formDataAdd=new FormData,this.avatar="assets/img/cf_bg1.jpg",this.liked=!1,this.formDisplay=!1,this.loaded=!1,this.journalAdd={},this.dataSource={},this.likedUsers=[],this.likes=0,this.event=new b.n,this.item={}}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.loaded=!1,this.service.selectById(this.id).subscribe(function(t){e.item=t,e.likes=t.likes,e.likedUsers=t.likedUsers,e.likedUsers.findIndex(function(t){return t==e.authService.getUserId()})>-1&&(e.liked=!0);var i=[];e.item.imageDirectories&&e.item.imageDirectories.length>0&&e.item.imageDirectories.forEach(function(e){i.push(e)}),e.avatar="assets/img/cf_bg1.jpg",e.item&&e.item.avatarPath&&(e.avatar=e.item.avatarPath),e.item.images=i,e.item.images&&(e.item.image=e.item.images[0]),e.loaded=!0}),this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id}},{key:"onBtnUnLikeClick",value:function(){var e=this;this.item.id&&this.journalService.like(this.item).subscribe(function(t){e.liked=!1,e.likedUsers=t.likedUsers,e.likes--,e.cdr.detectChanges()})}},{key:"onBtnLikeClick",value:function(){var e=this;this.item.id&&this.journalService.like(this.item).subscribe(function(t){e.liked=!0,e.likedUsers=t.likedUsers,e.likes++,e.cdr.detectChanges()})}},{key:"goToUser",value:function(e){e==this.authService.getUserId()?this.router.navigate(["/app/user"]):this.router.navigate(["/app/user/user-view",e])}},{key:"onBtnDeleteClick",value:function(e){var t=this;this.service.delete(e).subscribe(function(e){t.noti.showSuccess(),t.event.emit(!0)})}},{key:"calculateTime",value:function(e){var t=new Date(e),i=new Date,a=t.getSeconds(),n=i.getSeconds(),r=t.getHours(),o=i.getHours(),c=t.getMonth(),s=i.getMonth(),l=t.getDate(),u=i.getDate(),d=t.getUTCFullYear(),b=i.getUTCFullYear(),f=t.getMinutes(),h=i.getMinutes();return b-d>1?b-d+" yrs ago":b-d>0?b-d+" yr ago":s-c>1?s-c+" months ago":s-c>0?s-c+" month ago":u-l>1?u-l+" days ago":u-l>0?u-l+" day ago":o-r>1?o-r+" hours ago":o-r>0?o-r+" hour ago":h-f>1?h-f+" minutes ago":h-f>0?h-f+" minute ago":n-a>1?n-a+" secs ago":n-a>0?n-a+" sec ago":void 0}},{key:"editJournal",value:function(){var e=this;this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id,setTimeout(function(){e.form.form.markAsPristine()},0),this.formDisplay=!0}},{key:"onBtnAddJournal",value:function(){var e=this;if(this.form.form.dirty){var t=new p.c;t.accept=function(){1==e.journalStatus&&(e.itemAdd.status=1),0==e.journalStatus&&(e.itemAdd.status=0),e.journalService.merge(e.itemAdd).subscribe(function(t){e.journalService.uploadJournalImages(t.id,e.formDataAdd).subscribe(function(t){e.noti.showSuccess(),e.journalContent="",e.journalStatus=!1,e.itemAdd={},e.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0),e.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges();this.cdr.detectChanges()}},{key:"onBtnCancelJournal",value:function(){var e=this;if(this.form.form.dirty){var t=new p.a;t.accept=function(){e.formDisplay=!1,e.journalStatus=!1,e.itemAdd={},setTimeout(function(){e.form.form.markAsPristine()},0),e.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges();this.formDataAdd=new FormData}},{key:"upload",value:function(e){this.formDataAdd=e}}]),e}()).\u0275fac=function(e){return new(e||G)(b.Ob(g.b),b.Ob(v.a),b.Ob(w.b),b.Ob(b.h),b.Ob(S.a),b.Ob(f.a))},G.\u0275cmp=b.Ib({type:G,selectors:[["app-post"]],viewQuery:function(e,t){var i;1&e&&b.Xc(x,3),2&e&&b.Cc(i=b.fc())&&(t.form=i.first)},inputs:{id:"id",createdAt:"createdAt",name:"name",imageSource:"imageSource",content:"content",feeling:"feeling",status:"status",avatar:"avatar",service:"service",userName:"userName"},outputs:{event:"event"},decls:38,vars:23,consts:[[2,"margin","0.5rem"],[4,"ngIf"],["class","container-fluid ",4,"ngIf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange"],[1,"fal","fa-user-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show","offLabel","hide","offIcon","pi pi-times","onIcon","pi pi-check","iconPos","right","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","name ",3,"form"],["rows","5 ","cols","30","pitemTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[1,"container-fluid"],[1,"justify-content-between",2,"text-align","center"],[2,"display","flex","width","200px","word-wrap","break-word","flex-direction","row"],["mat-card-avatar","",1,"example-header-image",2,"margin-bottom","16px"],[2,"height","40px","width","40px","border-radius","50%","flex-shrink","0","object-fit","cover",3,"src"],[2,"margin-left","10px","text-align","left"],[1,"wrap-text",2,"margin-bottom","0","word-wrap","break-word"],[2,"cursor","pointer",3,"click"],[1,"wrap-text",2,"word-wrap","break-word"],[1,"float-right",2,"display","flex","flex-direction","row"],[1,"d-flex","flex-row","mt-1","ellipsis"],[1,"mr-2"],[1,"fa","fa-ellipsis-h"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click",4,"ngIf"],["alt","Photo of journal",3,"src",4,"ngIf"],["style","font-size: 0.5rem; font-weight: 100; line-height: 0.5; color: deeppink;padding-left: 9px;",4,"ngIf"],["mat-menu-item","",3,"title","click"],["alt","Photo of journal",3,"src"],[2,"font-size","0.5rem","font-weight","100","line-height","0.5","color","deeppink","padding-left","9px"],[1,"pi","pi-thumbs-up",2,"font-size","0.75rem"],["mat-button","",3,"click",4,"ngIf"],["style","color: deeppink;","mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","",2,"color","deeppink",3,"click"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(e,t){if(1&e&&(b.Ub(0,"div",0),b.Pc(1,I,1,0,"app-waiting",1),b.Pc(2,V,35,16,"mat-card",2),b.Tb(),b.Ub(3,"p-dialog",3),b.ec("visibleChange",function(e){return t.formDisplay=e}),b.Ub(4,"p-header"),b.Pb(5,"i",4),b.Rc(6),b.Tb(),b.Ub(7,"form",null,5),b.Ub(9,"div",6),b.Ub(10,"div",7),b.Ub(11,"div",8),b.Ub(12,"label"),b.Rc(13),b.Tb(),b.Ub(14,"input",9),b.ec("ngModelChange",function(e){return t.itemAdd.feeling=e}),b.Tb(),b.Tb(),b.Ub(15,"div",8),b.Ub(16,"div",10),b.Ub(17,"label"),b.Rc(18),b.Tb(),b.Ub(19,"div"),b.Ub(20,"p-toggleButton",11),b.ec("ngModelChange",function(e){return t.journalStatus=e}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(21,"div",7),b.Ub(22,"div",8),b.Ub(23,"div",10),b.Ub(24,"label"),b.Rc(25),b.Tb(),b.Pb(26,"validate-form",12),b.Ub(27,"textarea",13),b.ec("ngModelChange",function(e){return t.itemAdd.content=e}),b.Tb(),b.Tb(),b.Tb(),b.Ub(28,"div",8),b.Ub(29,"div",10),b.Ub(30,"label"),b.Rc(31),b.Tb(),b.Ub(32,"app-upload",14),b.ec("onFileLoad",function(e){return t.upload(e)}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(33,"br"),b.Pb(34,"br"),b.Pb(35,"br"),b.Pb(36,"br"),b.Pc(37,Y,4,4,"ng-template",15),b.Tb()),2&e){var i=b.Dc(8);b.Bb(1),b.pc("ngIf",0==t.loaded),b.Bb(1),b.pc("ngIf",t.loaded),b.Bb(1),b.Lc(b.tc(22,W)),b.pc("visible",t.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),b.Bb(3),b.Tc(" ","Edit journal"," "),b.Bb(7),b.Sc("How are you feeling today?"),b.Bb(1),b.rc("placeholder","","Tell people how you feel"," "),b.pc("ngModel",t.itemAdd.feeling),b.Bb(4),b.Sc("Public/private"),b.Bb(2),b.pc("ngModel",t.journalStatus),b.Bb(5),b.Sc("What do you want to share?"),b.Bb(1),b.pc("form",i),b.Bb(1),b.rc("placeholder","","Your journal goes here"," "),b.pc("ngModel",t.itemAdd.content),b.Bb(4),b.Sc("We have not developed retrieving images, please reupload"),b.Bb(1),b.pc("preview",!0)}},directives:[l.n,T.a,U.h,k.w,k.n,k.o,k.c,k.m,k.p,y.a,P.a,k.t,R.a,U.k,A.a,D.a,D.e,D.c,D.h,D.g,B.b,C.a,O.d,j.a,O.a,D.d,D.b,O.b],pipes:[l.e],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-size:cover}img[_ngcontent-%COMP%]{display:block;width:100%;height:400px;-o-object-fit:cover;object-fit:cover}.card[_ngcontent-%COMP%]{margin:.5rem}[_nghost-%COMP%] .mat-card-header-text{display:none}.img-shop[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:9rem}.card[_ngcontent-%COMP%]{border:none}.ellipsis[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#a09c9c}hr[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:8px}.muted-color[_ngcontent-%COMP%]{color:#a09c9c;font-size:13px}.ellipsis[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:3px;cursor:pointer}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}@media (min-width:0px) and (max-width:800px){.wrap-text[_ngcontent-%COMP%]{width:130px}}@media (min-width:1200px){.wrap-text[_ngcontent-%COMP%]{width:450px}}.icons[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red}.icons[_ngcontent-%COMP%]   .fa-smile-o[_ngcontent-%COMP%]{color:#ff0;font-size:29px}.img-profile[_ngcontent-%COMP%]{display:block;height:300px;width:100%;-o-object-fit:cover;object-fit:cover}.rounded-image[_ngcontent-%COMP%]{border-radius:50%!important;display:flex;justify-content:center;align-items:center;height:50px;width:50px}.name[_ngcontent-%COMP%]{font-weight:600}.comment-text[_ngcontent-%COMP%]{font-size:12px}.status[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:10px;color:#00f}.form-control[_ngcontent-%COMP%]{border-radius:26px}.comment-input[_ngcontent-%COMP%]{position:relative}.fonts[_ngcontent-%COMP%]{position:absolute;right:13px;top:8px;color:#a09c9c}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#8bbafe;outline:0;box-shadow:none}@media (min-width:1200px){img[_ngcontent-%COMP%]{display:block;width:100%;height:800px;-o-object-fit:cover;object-fit:cover}}@media (min-width:800px) and (max-width:1200px){img[_ngcontent-%COMP%]{display:block;width:100%;height:600px;-o-object-fit:cover;object-fit:cover}}"]}),G),X=o("E9gd");function Z(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-post",15),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("feeling",i.feeling)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.journalService)("userName",i.name)}}function K(e,t){1&e&&b.Pb(0,"app-waiting")}function Q(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-review",16),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("rating",i.rating)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.reviewService)("userName",i.userName)}}function ee(e,t){1&e&&b.Pb(0,"app-waiting")}var te,ie=((te=function(){function e(t,a){i(this,e),this.journalService=t,this.reviewService=a,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.selectedFile=null,this.isLoadedReview=!1,this.request=new u,this.reviewRequest=new d.a,this.imageUrl="assets/img/cf_bg1.jpg"}return t(e,[{key:"ngOnInit",value:function(){this.initJournal(),this.initReview()}},{key:"initReview",value:function(){var e=this;this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){e.dataSourceReview.items=t,e.dataSourceReview.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"initJournal",value:function(){var e=this;this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(function(t){e.dataSource.items=t,e.dataSource.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"onScrollDownReview",value:function(){var e=this;1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoadedReview=!0,e.dataSourceReview.items=e.dataSourceReview.items?e.dataSourceReview.items.concat(t):t):e.stopScrollingReview=!0})):this.isLoadedReview=!0}},{key:"onScrollDown",value:function(){var e=this;1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoaded=!0,e.dataSource.items=e.dataSource.items?e.dataSource.items.concat(t):t):e.stopScrolling=!0})):this.isLoaded=!0}}]),e}()).\u0275fac=function(e){return new(e||te)(b.Ob(f.a),b.Ob(h.a))},te.\u0275cmp=b.Ib({type:te,selectors:[["app-forum"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(e,t){1&e&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Ub(3,"ul",3),b.Ub(4,"li",4),b.Ub(5,"a",5),b.Rc(6,"Details"),b.Tb(),b.Tb(),b.Ub(7,"li",4),b.Ub(8,"a",6),b.Rc(9,"Reviews"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(10,"div",7),b.Ub(11,"div",8),b.Ub(12,"div",9),b.Ub(13,"div",10),b.ec("scrolled",function(){return t.onScrollDown()}),b.Pc(14,Z,2,8,"div",11),b.Tb(),b.Pc(15,K,1,0,"app-waiting",12),b.Tb(),b.Ub(16,"div",13),b.Ub(17,"div",10),b.ec("scrolled",function(){return t.onScrollDownReview()}),b.Pc(18,Q,2,8,"div",11),b.Tb(),b.Pc(19,ee,1,0,"app-waiting",12),b.Tb(),b.Tb(),b.Tb(),b.Pb(20,"div",14),b.Tb(),b.Tb()),2&e&&(b.Bb(14),b.pc("ngForOf",t.dataSource.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded),b.Bb(3),b.pc("ngForOf",t.dataSourceReview.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded))},directives:[m.a,l.m,l.n,$,A.a,X.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),te),ae=o("LRmM"),ne=o("cp0P"),re=o("Qbrz"),oe=o("M9IT"),ce=o("rEr+"),se=o("Xa2L"),le=o("dts7"),ue=o("TSSN");function de(e,t){if(1&e&&(b.Ub(0,"th",10),b.Rc(1),b.jc(2,"translate"),b.Tb()),2&e){var i=t.$implicit;b.pc("width",i.width)("ngClass",i.class),b.Bb(1),b.Tc(" ",b.kc(2,3,i.header)," ")}}function be(e,t){if(1&e&&(b.Ub(0,"tr"),b.Pc(1,de,3,5,"th",9),b.Tb()),2&e){var i=b.ic();b.Bb(1),b.pc("ngForOf",i.cols)}}function fe(e,t){if(1&e&&(b.Ub(0,"span"),b.Rc(1),b.Tb()),2&e){var i=t.$implicit;b.Bb(1),b.Tc("",i.name+" "," ")}}var he=function(e){return["/app/shop/shop-item",e]};function me(e,t){if(1&e){var i=b.Vb();b.Ub(0,"tr"),b.Ub(1,"td",11),b.Rc(2),b.Tb(),b.Ub(3,"td",11),b.Ub(4,"a",12),b.Rc(5),b.Tb(),b.Tb(),b.Ub(6,"td",11),b.Rc(7),b.Tb(),b.Ub(8,"td",11),b.Pc(9,fe,2,1,"span",13),b.Tb(),b.Ub(10,"td",14),b.Ub(11,"button",15),b.Ub(12,"mat-icon"),b.Rc(13,"more_vert"),b.Tb(),b.Tb(),b.Ub(14,"mat-menu",null,16),b.Ub(16,"button",17),b.ec("click",function(){b.Hc(i);var e=t.$implicit;return b.ic().onBtnDeleteClick(e.id)}),b.Ub(17,"span"),b.Rc(18),b.jc(19,"translate"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()}if(2&e){var a=t.$implicit,n=t.rowIndex,r=b.Dc(15);b.Bb(1),b.pc("title",n+1),b.Bb(1),b.Tc(" ",n+1," "),b.Bb(1),b.pc("title",a.name),b.Bb(1),b.pc("routerLink",b.uc(17,he,a.id)),b.Bb(1),b.Tc(" ",a.name,""),b.Bb(1),b.pc("title",a.address),b.Bb(1),b.Wc(" ",a.address,", ",a.street,", ",a.district,", ",a.city," "),b.Bb(1),b.pc("title","Categories"),b.Bb(1),b.pc("ngForOf",a.shopCategory),b.Bb(2),b.pc("matMenuTriggerFor",r),b.Bb(5),b.qc("title","X\xf3a"),b.Bb(2),b.Sc(b.kc(19,15,"COMMON.BUTTON.DELETE"))}}function pe(e,t){1&e&&b.Pb(0,"mat-spinner")}function ge(e,t){1&e&&(b.Ub(0,"div",20),b.Rc(1),b.jc(2,"translate"),b.Tb()),2&e&&(b.Bb(1),b.Sc(b.kc(2,1,"COMMON.ERROR.NO_DATA_TO_DISPLAY")))}function ve(e,t){1&e&&(b.Ub(0,"p-messages",18),b.Pc(1,ge,3,3,"ng-template",19),b.Tb())}var we,Se=function(){return[12,24,36]},Te=((we=function(){function e(t,a,n,r,o){i(this,e),this.userShopService=t,this.authService=a,this.cd=n,this.router=r,this.noti=o,this.subscriptions=[],this.userShopRequest=new ae.a,this.dataSource={},this.cols=[{width:"50px",header:"USER.SAVED.NO"},{width:"100px",header:"USER.SAVED.NAME"},{width:"300px",header:"USER.SAVED.ADDRESS"},{width:"200px",header:"USER.SAVED.CATEGORY"},{width:"70px",header:"",maxWidth:"50px",class:"action"}]}return t(e,[{key:"ngOnInit",value:function(){this.initData()}},{key:"onPageChange",value:function(e){this.userShopRequest.pageIndex=e.pageIndex,this.userShopRequest.pageSize=e.pageSize,this.initData()}},{key:"initData",value:function(){var e=this,t=[this.userShopService.select(this.userShopRequest),this.userShopService.count(this.userShopRequest)],i=Object(ne.a)(t).subscribe(function(t){e.userName=e.authService.getUser(),e.dataSource.items=t[0],e.dataSource.paginatorTotal=t[1],e.cd&&!e.cd.destroyed&&e.cd.detectChanges()});this.cd.detectChanges(),this.subscriptions.push(i),this.cd.detectChanges()}},{key:"viewShop",value:function(e){this.router.navigate(["apps/shop/shop-item/".concat(e)])}},{key:"onBtnDeleteClick",value:function(e){var t=this;this.userShopRequest.shopId=e,this.userShopService.deleteShopFromUser(this.userShopRequest).subscribe(function(e){t.noti.showSuccess(),t.userShopRequest=new ae.a,t.initData(),t.cd.detectChanges()})}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}()).\u0275fac=function(e){return new(e||we)(b.Ob(re.a),b.Ob(S.a),b.Ob(b.h),b.Ob(w.b),b.Ob(v.a))},we.\u0275cmp=b.Ib({type:we,selectors:[["app-shop-saved"]],decls:13,vars:14,consts:[[1,"container-fluid",2,"margin-top","30px"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column","margin-bottom","4rem"],[3,"pageSize","pageSizeOptions","length","showFirstLastButtons","page"],[1,"mat-table__wrapper"],["tableStyleClass","table-no-wrap",3,"value","autoLayout"],["pTemplate","header"],["pTemplate","body"],[4,"ngIf"],["severity","info",4,"ngIf"],["class","table-no-wrap",3,"width","ngClass",4,"ngFor","ngForOf"],[1,"table-no-wrap",3,"width","ngClass"],[3,"title"],["data-toggle","tooltip","data-placement","bottom","title","Go to shop","trigger","hover focus ",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"action"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click"],["severity","info"],["pTemplate",""],[1,"p-ml-2"]],template:function(e,t){1&e&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"h2"),b.Rc(3),b.jc(4,"translate"),b.Tb(),b.Tb(),b.Ub(5,"mat-paginator",2),b.ec("page",function(e){return t.onPageChange(e)}),b.Tb(),b.Ub(6,"div",3),b.Ub(7,"p-table",4),b.Pc(8,be,2,1,"ng-template",5),b.Pc(9,me,20,19,"ng-template",6),b.Tb(),b.Pc(10,pe,1,0,"mat-spinner",7),b.jc(11,"async"),b.Pc(12,ve,2,0,"p-messages",8),b.Tb(),b.Tb()),2&e&&(b.Bb(3),b.Tc(" ",b.kc(4,9,"USER.SAVED.HEADER"),""),b.Bb(2),b.pc("pageSize",12)("pageSizeOptions",b.tc(13,Se))("length",t.dataSource.paginatorTotal)("showFirstLastButtons",!0),b.Bb(2),b.pc("value",t.dataSource.items)("autoLayout",!0),b.Bb(3),b.pc("ngIf",b.kc(11,11,t.userShopService.isLoading$)),b.Bb(2),b.pc("ngIf",!t.dataSource.items||0==t.dataSource.items.length))},directives:[oe.a,ce.f,U.k,l.n,l.m,l.l,w.d,B.b,C.a,O.d,j.a,O.a,O.b,se.b,le.a],pipes:[ue.c,l.b],styles:[""]}),we),Ue=o("Lti1"),ke=o("ORZO"),ye=o("tk/3"),Pe=o("q9ft"),Re=o("iadO"),Ae=o("zFJ7"),De=["calendar"],Be=["form"];function Ce(e,t){1&e&&b.Pb(0,"app-waiting")}function Oe(e,t){if(1&e&&b.Pb(0,"img",36),2&e){var i=b.ic();b.pc("src",i.imageUrl,b.Jc)}}function je(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",18),b.ec("click",function(){return b.Hc(i),b.ic().uploadAvatar()}),b.Rc(1),b.jc(2,"translate"),b.Tb()}2&e&&(b.Bb(1),b.Sc(b.kc(2,1,"USER.PAGE.UPDATE_AVATAR")))}function xe(e,t){1&e&&(b.Ub(0,"div",39),b.Rc(1),b.jc(2,"translate"),b.Tb()),2&e&&(b.Bb(1),b.Tc("",b.kc(2,1,"COMMON.ERROR.NO_DATA_TO_DISPLAY")," "))}function Ie(e,t){1&e&&(b.Ub(0,"p-messages",37),b.Pc(1,xe,3,3,"ng-template",38),b.Tb())}function Ee(e,t){if(1&e){var i=b.Vb();b.Ub(0,"div"),b.Ub(1,"app-post",40),b.ec("event",function(){return b.Hc(i),b.ic().initData()}),b.Tb(),b.Tb()}if(2&e){var a=t.$implicit,n=b.ic();b.Bb(1),b.pc("id",a.id)("status",a.status)("feeling",a.feeling)("createdAt",a.createdAt)("content",a.content)("name","Testing user")("avatar",n.postAvatar)("service",n.journalService)("userName",a.name)}}function Me(e,t){1&e&&b.Pb(0,"app-waiting")}function _e(e,t){if(1&e){var i=b.Vb();b.Ub(0,"button",41),b.ec("click",function(){return b.Hc(i),b.ic().onBtnAddJournal()}),b.Rc(1),b.Tb(),b.Ub(2,"button",42),b.ec("click",function(){return b.Hc(i),b.ic().onBtnCancelJournal()}),b.Rc(3),b.Tb()}2&e&&(b.rc("title","","SAVE","(Enter) "),b.Bb(1),b.Tc(" ","Save"," "),b.Bb(1),b.rc("title","","CANCEL","(Esc) "),b.Bb(1),b.Sc("Cancel"))}var Le,Fe=function(){return{width:"70%%"}},qe=((Le=function(e){a(o,e);var n=r(o);function o(e,t,a,r,c,s,d,b){var f;return i(this,o),(f=n.call(this)).cdr=e,f.sanitizer=t,f.http=a,f.journalService=r,f.noti=c,f.authService=s,f.userService=d,f.translate=b,f.input={},f.formDataAdd=new FormData,f.formDataAvatar=new FormData,f.pipe=new l.e("en-US"),f.daysSelected=[],f.formDisplay=!1,f.isLoaded=!1,f.avatarLoaded=!1,f.journalAdd={},f.dataSource={},f.images=[],f.selectedFile=null,f.request=new u,f.stopScroll=!1,f.allItems=!1,f.pageLoaded=!1,f.imageUrl="assets/img/cf_bg1.jpg",f.isSelected=function(e){var t=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);return f.daysSelected.find(function(e){return e==t})?"selected":null},f}return t(o,[{key:"ngOnInit",value:function(){var e=this;this.userName=this.authService.getUser(),this.userService.selectById(this.authService.getUserId()).subscribe(function(t){t.avatarPath&&(e.postAvatar=t.avatarPath,e.imageUrl=e.postAvatar),e.pageLoaded=!0}),this.resetCalendar(),this.initData()}},{key:"initData",value:function(){var e=this;this.request.pageIndex=0,this.request.pageSize=3,this.journalService.select(this.request).subscribe(function(t){e.dataSource.items=t,e.dataSource.items&&e.dataSource.items.length>0&&e.dataSource.items.forEach(function(t){if(0!=t.length){var i=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(function(e){i.push(e)}),t.images=i,t.images&&(t.image=t.images[0])),e.cdr.detectChanges()}else e.allItems=!0}),e.data=e.dataSource.items,e.stopScroll=!1,e.allItems=!1})}},{key:"upload",value:function(e){this.formDataAdd=e}},{key:"loadAvatar",value:function(e){this.formDataAvatar=e,this.avatarLoaded=!0}},{key:"loadAvatarImage",value:function(e){this.imageUrl=e,this.cdr.detectChanges()}},{key:"renewPage",value:function(){this.resetCalendar(),this.initData()}},{key:"reset",value:function(){var e=this;this.formDataAdd=new FormData,this.input={},this.journalStatus=!1,this.journalContent="",this.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0)}},{key:"uploadAvatar",value:function(){var e=this;this.userService.uploadAvatar(this.formDataAvatar).subscribe(function(t){e.noti.showSuccess(),e.avatarLoaded=!1,e.userService.selectById(e.authService.getUserId()).subscribe(function(t){t.avatarPath&&(e.imageUrl=t.avatarPath,e.cdr.detectChanges())})})}},{key:"onScrollDown",value:function(){var e=this;1!=this.stopScroll&&1!=this.allItems?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.select(this.request).subscribe(function(t){0!=t.length?(t.forEach(function(t){var i=new Date(t.createdAt);e.selectNew(i,e.calendar),e.isSelected(i)}),t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoaded=!0,e.dataSource.items=e.dataSource.items=e.dataSource.items?e.dataSource.items.concat(t):t,e.data=e.dataSource.items):e.allItems=!0})):this.isLoaded=!0}},{key:"resetCalendar",value:function(){var e=this;this.journalService.getAllById().subscribe(function(t){t.forEach(function(t){var i=new Date(t.createdAt);e.selectNew(i,e.calendar),e.isSelected(i)}),e.cdr.detectChanges()})}},{key:"update",value:function(e){this.dates=this.dateJournal}},{key:"selectNew",value:function(e,t){var i=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);this.daysSelected.findIndex(function(e){return e==i})<0&&this.daysSelected.push(i),t.updateTodaysDate()}},{key:"format",value:function(e){return e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)}},{key:"select",value:function(e,t){var i=this,a=this.format(e);this.daysSelected.findIndex(function(e){return e==a}),this.data=this.dataSource.items.filter(function(e){return i.format(new Date(e.createdAt))==a}),this.stopScroll=!0,this.cdr.detectChanges(),t.updateTodaysDate()}},{key:"handleFileInput",value:function(e){var t=this;if(e.target.files){var i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=function(e){t.imageUrl=e.target.result}}}},{key:"onFileSelected",value:function(e){this.selectedFile=e.target.files[0]}},{key:"editJournal",value:function(e){var t=this;this.input={},this.input.content="",e&&(this.input.name=e.name,this.input.id=e.id,this.input.code=e.code),setTimeout(function(){t.form.form.markAsPristine()},0),this.formDisplay=!0}},{key:"onBtnSaveJournal",value:function(){var e=this;this.journalAdd.content=this.journalContent,1==this.journalStatus&&(this.journalAdd.status=1),0==this.journalStatus&&(this.journalAdd.status=0),this.journalAdd.created=new Date,this.journalService.insert(this.journalAdd).subscribe(function(t){e.journalService.uploadJournalImages(t.id,e.formDataAdd).subscribe(function(t){e.noti.showSuccess(),e.journalContent="",e.journalStatus=!1,e.cdr.detectChanges(),e.initData(),e.resetCalendar()})})}},{key:"onBtnAddJournal",value:function(){var e=this;if(this.form){if(!this.validateForm(this.form,"journal-edit"))return;if(this.form.form.dirty){var t=new ke.a;t.accept=function(){1==e.journalStatus&&(e.input.status=1),0==e.journalStatus&&(e.input.status=0),e.journalService.insert(e.input).subscribe(function(t){e.journalService.uploadJournalImages(t.id,e.formDataAdd).subscribe(function(t){e.noti.showSuccess(),e.journalContent="",e.journalStatus=!1,e.input={},e.formDisplay=!1,setTimeout(function(){e.form.form.markAsPristine()},0),e.initData(),e.resetCalendar(),e.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.input={},setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges()}this.cdr.detectChanges()}},{key:"onBtnCancelJournal",value:function(){var e=this;if(this.form.form.dirty){var t=new p.a;t.accept=function(){e.formDisplay=!1,e.journalContent="",e.journalStatus=!1,e.formDataAdd=new FormData,e.input={},setTimeout(function(){e.form.form.markAsPristine()},0),e.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,this.formDataAdd=new FormData,setTimeout(function(){e.form.form.markAsPristine()},0),this.cdr.detectChanges()}}]),o}(Ue.a)).\u0275fac=function(e){return new(e||Le)(b.Ob(b.h),b.Ob(g.b),b.Ob(ye.b),b.Ob(f.a),b.Ob(v.a),b.Ob(S.a),b.Ob(Pe.a),b.Ob(ue.d))},Le.\u0275cmp=b.Ib({type:Le,selectors:[["app-user"]],viewQuery:function(e,t){var i;1&e&&(b.Xc(De,1),b.Xc(Be,3)),2&e&&(b.Cc(i=b.fc())&&(t.calendar=i.first),b.Cc(i=b.fc())&&(t.form=i.first))},features:[b.yb],decls:83,vars:59,consts:[[1,"container-fluid",2,"margin-top","30px","width","100%"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[4,"ngIf"],["style","width: 250px; height:250px; object-fit: cover; border-radius: 50%;",3,"src",4,"ngIf"],[2,"flex-direction","row"],[3,"onReadImage","onFileLoad"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"col-md-4"],[1,"sticky-top",2,"top","4rem"],["id","all",1,"btn","float-right",2,"background-color","deeppink","color","white",3,"click"],[3,"click"],[3,"dateClass","selectedChange"],["calendar",""],[1,"col-md-8"],[2,"margin","0.5rem"],[1,"btn","btn-primary",3,"click"],["severity","info",4,"ngIf"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange","onHide"],[1,"fal","fa-user-edit"],["autocomplete","off","id","journal-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text ","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show ","offLabel","hide ","offIcon","pi pi-times ","onIcon","pi pi-check ","iconPos","right ","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","content",3,"form"],["rows","5 ","cols","30","pInputTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],["severity","info"],["pTemplate",""],[1,"p-ml-2"],[3,"id","status","feeling","createdAt","content","name","avatar","service","userName","event"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(e,t){if(1&e){var i=b.Vb();b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"h2"),b.Rc(3),b.jc(4,"translate"),b.Tb(),b.Pc(5,Ce,1,0,"app-waiting",2),b.Pc(6,Oe,1,1,"img",3),b.Ub(7,"div",4),b.Ub(8,"app-upload",5),b.ec("onReadImage",function(e){return t.loadAvatarImage(e)})("onFileLoad",function(e){return t.loadAvatar(e)}),b.Tb(),b.Tb(),b.Pc(9,je,3,3,"button",6),b.Tb(),b.Ub(10,"div",7),b.Pb(11,"div",8),b.Ub(12,"div",9),b.Ub(13,"div",7),b.Ub(14,"div",10),b.Ub(15,"div",11),b.Ub(16,"mat-card"),b.Ub(17,"mat-card-title"),b.Rc(18),b.jc(19,"translate"),b.Ub(20,"button",12),b.ec("click",function(){return t.initData()}),b.Rc(21),b.jc(22,"translate"),b.Tb(),b.Tb(),b.Ub(23,"mat-card-subtitle"),b.Rc(24),b.jc(25,"translate"),b.Tb(),b.Ub(26,"div",13),b.ec("click",function(e){return e.stopPropagation()}),b.Ub(27,"mat-calendar",14,15),b.ec("selectedChange",function(e){b.Hc(i);var a=b.Dc(28);return t.select(e,a)}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(29,"div",16),b.Ub(30,"div",17),b.Ub(31,"h2"),b.Rc(32),b.jc(33,"translate"),b.Tb(),b.Ub(34,"button",18),b.ec("click",function(){return t.editJournal()}),b.Rc(35),b.jc(36,"translate"),b.Tb(),b.Tb(),b.Pc(37,Ie,2,0,"p-messages",19),b.Ub(38,"div",20),b.ec("scrolled",function(){return t.onScrollDown()}),b.Pc(39,Ee,2,9,"div",21),b.Tb(),b.Pc(40,Me,1,0,"app-waiting",2),b.Tb(),b.Tb(),b.Pb(41,"div",8),b.Tb(),b.Tb(),b.Tb(),b.Ub(42,"p-dialog",22),b.ec("visibleChange",function(e){return t.formDisplay=e})("onHide",function(){return t.reset()}),b.Ub(43,"p-header"),b.Pb(44,"i",23),b.Rc(45),b.jc(46,"translate"),b.Tb(),b.Ub(47,"form",24,25),b.Ub(49,"div",26),b.Ub(50,"div",27),b.Ub(51,"div",28),b.Ub(52,"label"),b.Rc(53),b.jc(54,"translate"),b.Tb(),b.Ub(55,"input",29),b.ec("ngModelChange",function(e){return t.input.feeling=e}),b.Tb(),b.Tb(),b.Ub(56,"div",28),b.Ub(57,"div",30),b.Ub(58,"label"),b.Rc(59),b.jc(60,"translate"),b.Tb(),b.Ub(61,"div"),b.Ub(62,"p-toggleButton",31),b.ec("ngModelChange",function(e){return t.journalStatus=e}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(63,"div",27),b.Ub(64,"div",28),b.Ub(65,"div",30),b.Ub(66,"label"),b.Rc(67),b.jc(68,"translate"),b.Tb(),b.Pb(69,"validate-form",32),b.Ub(70,"textarea",33),b.ec("ngModelChange",function(e){return t.input.content=e}),b.jc(71,"translate"),b.Tb(),b.Tb(),b.Tb(),b.Ub(72,"div",28),b.Ub(73,"div",30),b.Ub(74,"label"),b.Rc(75),b.jc(76,"translate"),b.Tb(),b.Ub(77,"app-upload",34),b.ec("onFileLoad",function(e){return t.upload(e)}),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(78,"br"),b.Pb(79,"br"),b.Pb(80,"br"),b.Pb(81,"br"),b.Pc(82,_e,4,4,"ng-template",35),b.Tb()}if(2&e){var a=b.Dc(48);b.Bb(3),b.Uc("",b.kc(4,34,"USER.PAGE.HEADER")," ",t.userName,""),b.Bb(2),b.pc("ngIf",0==t.pageLoaded),b.Bb(1),b.pc("ngIf",1==t.pageLoaded),b.Bb(3),b.pc("ngIf",1==t.avatarLoaded),b.Bb(9),b.Tc(" ",b.kc(19,36,"USER.PAGE.MY_COFFEE_JOURNEY")," "),b.Bb(3),b.Sc(b.kc(22,38,"USER.PAGE.ALL")),b.Bb(3),b.Sc(b.kc(25,40,"USER.PAGE.HIGHLIGHTED")),b.Bb(3),b.pc("dateClass",t.isSelected),b.Bb(5),b.Sc(b.kc(33,42,"USER.PAGE.SHARE_NOW")),b.Bb(3),b.Sc(b.kc(36,44,"USER.PAGE.ADD_JOURNAL")),b.Bb(2),b.pc("ngIf",!t.data||0==t.data.length),b.Bb(2),b.pc("ngForOf",t.data),b.Bb(1),b.pc("ngIf",0==t.isLoaded),b.Bb(2),b.Lc(b.tc(58,Fe)),b.pc("visible",t.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),b.Bb(3),b.Tc(" ",b.kc(46,46,"ADD_JOURNAL")," "),b.Bb(8),b.Sc(b.kc(54,48,"HOW_ARE_YOU_FEELING_TODAY")),b.Bb(2),b.rc("placeholder","","Tell people how you feel"," "),b.pc("ngModel",t.input.feeling),b.Bb(4),b.Sc(b.kc(60,50,"PUBLIC_PRIVATE")),b.Bb(3),b.pc("ngModel",t.journalStatus),b.Bb(5),b.Sc(b.kc(68,52,"WHAT_DO_YOU_WANT_TO_SHARE")),b.Bb(2),b.pc("form",a),b.Bb(1),b.rc("placeholder","",b.kc(71,54,"YOUR_JOURNAL_GOES_HERE")," "),b.pc("ngModel",t.input.content),b.Bb(5),b.Sc(b.kc(76,56,"ANY_PHOTO")),b.Bb(2),b.pc("preview",!0)}},directives:[l.n,R.a,D.a,D.h,D.g,Re.a,m.a,l.m,T.a,U.h,k.w,k.n,k.o,k.c,k.m,k.p,y.a,P.a,Ae.a,k.t,U.k,A.a,le.a,$],pipes:[ue.c],styles:[".first{height:50vh;min-height:200px;background-size:cover;background-image:linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef),linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef);background-position:50%}#all:hover{opacity:.5}.mat-calendar-body-cell-content{color:inherit}.mat-calendar-body-cell.selected{background-color:#ff1493!important;color:#fff;border-radius:50%}.drop-calendar{width:100%}.p-datepicker table td.p-datepicker-today>span{background:var(--hue-color-2);color:#495057;border-color:transparent}.p-datepicker table td>span{width:2.5rem;height:2.5rem;border-radius:50%;transition:box-shadow .2s;border:1px solid transparent}.p-datepicker table td.p-datepicker-today>span.p-highlight{color:#495057;background:red}.p-datepicker table td>span.p-highlight{color:#f5f5f5;background:#ff1493}"],encapsulation:2}),Le),Ne=o("+ojY");function ze(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-post",17),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("feeling",i.feeling)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.journalService)("userName",i.name)}}function Je(e,t){1&e&&b.Pb(0,"app-waiting")}function He(e,t){if(1&e&&(b.Ub(0,"div"),b.Pb(1,"app-review",18),b.Tb()),2&e){var i=t.$implicit,a=b.ic();b.Bb(1),b.pc("id",i.id)("status",i.status)("rating",i.rating)("createdAt",i.createdAt)("content",i.content)("name","Testing user")("service",a.reviewService)("userName",i.userName)}}function Ve(e,t){1&e&&b.Pb(0,"app-waiting")}var Ye,Ge,We,$e=[{path:"",component:qe,canActivate:[Ne.a]},{path:"saved-shops",component:Te,canActivate:[Ne.a]},{path:"forum",component:ie},{path:"user-view/:id",component:(Ye=function(){function e(t,a,n,r,o,c){i(this,e),this.cdr=t,this.journalService=a,this.reviewService=n,this.noti=r,this.route=o,this.userService=c,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.isLoadedReview=!1,this.request=new u,this.reviewRequest=new d.a,this.imageUrl="assets/img/cf_bg1.jpg"}return t(e,[{key:"ngOnInit",value:function(){var e=this;this.sub=this.route.params.subscribe(function(t){e.id=t.id,e.userService.viewUserById(e.id).subscribe(function(t){e.imageUrl=t.avatarPath?t.avatarPath:"assets/img/cf_bg1.jpg",e.userName=t.userName,e.request.createdBy=e.id,e.reviewRequest.createdBy=e.id,e.request.status=1,e.reviewRequest.status=1,e.initJournal(),e.initReview()})})}},{key:"initReview",value:function(){var e=this;this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){e.dataSourceReview.items=t,e.dataSourceReview.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"initJournal",value:function(){var e=this;this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(function(t){e.dataSource.items=t,e.dataSource.items.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}},{key:"onScrollDownReview",value:function(){var e=this;1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoadedReview=!0,e.dataSourceReview.items=e.dataSourceReview.items?e.dataSourceReview.items.concat(t):t):e.stopScrollingReview=!0})):this.isLoadedReview=!0}},{key:"onScrollDown",value:function(){var e=this;1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(function(t){t&&t!=[]&&0!=t.length?(t.forEach(function(e){var t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(function(e){t.push(e)}),e.images=t)}),e.isLoaded=!0,e.dataSource.items=e.dataSource.items?e.dataSource.items.concat(t):t):e.stopScrolling=!0})):this.isLoaded=!0}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}}]),e}(),Ye.\u0275fac=function(e){return new(e||Ye)(b.Ob(b.h),b.Ob(f.a),b.Ob(h.a),b.Ob(v.a),b.Ob(w.a),b.Ob(Pe.a))},Ye.\u0275cmp=b.Ib({type:Ye,selectors:[["app-user-view"]],decls:25,vars:6,consts:[[1,"container-fluid"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(e,t){1&e&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"h2"),b.Rc(3),b.Tb(),b.Pb(4,"img",2),b.Tb(),b.Ub(5,"div",3),b.Ub(6,"div",4),b.Ub(7,"ul",5),b.Ub(8,"li",6),b.Ub(9,"a",7),b.Rc(10,"Details"),b.Tb(),b.Tb(),b.Ub(11,"li",6),b.Ub(12,"a",8),b.Rc(13,"Reviews"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(14,"div",9),b.Ub(15,"div",10),b.Ub(16,"div",11),b.Ub(17,"div",12),b.ec("scrolled",function(){return t.onScrollDown()}),b.Pc(18,ze,2,8,"div",13),b.Tb(),b.Pc(19,Je,1,0,"app-waiting",14),b.Tb(),b.Ub(20,"div",15),b.Ub(21,"div",12),b.ec("scrolled",function(){return t.onScrollDownReview()}),b.Pc(22,He,2,8,"div",13),b.Tb(),b.Pc(23,Ve,1,0,"app-waiting",14),b.Tb(),b.Tb(),b.Tb(),b.Pb(24,"div",16),b.Tb(),b.Tb()),2&e&&(b.Bb(3),b.Tc("Viewing ",t.userName,""),b.Bb(1),b.pc("src",t.imageUrl,b.Jc),b.Bb(14),b.pc("ngForOf",t.dataSource.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded),b.Bb(3),b.pc("ngForOf",t.dataSourceReview.items),b.Bb(1),b.pc("ngIf",0==t.isLoaded))},directives:[m.a,l.m,l.n,$,A.a,X.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),Ye)}],Xe=((Ge=function e(){i(this,e)}).\u0275mod=b.Mb({type:Ge}),Ge.\u0275inj=b.Lb({factory:function(e){return new(e||Ge)},imports:[[w.e.forChild($e)],w.e]}),Ge),Ze=o("1kSV"),Ke=o("FKr1"),Qe=o("eO1q"),et=o("0IaG"),tt=o("qFsG"),it=o("d3UM"),at=o("Nf9I"),nt=o("7kUa"),rt=o("xlun"),ot=o("aMj0"),ct=((We=function e(){i(this,e)}).\u0275mod=b.Mb({type:We}),We.\u0275inj=b.Lb({factory:function(e){return new(e||We)},imports:[[l.c,Xe,ot.a,ye.c,c.a,k.i,k.s,Ze.b,T.b,Ae.b,y.b,j.b,O.c,Re.b,Ke.g,D.f,Qe.b,m.b,s.a,ce.g,le.b,B.c,ue.b.forChild(),it.b,tt.c,oe.b,se.a,C.b,et.b,Ze.a,Ze.f,at.b,nt.b,rt.b]]}),We)}}])}();