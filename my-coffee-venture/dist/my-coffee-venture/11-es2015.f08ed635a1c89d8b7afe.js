(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{n60B:function(e,t,i){"use strict";i.r(t),i.d(t,"UserModule",function(){return Ze});var a=i("YdpT"),s=i("WGHq"),n=i("ofXK"),r=i("ON/h");class o extends r.a{}var c=i("fliq"),l=i("fXoL"),d=i("vYlj"),b=i("+75q"),h=i("dlKe"),u=i("avVo"),m=i("jhN1"),g=i("CQAr"),p=i("tyNb"),f=i("UPkN"),v=i("/RsI"),w=i("7zfz"),S=i("3Pt+"),T=i("Y+ZO"),U=i("dm/z"),k=i("ceAI"),P=i("gixc"),R=i("Wp6s"),A=i("bTqV"),D=i("Qu3c"),B=i("STbY"),C=i("NFeN");const y=["form"];function j(e,t){1&e&&l.Pb(0,"app-waiting")}function O(e,t){1&e&&(l.Ub(0,"span"),l.Rc(1,"Public"),l.Tb())}function x(e,t){1&e&&(l.Ub(0,"span"),l.Rc(1,"Private"),l.Tb())}function I(e,t){if(1&e&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&e){const e=l.ic(2);l.Bb(1),l.Tc("-- ",e.item.feeling,"")}}function M(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",34),l.ec("click",function(){l.Hc(e);const t=l.ic(2);return t.onBtnDeleteClick(t.item.id)}),l.Ub(1,"span"),l.Rc(2),l.Tb(),l.Tb()}2&e&&(l.qc("title","Delete"),l.Bb(2),l.Sc("Delete"))}function E(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",34),l.ec("click",function(){return l.Hc(e),l.ic(2).editJournal()}),l.Ub(1,"span"),l.Rc(2),l.Tb(),l.Tb()}2&e&&(l.qc("title","Edit"),l.Bb(2),l.Sc("Edit"))}function L(e,t){if(1&e&&l.Pb(0,"img",35),2&e){const e=l.ic(2);l.pc("src",e.item.image,l.Jc)}}function _(e,t){if(1&e&&(l.Ub(0,"div",36),l.Pb(1,"i",37),l.Rc(2),l.Tb()),2&e){const e=l.ic(2);l.Bb(2),l.Tc(" Liked by ",e.likes," people ")}}function F(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",40),l.ec("click",function(){return l.Hc(e),l.ic(3).onBtnLikeClick()}),l.Rc(1,"LIKE"),l.Tb()}}function q(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",41),l.ec("click",function(){return l.Hc(e),l.ic(3).onBtnUnLikeClick()}),l.Rc(1,"LIKED"),l.Tb()}}function N(e,t){if(1&e&&(l.Ub(0,"div"),l.Pc(1,F,2,0,"button",38),l.Pc(2,q,2,0,"button",39),l.Tb()),2&e){const e=l.ic(2);l.Bb(1),l.pc("ngIf",!e.liked),l.Bb(1),l.pc("ngIf",e.liked)}}function z(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-card",16),l.Ub(1,"mat-card-header",17),l.Ub(2,"div",18),l.Ub(3,"div",19),l.Pb(4,"img",20),l.Tb(),l.Ub(5,"div",21),l.Ub(6,"mat-card-title",22),l.Ub(7,"a",23),l.ec("click",function(){l.Hc(e);const t=l.ic();return t.goToUser(t.item.createdBy)}),l.Rc(8),l.Tb(),l.Tb(),l.Ub(9,"mat-card-subtitle",24),l.Pc(10,O,2,0,"span",1),l.Pc(11,x,2,0,"span",1),l.Pc(12,I,2,1,"span",1),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"div",25),l.Ub(14,"div",26),l.Ub(15,"small",27),l.Rc(16),l.Tb(),l.Pb(17,"i",28),l.Tb(),l.Ub(18,"button",29),l.Ub(19,"mat-icon"),l.Rc(20,"more_vert"),l.Tb(),l.Tb(),l.Ub(21,"mat-menu",null,30),l.Pc(23,M,3,2,"button",31),l.Pc(24,E,3,2,"button",31),l.Tb(),l.Tb(),l.Tb(),l.Ub(25,"mat-card-content"),l.Ub(26,"p"),l.Rc(27),l.Ub(28,"i"),l.Rc(29),l.jc(30,"date"),l.Tb(),l.Tb(),l.Pc(31,L,1,1,"img",32),l.Tb(),l.Ub(32,"mat-card-actions"),l.Pc(33,_,3,1,"div",33),l.Pc(34,N,3,2,"div",1),l.Tb(),l.Tb()}if(2&e){const e=l.Dc(22),t=l.ic();l.Bb(4),l.pc("src",t.avatar,l.Jc),l.Bb(4),l.Sc(t.item.userName),l.Bb(2),l.pc("ngIf",0!=t.item.status),l.Bb(1),l.pc("ngIf",0==t.item.status),l.Bb(1),l.pc("ngIf",t.item.feeling),l.Bb(4),l.Sc(t.calculateTime(t.item.createdAt)),l.Bb(2),l.pc("matMenuTriggerFor",e),l.Bb(5),l.pc("ngIf",t.authService.getUserId()==t.item.createdBy),l.Bb(1),l.pc("ngIf",t.authService.getUserId()==t.item.createdBy),l.Bb(3),l.Tc(" ",t.item.content+" "," "),l.Bb(2),l.Tc("Created at ",l.kc(30,14,t.item.createdAt),""),l.Bb(2),l.pc("ngIf",t.item.image),l.Bb(2),l.pc("ngIf",t.likes>0),l.Bb(1),l.pc("ngIf",t.authService.isAuthenticated())}}function J(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",42),l.ec("click",function(){return l.Hc(e),l.ic().onBtnAddJournal()}),l.Rc(1),l.Tb(),l.Ub(2,"button",43),l.ec("click",function(){return l.Hc(e),l.ic().onBtnCancelJournal()}),l.Rc(3),l.Tb()}2&e&&(l.rc("title","","SAVE","(Enter) "),l.Bb(1),l.Tc(" ","Save"," "),l.Bb(1),l.rc("title","","CANCEL","(Esc) "),l.Bb(1),l.Sc("Cancel"))}const H=function(){return{width:"70%%"}};let V=(()=>{class e{constructor(e,t,i,a,s,n){this.sanitizer=e,this.noti=t,this.router=i,this.cdr=a,this.authService=s,this.journalService=n,this.formDataAdd=new FormData,this.avatar="assets/img/cf_bg1.jpg",this.liked=!1,this.formDisplay=!1,this.loaded=!1,this.journalAdd={},this.dataSource={},this.likedUsers=[],this.likes=0,this.event=new l.n,this.item={}}ngOnInit(){this.loaded=!1,this.service.selectById(this.id).subscribe(e=>{this.item=e,this.likes=e.likes,this.likedUsers=e.likedUsers,this.likedUsers.findIndex(e=>e==this.authService.getUserId())>-1&&(this.liked=!0);let t=[];this.item.imageDirectories&&this.item.imageDirectories.length>0&&this.item.imageDirectories.forEach(e=>{t.push(e)}),this.avatar="assets/img/cf_bg1.jpg",this.item&&this.item.avatarPath&&(this.avatar=this.item.avatarPath),this.item.images=t,this.item.images&&(this.item.image=this.item.images[0]),this.loaded=!0}),this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id}onBtnUnLikeClick(){this.item.id&&this.journalService.like(this.item).subscribe(e=>{this.liked=!1,this.likedUsers=e.likedUsers,this.likes--,this.cdr.detectChanges()})}onBtnLikeClick(){this.item.id&&this.journalService.like(this.item).subscribe(e=>{this.liked=!0,this.likedUsers=e.likedUsers,this.likes++,this.cdr.detectChanges()})}goToUser(e){e==this.authService.getUserId()?this.router.navigate(["/app/user"]):this.router.navigate(["/app/user/user-view",e])}onBtnDeleteClick(e){this.service.delete(e).subscribe(e=>{this.noti.showSuccess(),this.event.emit(!0)})}calculateTime(e){let t=new Date(e),i=new Date;var a=t.getSeconds(),s=i.getSeconds(),n=t.getHours(),r=i.getHours(),o=t.getMonth(),c=i.getMonth(),l=t.getDate(),d=i.getDate(),b=t.getUTCFullYear(),h=i.getUTCFullYear(),u=t.getMinutes(),m=i.getMinutes();return h-b>1?h-b+" yrs ago":h-b>0?h-b+" yr ago":c-o>1?c-o+" months ago":c-o>0?c-o+" month ago":d-l>1?d-l+" days ago":d-l>0?d-l+" day ago":r-n>1?r-n+" hours ago":r-n>0?r-n+" hour ago":m-u>1?m-u+" minutes ago":m-u>0?m-u+" minute ago":s-a>1?s-a+" secs ago":s-a>0?s-a+" sec ago":void 0}editJournal(){this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id,setTimeout(()=>{this.form.form.markAsPristine()},0),this.formDisplay=!0}onBtnAddJournal(){if(this.form.form.dirty){const e=new u.c;e.accept=()=>{1==this.journalStatus&&(this.itemAdd.status=1),0==this.journalStatus&&(this.itemAdd.status=0),this.journalService.merge(this.itemAdd).subscribe(e=>{this.journalService.uploadJournalImages(e.id,this.formDataAdd).subscribe(e=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.itemAdd={},this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()})})},this.noti.confirm(e)}else this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.cdr.detectChanges()}onBtnCancelJournal(){if(this.form.form.dirty){const e=new u.a;e.accept=()=>{this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()},this.noti.confirm(e)}else this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.formDataAdd=new FormData}upload(e){this.formDataAdd=e}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(m.b),l.Ob(g.a),l.Ob(p.b),l.Ob(l.h),l.Ob(f.a),l.Ob(d.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-post"]],viewQuery:function(e,t){if(1&e&&l.Xc(y,3),2&e){let e;l.Cc(e=l.fc())&&(t.form=e.first)}},inputs:{id:"id",createdAt:"createdAt",name:"name",imageSource:"imageSource",content:"content",feeling:"feeling",status:"status",avatar:"avatar",service:"service",userName:"userName"},outputs:{event:"event"},decls:38,vars:23,consts:[[2,"margin","0.5rem"],[4,"ngIf"],["class","container-fluid ",4,"ngIf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange"],[1,"fal","fa-user-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show","offLabel","hide","offIcon","pi pi-times","onIcon","pi pi-check","iconPos","right","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","name ",3,"form"],["rows","5 ","cols","30","pitemTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[1,"container-fluid"],[1,"justify-content-between",2,"text-align","center"],[2,"display","flex","width","200px","word-wrap","break-word","flex-direction","row"],["mat-card-avatar","",1,"example-header-image",2,"margin-bottom","16px"],[2,"height","40px","width","40px","border-radius","50%","flex-shrink","0","object-fit","cover",3,"src"],[2,"margin-left","10px","text-align","left"],[1,"wrap-text",2,"margin-bottom","0","word-wrap","break-word"],[2,"cursor","pointer",3,"click"],[1,"wrap-text",2,"word-wrap","break-word"],[1,"float-right",2,"display","flex","flex-direction","row"],[1,"d-flex","flex-row","mt-1","ellipsis"],[1,"mr-2"],[1,"fa","fa-ellipsis-h"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click",4,"ngIf"],["alt","Photo of journal",3,"src",4,"ngIf"],["style","font-size: 0.5rem; font-weight: 100; line-height: 0.5; color: deeppink;padding-left: 9px;",4,"ngIf"],["mat-menu-item","",3,"title","click"],["alt","Photo of journal",3,"src"],[2,"font-size","0.5rem","font-weight","100","line-height","0.5","color","deeppink","padding-left","9px"],[1,"pi","pi-thumbs-up",2,"font-size","0.75rem"],["mat-button","",3,"click",4,"ngIf"],["style","color: deeppink;","mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","",2,"color","deeppink",3,"click"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Pc(1,j,1,0,"app-waiting",1),l.Pc(2,z,35,16,"mat-card",2),l.Tb(),l.Ub(3,"p-dialog",3),l.ec("visibleChange",function(e){return t.formDisplay=e}),l.Ub(4,"p-header"),l.Pb(5,"i",4),l.Rc(6),l.Tb(),l.Ub(7,"form",null,5),l.Ub(9,"div",6),l.Ub(10,"div",7),l.Ub(11,"div",8),l.Ub(12,"label"),l.Rc(13),l.Tb(),l.Ub(14,"input",9),l.ec("ngModelChange",function(e){return t.itemAdd.feeling=e}),l.Tb(),l.Tb(),l.Ub(15,"div",8),l.Ub(16,"div",10),l.Ub(17,"label"),l.Rc(18),l.Tb(),l.Ub(19,"div"),l.Ub(20,"p-toggleButton",11),l.ec("ngModelChange",function(e){return t.journalStatus=e}),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"div",7),l.Ub(22,"div",8),l.Ub(23,"div",10),l.Ub(24,"label"),l.Rc(25),l.Tb(),l.Pb(26,"validate-form",12),l.Ub(27,"textarea",13),l.ec("ngModelChange",function(e){return t.itemAdd.content=e}),l.Tb(),l.Tb(),l.Tb(),l.Ub(28,"div",8),l.Ub(29,"div",10),l.Ub(30,"label"),l.Rc(31),l.Tb(),l.Ub(32,"app-upload",14),l.ec("onFileLoad",function(e){return t.upload(e)}),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(33,"br"),l.Pb(34,"br"),l.Pb(35,"br"),l.Pb(36,"br"),l.Pc(37,J,4,4,"ng-template",15),l.Tb()),2&e){const e=l.Dc(8);l.Bb(1),l.pc("ngIf",0==t.loaded),l.Bb(1),l.pc("ngIf",t.loaded),l.Bb(1),l.Lc(l.tc(22,H)),l.pc("visible",t.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),l.Bb(3),l.Tc(" ","Edit journal"," "),l.Bb(7),l.Sc("How are you feeling today?"),l.Bb(1),l.rc("placeholder","","Tell people how you feel"," "),l.pc("ngModel",t.itemAdd.feeling),l.Bb(4),l.Sc("Public/private"),l.Bb(2),l.pc("ngModel",t.journalStatus),l.Bb(5),l.Sc("What do you want to share?"),l.Bb(1),l.pc("form",e),l.Bb(1),l.rc("placeholder","","Your journal goes here"," "),l.pc("ngModel",t.itemAdd.content),l.Bb(4),l.Sc("We have not developed retrieving images, please reupload"),l.Bb(1),l.pc("preview",!0)}},directives:[n.n,v.a,w.h,S.w,S.n,S.o,S.c,S.m,S.p,T.a,U.a,S.t,k.a,w.k,P.a,R.a,R.e,R.c,R.h,R.g,A.b,D.a,B.d,C.a,B.a,R.d,R.b,B.b],pipes:[n.e],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-size:cover}img[_ngcontent-%COMP%]{display:block;width:100%;height:400px;-o-object-fit:cover;object-fit:cover}.card[_ngcontent-%COMP%]{margin:.5rem}[_nghost-%COMP%] .mat-card-header-text{display:none}.img-shop[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:9rem}.card[_ngcontent-%COMP%]{border:none}.ellipsis[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#a09c9c}hr[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:8px}.muted-color[_ngcontent-%COMP%]{color:#a09c9c;font-size:13px}.ellipsis[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:3px;cursor:pointer}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}@media (min-width:0px) and (max-width:800px){.wrap-text[_ngcontent-%COMP%]{width:130px}}@media (min-width:1200px){.wrap-text[_ngcontent-%COMP%]{width:450px}}.icons[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red}.icons[_ngcontent-%COMP%]   .fa-smile-o[_ngcontent-%COMP%]{color:#ff0;font-size:29px}.img-profile[_ngcontent-%COMP%]{display:block;height:300px;width:100%;-o-object-fit:cover;object-fit:cover}.rounded-image[_ngcontent-%COMP%]{border-radius:50%!important;display:flex;justify-content:center;align-items:center;height:50px;width:50px}.name[_ngcontent-%COMP%]{font-weight:600}.comment-text[_ngcontent-%COMP%]{font-size:12px}.status[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:10px;color:#00f}.form-control[_ngcontent-%COMP%]{border-radius:26px}.comment-input[_ngcontent-%COMP%]{position:relative}.fonts[_ngcontent-%COMP%]{position:absolute;right:13px;top:8px;color:#a09c9c}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#8bbafe;outline:0;box-shadow:none}@media (min-width:1200px){img[_ngcontent-%COMP%]{display:block;width:100%;height:800px;-o-object-fit:cover;object-fit:cover}}@media (min-width:800px) and (max-width:1200px){img[_ngcontent-%COMP%]{display:block;width:100%;height:600px;-o-object-fit:cover;object-fit:cover}}"]}),e})();var Y=i("E9gd");function G(e,t){if(1&e&&(l.Ub(0,"div"),l.Pb(1,"app-post",15),l.Tb()),2&e){const e=t.$implicit,i=l.ic();l.Bb(1),l.pc("id",e.id)("status",e.status)("feeling",e.feeling)("createdAt",e.createdAt)("content",e.content)("name","Testing user")("service",i.journalService)("userName",e.name)}}function $(e,t){1&e&&l.Pb(0,"app-waiting")}function W(e,t){if(1&e&&(l.Ub(0,"div"),l.Pb(1,"app-review",16),l.Tb()),2&e){const e=t.$implicit,i=l.ic();l.Bb(1),l.pc("id",e.id)("status",e.status)("rating",e.rating)("createdAt",e.createdAt)("content",e.content)("name","Testing user")("service",i.reviewService)("userName",e.userName)}}function X(e,t){1&e&&l.Pb(0,"app-waiting")}let Z=(()=>{class e{constructor(e,t){this.journalService=e,this.reviewService=t,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.selectedFile=null,this.isLoadedReview=!1,this.request=new o,this.reviewRequest=new c.a,this.imageUrl="assets/img/cf_bg1.jpg"}ngOnInit(){this.initJournal(),this.initReview()}initReview(){this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(e=>{this.dataSourceReview.items=e,this.dataSourceReview.items.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}initJournal(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(e=>{this.dataSource.items=e,this.dataSource.items.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}onScrollDownReview(){1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(e=>{e&&e!=[]&&0!=e.length?(e.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t)}),this.isLoadedReview=!0,this.dataSourceReview.items=this.dataSourceReview.items?this.dataSourceReview.items.concat(e):e):this.stopScrollingReview=!0})):this.isLoadedReview=!0}onScrollDown(){1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(e=>{e&&e!=[]&&0!=e.length?(e.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(e):e):this.stopScrolling=!0})):this.isLoaded=!0}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(d.a),l.Ob(b.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-forum"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"ul",3),l.Ub(4,"li",4),l.Ub(5,"a",5),l.Rc(6,"Details"),l.Tb(),l.Tb(),l.Ub(7,"li",4),l.Ub(8,"a",6),l.Rc(9,"Reviews"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(10,"div",7),l.Ub(11,"div",8),l.Ub(12,"div",9),l.Ub(13,"div",10),l.ec("scrolled",function(){return t.onScrollDown()}),l.Pc(14,G,2,8,"div",11),l.Tb(),l.Pc(15,$,1,0,"app-waiting",12),l.Tb(),l.Ub(16,"div",13),l.Ub(17,"div",10),l.ec("scrolled",function(){return t.onScrollDownReview()}),l.Pc(18,W,2,8,"div",11),l.Tb(),l.Pc(19,X,1,0,"app-waiting",12),l.Tb(),l.Tb(),l.Tb(),l.Pb(20,"div",14),l.Tb(),l.Tb()),2&e&&(l.Bb(14),l.pc("ngForOf",t.dataSource.items),l.Bb(1),l.pc("ngIf",0==t.isLoaded),l.Bb(3),l.pc("ngForOf",t.dataSourceReview.items),l.Bb(1),l.pc("ngIf",0==t.isLoaded))},directives:[h.a,n.m,n.n,V,P.a,Y.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),e})();var K=i("LRmM"),Q=i("cp0P"),ee=i("Qbrz"),te=i("M9IT"),ie=i("rEr+"),ae=i("Xa2L"),se=i("dts7"),ne=i("TSSN");function re(e,t){if(1&e&&(l.Ub(0,"th",10),l.Rc(1),l.jc(2,"translate"),l.Tb()),2&e){const e=t.$implicit;l.pc("width",e.width)("ngClass",e.class),l.Bb(1),l.Tc(" ",l.kc(2,3,e.header)," ")}}function oe(e,t){if(1&e&&(l.Ub(0,"tr"),l.Pc(1,re,3,5,"th",9),l.Tb()),2&e){const e=l.ic();l.Bb(1),l.pc("ngForOf",e.cols)}}function ce(e,t){if(1&e&&(l.Ub(0,"span"),l.Rc(1),l.Tb()),2&e){const e=t.$implicit;l.Bb(1),l.Tc("",e.name+" "," ")}}const le=function(e){return["/app/shop/shop-item",e]};function de(e,t){if(1&e){const e=l.Vb();l.Ub(0,"tr"),l.Ub(1,"td",11),l.Rc(2),l.Tb(),l.Ub(3,"td",11),l.Ub(4,"a",12),l.Rc(5),l.Tb(),l.Tb(),l.Ub(6,"td",11),l.Rc(7),l.Tb(),l.Ub(8,"td",11),l.Pc(9,ce,2,1,"span",13),l.Tb(),l.Ub(10,"td",14),l.Ub(11,"button",15),l.Ub(12,"mat-icon"),l.Rc(13,"more_vert"),l.Tb(),l.Tb(),l.Ub(14,"mat-menu",null,16),l.Ub(16,"button",17),l.ec("click",function(){l.Hc(e);const i=t.$implicit;return l.ic().onBtnDeleteClick(i.id)}),l.Ub(17,"span"),l.Rc(18),l.jc(19,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,i=t.rowIndex,a=l.Dc(15);l.Bb(1),l.pc("title",i+1),l.Bb(1),l.Tc(" ",i+1," "),l.Bb(1),l.pc("title",e.name),l.Bb(1),l.pc("routerLink",l.uc(17,le,e.id)),l.Bb(1),l.Tc(" ",e.name,""),l.Bb(1),l.pc("title",e.address),l.Bb(1),l.Wc(" ",e.address,", ",e.street,", ",e.district,", ",e.city," "),l.Bb(1),l.pc("title","Categories"),l.Bb(1),l.pc("ngForOf",e.shopCategory),l.Bb(2),l.pc("matMenuTriggerFor",a),l.Bb(5),l.qc("title","X\xf3a"),l.Bb(2),l.Sc(l.kc(19,15,"COMMON.BUTTON.DELETE"))}}function be(e,t){1&e&&l.Pb(0,"mat-spinner")}function he(e,t){1&e&&(l.Ub(0,"div",20),l.Rc(1),l.jc(2,"translate"),l.Tb()),2&e&&(l.Bb(1),l.Sc(l.kc(2,1,"COMMON.ERROR.NO_DATA_TO_DISPLAY")))}function ue(e,t){1&e&&(l.Ub(0,"p-messages",18),l.Pc(1,he,3,3,"ng-template",19),l.Tb())}const me=function(){return[12,24,36]};let ge=(()=>{class e{constructor(e,t,i,a,s){this.userShopService=e,this.authService=t,this.cd=i,this.router=a,this.noti=s,this.subscriptions=[],this.userShopRequest=new K.a,this.dataSource={},this.cols=[{width:"50px",header:"USER.SAVED.NO"},{width:"100px",header:"USER.SAVED.NAME"},{width:"300px",header:"USER.SAVED.ADDRESS"},{width:"200px",header:"USER.SAVED.CATEGORY"},{width:"70px",header:"",maxWidth:"50px",class:"action"}]}ngOnInit(){this.initData()}onPageChange(e){this.userShopRequest.pageIndex=e.pageIndex,this.userShopRequest.pageSize=e.pageSize,this.initData()}initData(){const e=[this.userShopService.select(this.userShopRequest),this.userShopService.count(this.userShopRequest)],t=Object(Q.a)(e).subscribe(e=>{this.userName=this.authService.getUser(),this.dataSource.items=e[0],this.dataSource.paginatorTotal=e[1],this.cd&&!this.cd.destroyed&&this.cd.detectChanges()});this.cd.detectChanges(),this.subscriptions.push(t),this.cd.detectChanges()}viewShop(e){this.router.navigate([`apps/shop/shop-item/${e}`])}onBtnDeleteClick(e){this.userShopRequest.shopId=e,this.userShopService.deleteShopFromUser(this.userShopRequest).subscribe(e=>{this.noti.showSuccess(),this.userShopRequest=new K.a,this.initData(),this.cd.detectChanges()})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(ee.a),l.Ob(f.a),l.Ob(l.h),l.Ob(p.b),l.Ob(g.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-shop-saved"]],decls:13,vars:14,consts:[[1,"container-fluid",2,"margin-top","30px"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column","margin-bottom","4rem"],[3,"pageSize","pageSizeOptions","length","showFirstLastButtons","page"],[1,"mat-table__wrapper"],["tableStyleClass","table-no-wrap",3,"value","autoLayout"],["pTemplate","header"],["pTemplate","body"],[4,"ngIf"],["severity","info",4,"ngIf"],["class","table-no-wrap",3,"width","ngClass",4,"ngFor","ngForOf"],[1,"table-no-wrap",3,"width","ngClass"],[3,"title"],["data-toggle","tooltip","data-placement","bottom","title","Go to shop","trigger","hover focus ",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"action"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click"],["severity","info"],["pTemplate",""],[1,"p-ml-2"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"h2"),l.Rc(3),l.jc(4,"translate"),l.Tb(),l.Tb(),l.Ub(5,"mat-paginator",2),l.ec("page",function(e){return t.onPageChange(e)}),l.Tb(),l.Ub(6,"div",3),l.Ub(7,"p-table",4),l.Pc(8,oe,2,1,"ng-template",5),l.Pc(9,de,20,19,"ng-template",6),l.Tb(),l.Pc(10,be,1,0,"mat-spinner",7),l.jc(11,"async"),l.Pc(12,ue,2,0,"p-messages",8),l.Tb(),l.Tb()),2&e&&(l.Bb(3),l.Tc(" ",l.kc(4,9,"USER.SAVED.HEADER"),""),l.Bb(2),l.pc("pageSize",12)("pageSizeOptions",l.tc(13,me))("length",t.dataSource.paginatorTotal)("showFirstLastButtons",!0),l.Bb(2),l.pc("value",t.dataSource.items)("autoLayout",!0),l.Bb(3),l.pc("ngIf",l.kc(11,11,t.userShopService.isLoading$)),l.Bb(2),l.pc("ngIf",!t.dataSource.items||0==t.dataSource.items.length))},directives:[te.a,ie.f,w.k,n.n,n.m,n.l,p.d,A.b,D.a,B.d,C.a,B.a,B.b,ae.b,se.a],pipes:[ne.c,n.b],styles:[""]}),e})();var pe=i("Lti1"),fe=i("ORZO"),ve=i("tk/3"),we=i("q9ft"),Se=i("iadO"),Te=i("zFJ7");const Ue=["calendar"],ke=["form"];function Pe(e,t){1&e&&l.Pb(0,"app-waiting")}function Re(e,t){if(1&e&&l.Pb(0,"img",36),2&e){const e=l.ic();l.pc("src",e.imageUrl,l.Jc)}}function Ae(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",18),l.ec("click",function(){return l.Hc(e),l.ic().uploadAvatar()}),l.Rc(1),l.jc(2,"translate"),l.Tb()}2&e&&(l.Bb(1),l.Sc(l.kc(2,1,"USER.PAGE.UPDATE_AVATAR")))}function De(e,t){1&e&&(l.Ub(0,"div",39),l.Rc(1),l.jc(2,"translate"),l.Tb()),2&e&&(l.Bb(1),l.Tc("",l.kc(2,1,"COMMON.ERROR.NO_DATA_TO_DISPLAY")," "))}function Be(e,t){1&e&&(l.Ub(0,"p-messages",37),l.Pc(1,De,3,3,"ng-template",38),l.Tb())}function Ce(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div"),l.Ub(1,"app-post",40),l.ec("event",function(){return l.Hc(e),l.ic().initData()}),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,i=l.ic();l.Bb(1),l.pc("id",e.id)("status",e.status)("feeling",e.feeling)("createdAt",e.createdAt)("content",e.content)("name","Testing user")("avatar",i.postAvatar)("service",i.journalService)("userName",e.name)}}function ye(e,t){1&e&&l.Pb(0,"app-waiting")}function je(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",41),l.ec("click",function(){return l.Hc(e),l.ic().onBtnAddJournal()}),l.Rc(1),l.Tb(),l.Ub(2,"button",42),l.ec("click",function(){return l.Hc(e),l.ic().onBtnCancelJournal()}),l.Rc(3),l.Tb()}2&e&&(l.rc("title","","SAVE","(Enter) "),l.Bb(1),l.Tc(" ","Save"," "),l.Bb(1),l.rc("title","","CANCEL","(Esc) "),l.Bb(1),l.Sc("Cancel"))}const Oe=function(){return{width:"70%%"}};let xe=(()=>{class e extends pe.a{constructor(e,t,i,a,s,r,c,l){super(),this.cdr=e,this.sanitizer=t,this.http=i,this.journalService=a,this.noti=s,this.authService=r,this.userService=c,this.translate=l,this.input={},this.formDataAdd=new FormData,this.formDataAvatar=new FormData,this.pipe=new n.e("en-US"),this.daysSelected=[],this.formDisplay=!1,this.isLoaded=!1,this.avatarLoaded=!1,this.journalAdd={},this.dataSource={},this.images=[],this.selectedFile=null,this.request=new o,this.stopScroll=!1,this.allItems=!1,this.pageLoaded=!1,this.imageUrl="assets/img/cf_bg1.jpg",this.isSelected=e=>{const t=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);return this.daysSelected.find(e=>e==t)?"selected":null}}ngOnInit(){this.userName=this.authService.getUser(),this.userService.selectById(this.authService.getUserId()).subscribe(e=>{e.avatarPath&&(this.postAvatar=e.avatarPath,this.imageUrl=this.postAvatar),this.pageLoaded=!0}),this.resetCalendar(),this.initData()}initData(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.select(this.request).subscribe(e=>{this.dataSource.items=e,this.dataSource.items&&this.dataSource.items.length>0&&this.dataSource.items.forEach(e=>{if(0==e.length)return void(this.allItems=!0);let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t,e.images&&(e.image=e.images[0])),this.cdr.detectChanges()}),this.data=this.dataSource.items,this.stopScroll=!1,this.allItems=!1})}upload(e){this.formDataAdd=e}loadAvatar(e){this.formDataAvatar=e,this.avatarLoaded=!0}loadAvatarImage(e){this.imageUrl=e,this.cdr.detectChanges()}renewPage(){this.resetCalendar(),this.initData()}reset(){this.formDataAdd=new FormData,this.input={},this.journalStatus=!1,this.journalContent="",this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0)}uploadAvatar(){this.userService.uploadAvatar(this.formDataAvatar).subscribe(e=>{this.noti.showSuccess(),this.avatarLoaded=!1,this.userService.selectById(this.authService.getUserId()).subscribe(e=>{e.avatarPath&&(this.imageUrl=e.avatarPath,this.cdr.detectChanges())})})}onScrollDown(){1!=this.stopScroll&&1!=this.allItems?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.select(this.request).subscribe(e=>{0!=e.length?(e.forEach(e=>{let t=new Date(e.createdAt);this.selectNew(t,this.calendar),this.isSelected(t)}),e.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(e):e,this.data=this.dataSource.items):this.allItems=!0})):this.isLoaded=!0}resetCalendar(){this.journalService.getAllById().subscribe(e=>{e.forEach(e=>{let t=new Date(e.createdAt);this.selectNew(t,this.calendar),this.isSelected(t)}),this.cdr.detectChanges()})}update(e){this.dates=this.dateJournal}selectNew(e,t){const i=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2);this.daysSelected.findIndex(e=>e==i)<0&&this.daysSelected.push(i),t.updateTodaysDate()}format(e){return e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+("00"+e.getDate()).slice(-2)}select(e,t){const i=this.format(e);this.daysSelected.findIndex(e=>e==i),this.data=this.dataSource.items.filter(e=>this.format(new Date(e.createdAt))==i),this.stopScroll=!0,this.cdr.detectChanges(),t.updateTodaysDate()}handleFileInput(e){if(e.target.files){var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=e=>{this.imageUrl=e.target.result}}}onFileSelected(e){this.selectedFile=e.target.files[0]}editJournal(e){this.input={},this.input.content="",e&&(this.input.name=e.name,this.input.id=e.id,this.input.code=e.code),setTimeout(()=>{this.form.form.markAsPristine()},0),this.formDisplay=!0}onBtnSaveJournal(){this.journalAdd.content=this.journalContent,1==this.journalStatus&&(this.journalAdd.status=1),0==this.journalStatus&&(this.journalAdd.status=0),this.journalAdd.created=new Date,this.journalService.insert(this.journalAdd).subscribe(e=>{this.journalService.uploadJournalImages(e.id,this.formDataAdd).subscribe(e=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.cdr.detectChanges(),this.initData(),this.resetCalendar()})})}onBtnAddJournal(){if(this.form){if(!this.validateForm(this.form,"journal-edit"))return;if(this.form.form.dirty){const e=new fe.a;e.accept=()=>{1==this.journalStatus&&(this.input.status=1),0==this.journalStatus&&(this.input.status=0),this.journalService.insert(this.input).subscribe(e=>{this.journalService.uploadJournalImages(e.id,this.formDataAdd).subscribe(e=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.input={},this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.initData(),this.resetCalendar(),this.cdr.detectChanges()})})},this.noti.confirm(e)}else this.formDisplay=!1,this.journalStatus=!1,this.input={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()}this.cdr.detectChanges()}onBtnCancelJournal(){if(this.form.form.dirty){const e=new u.a;e.accept=()=>{this.formDisplay=!1,this.journalContent="",this.journalStatus=!1,this.formDataAdd=new FormData,this.input={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()},this.noti.confirm(e)}else this.formDisplay=!1,this.formDataAdd=new FormData,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(l.h),l.Ob(m.b),l.Ob(ve.b),l.Ob(d.a),l.Ob(g.a),l.Ob(f.a),l.Ob(we.a),l.Ob(ne.d))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user"]],viewQuery:function(e,t){if(1&e&&(l.Xc(Ue,1),l.Xc(ke,3)),2&e){let e;l.Cc(e=l.fc())&&(t.calendar=e.first),l.Cc(e=l.fc())&&(t.form=e.first)}},features:[l.yb],decls:83,vars:59,consts:[[1,"container-fluid",2,"margin-top","30px","width","100%"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[4,"ngIf"],["style","width: 250px; height:250px; object-fit: cover; border-radius: 50%;",3,"src",4,"ngIf"],[2,"flex-direction","row"],[3,"onReadImage","onFileLoad"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"col-md-4"],[1,"sticky-top",2,"top","4rem"],["id","all",1,"btn","float-right",2,"background-color","deeppink","color","white",3,"click"],[3,"click"],[3,"dateClass","selectedChange"],["calendar",""],[1,"col-md-8"],[2,"margin","0.5rem"],[1,"btn","btn-primary",3,"click"],["severity","info",4,"ngIf"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange","onHide"],[1,"fal","fa-user-edit"],["autocomplete","off","id","journal-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text ","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show ","offLabel","hide ","offIcon","pi pi-times ","onIcon","pi pi-check ","iconPos","right ","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","content",3,"form"],["rows","5 ","cols","30","pInputTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],["severity","info"],["pTemplate",""],[1,"p-ml-2"],[3,"id","status","feeling","createdAt","content","name","avatar","service","userName","event"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"h2"),l.Rc(3),l.jc(4,"translate"),l.Tb(),l.Pc(5,Pe,1,0,"app-waiting",2),l.Pc(6,Re,1,1,"img",3),l.Ub(7,"div",4),l.Ub(8,"app-upload",5),l.ec("onReadImage",function(e){return t.loadAvatarImage(e)})("onFileLoad",function(e){return t.loadAvatar(e)}),l.Tb(),l.Tb(),l.Pc(9,Ae,3,3,"button",6),l.Tb(),l.Ub(10,"div",7),l.Pb(11,"div",8),l.Ub(12,"div",9),l.Ub(13,"div",7),l.Ub(14,"div",10),l.Ub(15,"div",11),l.Ub(16,"mat-card"),l.Ub(17,"mat-card-title"),l.Rc(18),l.jc(19,"translate"),l.Ub(20,"button",12),l.ec("click",function(){return t.initData()}),l.Rc(21),l.jc(22,"translate"),l.Tb(),l.Tb(),l.Ub(23,"mat-card-subtitle"),l.Rc(24),l.jc(25,"translate"),l.Tb(),l.Ub(26,"div",13),l.ec("click",function(e){return e.stopPropagation()}),l.Ub(27,"mat-calendar",14,15),l.ec("selectedChange",function(i){l.Hc(e);const a=l.Dc(28);return t.select(i,a)}),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(29,"div",16),l.Ub(30,"div",17),l.Ub(31,"h2"),l.Rc(32),l.jc(33,"translate"),l.Tb(),l.Ub(34,"button",18),l.ec("click",function(){return t.editJournal()}),l.Rc(35),l.jc(36,"translate"),l.Tb(),l.Tb(),l.Pc(37,Be,2,0,"p-messages",19),l.Ub(38,"div",20),l.ec("scrolled",function(){return t.onScrollDown()}),l.Pc(39,Ce,2,9,"div",21),l.Tb(),l.Pc(40,ye,1,0,"app-waiting",2),l.Tb(),l.Tb(),l.Pb(41,"div",8),l.Tb(),l.Tb(),l.Tb(),l.Ub(42,"p-dialog",22),l.ec("visibleChange",function(e){return t.formDisplay=e})("onHide",function(){return t.reset()}),l.Ub(43,"p-header"),l.Pb(44,"i",23),l.Rc(45),l.jc(46,"translate"),l.Tb(),l.Ub(47,"form",24,25),l.Ub(49,"div",26),l.Ub(50,"div",27),l.Ub(51,"div",28),l.Ub(52,"label"),l.Rc(53),l.jc(54,"translate"),l.Tb(),l.Ub(55,"input",29),l.ec("ngModelChange",function(e){return t.input.feeling=e}),l.Tb(),l.Tb(),l.Ub(56,"div",28),l.Ub(57,"div",30),l.Ub(58,"label"),l.Rc(59),l.jc(60,"translate"),l.Tb(),l.Ub(61,"div"),l.Ub(62,"p-toggleButton",31),l.ec("ngModelChange",function(e){return t.journalStatus=e}),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(63,"div",27),l.Ub(64,"div",28),l.Ub(65,"div",30),l.Ub(66,"label"),l.Rc(67),l.jc(68,"translate"),l.Tb(),l.Pb(69,"validate-form",32),l.Ub(70,"textarea",33),l.ec("ngModelChange",function(e){return t.input.content=e}),l.jc(71,"translate"),l.Tb(),l.Tb(),l.Tb(),l.Ub(72,"div",28),l.Ub(73,"div",30),l.Ub(74,"label"),l.Rc(75),l.jc(76,"translate"),l.Tb(),l.Ub(77,"app-upload",34),l.ec("onFileLoad",function(e){return t.upload(e)}),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(78,"br"),l.Pb(79,"br"),l.Pb(80,"br"),l.Pb(81,"br"),l.Pc(82,je,4,4,"ng-template",35),l.Tb()}if(2&e){const e=l.Dc(48);l.Bb(3),l.Uc("",l.kc(4,34,"USER.PAGE.HEADER")," ",t.userName,""),l.Bb(2),l.pc("ngIf",0==t.pageLoaded),l.Bb(1),l.pc("ngIf",1==t.pageLoaded),l.Bb(3),l.pc("ngIf",1==t.avatarLoaded),l.Bb(9),l.Tc(" ",l.kc(19,36,"USER.PAGE.MY_COFFEE_JOURNEY")," "),l.Bb(3),l.Sc(l.kc(22,38,"USER.PAGE.ALL")),l.Bb(3),l.Sc(l.kc(25,40,"USER.PAGE.HIGHLIGHTED")),l.Bb(3),l.pc("dateClass",t.isSelected),l.Bb(5),l.Sc(l.kc(33,42,"USER.PAGE.SHARE_NOW")),l.Bb(3),l.Sc(l.kc(36,44,"USER.PAGE.ADD_JOURNAL")),l.Bb(2),l.pc("ngIf",!t.data||0==t.data.length),l.Bb(2),l.pc("ngForOf",t.data),l.Bb(1),l.pc("ngIf",0==t.isLoaded),l.Bb(2),l.Lc(l.tc(58,Oe)),l.pc("visible",t.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),l.Bb(3),l.Tc(" ",l.kc(46,46,"ADD_JOURNAL")," "),l.Bb(8),l.Sc(l.kc(54,48,"HOW_ARE_YOU_FEELING_TODAY")),l.Bb(2),l.rc("placeholder","","Tell people how you feel"," "),l.pc("ngModel",t.input.feeling),l.Bb(4),l.Sc(l.kc(60,50,"PUBLIC_PRIVATE")),l.Bb(3),l.pc("ngModel",t.journalStatus),l.Bb(5),l.Sc(l.kc(68,52,"WHAT_DO_YOU_WANT_TO_SHARE")),l.Bb(2),l.pc("form",e),l.Bb(1),l.rc("placeholder","",l.kc(71,54,"YOUR_JOURNAL_GOES_HERE")," "),l.pc("ngModel",t.input.content),l.Bb(5),l.Sc(l.kc(76,56,"ANY_PHOTO")),l.Bb(2),l.pc("preview",!0)}},directives:[n.n,k.a,R.a,R.h,R.g,Se.a,h.a,n.m,v.a,w.h,S.w,S.n,S.o,S.c,S.m,S.p,T.a,U.a,Te.a,S.t,w.k,P.a,se.a,V],pipes:[ne.c],styles:[".first{height:50vh;min-height:200px;background-size:cover;background-image:linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef),linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef);background-position:50%}#all:hover{opacity:.5}.mat-calendar-body-cell-content{color:inherit}.mat-calendar-body-cell.selected{background-color:#ff1493!important;color:#fff;border-radius:50%}.drop-calendar{width:100%}.p-datepicker table td.p-datepicker-today>span{background:var(--hue-color-2);color:#495057;border-color:transparent}.p-datepicker table td>span{width:2.5rem;height:2.5rem;border-radius:50%;transition:box-shadow .2s;border:1px solid transparent}.p-datepicker table td.p-datepicker-today>span.p-highlight{color:#495057;background:red}.p-datepicker table td>span.p-highlight{color:#f5f5f5;background:#ff1493}"],encapsulation:2}),e})();var Ie=i("+ojY");function Me(e,t){if(1&e&&(l.Ub(0,"div"),l.Pb(1,"app-post",17),l.Tb()),2&e){const e=t.$implicit,i=l.ic();l.Bb(1),l.pc("id",e.id)("status",e.status)("feeling",e.feeling)("createdAt",e.createdAt)("content",e.content)("name","Testing user")("service",i.journalService)("userName",e.name)}}function Ee(e,t){1&e&&l.Pb(0,"app-waiting")}function Le(e,t){if(1&e&&(l.Ub(0,"div"),l.Pb(1,"app-review",18),l.Tb()),2&e){const e=t.$implicit,i=l.ic();l.Bb(1),l.pc("id",e.id)("status",e.status)("rating",e.rating)("createdAt",e.createdAt)("content",e.content)("name","Testing user")("service",i.reviewService)("userName",e.userName)}}function _e(e,t){1&e&&l.Pb(0,"app-waiting")}const Fe=[{path:"",component:xe,canActivate:[Ie.a]},{path:"saved-shops",component:ge,canActivate:[Ie.a]},{path:"forum",component:Z},{path:"user-view/:id",component:(()=>{class e{constructor(e,t,i,a,s,n){this.cdr=e,this.journalService=t,this.reviewService=i,this.noti=a,this.route=s,this.userService=n,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.isLoadedReview=!1,this.request=new o,this.reviewRequest=new c.a,this.imageUrl="assets/img/cf_bg1.jpg"}ngOnInit(){this.sub=this.route.params.subscribe(e=>{this.id=e.id,this.userService.viewUserById(this.id).subscribe(e=>{this.imageUrl=e.avatarPath?e.avatarPath:"assets/img/cf_bg1.jpg",this.userName=e.userName,this.request.createdBy=this.id,this.reviewRequest.createdBy=this.id,this.request.status=1,this.reviewRequest.status=1,this.initJournal(),this.initReview()})})}initReview(){this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(e=>{this.dataSourceReview.items=e,this.dataSourceReview.items.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}initJournal(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(e=>{this.dataSource.items=e,this.dataSource.items.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t,e.images&&(e.image=e.images[0]))})})}onScrollDownReview(){1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(e=>{e&&e!=[]&&0!=e.length?(e.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t)}),this.isLoadedReview=!0,this.dataSourceReview.items=this.dataSourceReview.items?this.dataSourceReview.items.concat(e):e):this.stopScrollingReview=!0})):this.isLoadedReview=!0}onScrollDown(){1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(e=>{e&&e!=[]&&0!=e.length?(e.forEach(e=>{let t=[];e.imageDirectories&&e.imageDirectories.length>0&&(e.imageDirectories.forEach(e=>{t.push(e)}),e.images=t)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(e):e):this.stopScrolling=!0})):this.isLoaded=!0}ngOnDestroy(){this.sub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(l.h),l.Ob(d.a),l.Ob(b.a),l.Ob(g.a),l.Ob(p.a),l.Ob(we.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-user-view"]],decls:25,vars:6,consts:[[1,"container-fluid"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"h2"),l.Rc(3),l.Tb(),l.Pb(4,"img",2),l.Tb(),l.Ub(5,"div",3),l.Ub(6,"div",4),l.Ub(7,"ul",5),l.Ub(8,"li",6),l.Ub(9,"a",7),l.Rc(10,"Details"),l.Tb(),l.Tb(),l.Ub(11,"li",6),l.Ub(12,"a",8),l.Rc(13,"Reviews"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(14,"div",9),l.Ub(15,"div",10),l.Ub(16,"div",11),l.Ub(17,"div",12),l.ec("scrolled",function(){return t.onScrollDown()}),l.Pc(18,Me,2,8,"div",13),l.Tb(),l.Pc(19,Ee,1,0,"app-waiting",14),l.Tb(),l.Ub(20,"div",15),l.Ub(21,"div",12),l.ec("scrolled",function(){return t.onScrollDownReview()}),l.Pc(22,Le,2,8,"div",13),l.Tb(),l.Pc(23,_e,1,0,"app-waiting",14),l.Tb(),l.Tb(),l.Tb(),l.Pb(24,"div",16),l.Tb(),l.Tb()),2&e&&(l.Bb(3),l.Tc("Viewing ",t.userName,""),l.Bb(1),l.pc("src",t.imageUrl,l.Jc),l.Bb(14),l.pc("ngForOf",t.dataSource.items),l.Bb(1),l.pc("ngIf",0==t.isLoaded),l.Bb(3),l.pc("ngForOf",t.dataSourceReview.items),l.Bb(1),l.pc("ngIf",0==t.isLoaded))},directives:[h.a,n.m,n.n,V,P.a,Y.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),e})()}];let qe=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[p.e.forChild(Fe)],p.e]}),e})();var Ne=i("1kSV"),ze=i("FKr1"),Je=i("eO1q"),He=i("0IaG"),Ve=i("qFsG"),Ye=i("d3UM"),Ge=i("Nf9I"),$e=i("7kUa"),We=i("xlun"),Xe=i("aMj0");let Ze=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[n.c,qe,Xe.a,ve.c,a.a,S.i,S.s,Ne.b,v.b,Te.b,T.b,C.b,B.c,Se.b,ze.g,R.f,Je.b,h.b,s.a,ie.g,se.b,A.c,ne.b.forChild(),Ye.b,Ve.c,te.b,ae.a,D.b,He.b,Ne.a,Ne.f,Ge.b,$e.b,We.b]]}),e})()}}]);