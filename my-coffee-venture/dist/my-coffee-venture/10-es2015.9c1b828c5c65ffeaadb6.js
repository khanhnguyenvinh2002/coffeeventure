(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{n60B:function(t,e,i){"use strict";i.r(e),i.d(e,"UserModule",function(){return It});var a=i("SPc8"),s=i("xfXw"),n=i("V0Zc"),r=i("ofXK"),o=i("FMWu");class c extends o.a{}var l=i("xP/o"),d=i("fXoL"),b=i("jhN1"),h=i("tk/3"),u=i("dD+E"),m=i("R1yZ"),p=i("w6oe"),g=i("dlKe"),f=i("ZRK5"),v=i("8VXs"),T=i("/RsI"),w=i("7zfz"),S=i("3Pt+"),U=i("Y+ZO"),P=i("+pS1"),y=i("RCHe"),C=i("vR4d"),B=i("Wp6s"),A=i("bTqV"),R=i("Qu3c"),x=i("STbY"),j=i("NFeN");const k=["form"];function M(t,e){1&t&&d.Pb(0,"app-waiting")}function D(t,e){1&t&&(d.Ub(0,"span"),d.Pb(1,"i",31),d.Tb())}function I(t,e){1&t&&(d.Ub(0,"span"),d.Pb(1,"i",32),d.Tb())}function O(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",33),d.ec("click",function(){d.Hc(t);const e=d.ic(2);return e.onBtnDeleteClick(e.item.id)}),d.Ub(1,"span"),d.Rc(2),d.Tb(),d.Tb()}2&t&&(d.qc("title","Delete"),d.Bb(2),d.Sc("Delete"))}function F(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",33),d.ec("click",function(){return d.Hc(t),d.ic(2).editJournal()}),d.Ub(1,"span"),d.Rc(2),d.Tb(),d.Tb()}2&t&&(d.qc("title","Delete"),d.Bb(2),d.Sc("Edit"))}function L(t,e){if(1&t&&d.Pb(0,"img",34),2&t){const t=d.ic(2);d.pc("src",t.item.image,d.Jc)}}function _(t,e){if(1&t&&(d.Ub(0,"mat-card",16),d.Ub(1,"mat-card-header",17),d.Ub(2,"div",18),d.Pb(3,"div",19),d.Ub(4,"div",20),d.Ub(5,"mat-card-title",21),d.Rc(6),d.Tb(),d.Ub(7,"mat-card-subtitle",22),d.Pc(8,D,2,0,"span",1),d.Pc(9,I,2,0,"span",1),d.Rc(10),d.Tb(),d.Tb(),d.Tb(),d.Ub(11,"div",23),d.Ub(12,"div",24),d.Ub(13,"small",25),d.Rc(14),d.Tb(),d.Pb(15,"i",26),d.Tb(),d.Ub(16,"button",27),d.Ub(17,"mat-icon"),d.Rc(18,"more_vert"),d.Tb(),d.Tb(),d.Ub(19,"mat-menu",null,28),d.Pc(21,O,3,2,"button",29),d.Pc(22,F,3,2,"button",29),d.Tb(),d.Tb(),d.Tb(),d.Ub(23,"mat-card-content"),d.Ub(24,"p"),d.Rc(25),d.Ub(26,"i"),d.Rc(27),d.jc(28,"date"),d.Tb(),d.Tb(),d.Pc(29,L,1,1,"img",30),d.Tb(),d.Ub(30,"mat-card-actions"),d.Rc(31," Currently no action available "),d.Tb(),d.Tb()),2&t){const t=d.Dc(20),e=d.ic();d.Bb(3),d.Mc("background-image","url("+e.avatar+")"),d.Bb(3),d.Tc(" ",e.item.userName,""),d.Bb(2),d.pc("ngIf",0==e.item.status),d.Bb(1),d.pc("ngIf",0!=e.item.status),d.Bb(1),d.Tc("",e.item.feeling," "),d.Bb(4),d.Sc(e.calculateTime(e.item.createdAt)),d.Bb(2),d.pc("matMenuTriggerFor",t),d.Bb(5),d.pc("ngIf",e.authService.getUserId()==e.item.createdBy),d.Bb(1),d.pc("ngIf",e.authService.getUserId()==e.item.createdBy),d.Bb(3),d.Tc(" ",e.item.content+" "," "),d.Bb(2),d.Tc("Created at ",d.kc(28,13,e.item.createdAt),""),d.Bb(2),d.pc("ngIf",e.item.image)}}function q(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",35),d.ec("click",function(){return d.Hc(t),d.ic().onBtnAddJournal()}),d.Rc(1),d.Tb(),d.Ub(2,"button",36),d.ec("click",function(){return d.Hc(t),d.ic().onBtnCancelJournal()}),d.Rc(3),d.Tb()}2&t&&(d.rc("title","","SAVE","(Enter) "),d.Bb(1),d.Tc(" ","Save"," "),d.Bb(1),d.rc("title","","CANCEL","(Esc) "),d.Bb(1),d.Sc("Cancel"))}const z=function(){return{width:"70%%"}};let E=(()=>{class t{constructor(t,e,i,a,s){this.sanitizer=t,this.noti=e,this.cdr=i,this.authService=a,this.journalService=s,this.formDataAdd=new FormData,this.formDisplay=!1,this.loaded=!1,this.journalAdd={},this.dataSource={},this.event=new d.n,this.item={}}ngOnInit(){this.loaded=!1,this.service.selectById(this.id).subscribe(t=>{this.item=t;let e=[];this.item.imagePaths&&this.item.imagePaths.length>0&&this.item.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),this.item&&this.item.avatarPath&&(this.avatar="data:image/jpeg;base64,"+this.item.avatarPath),this.item.images=e,this.item.images&&(this.item.image=this.item.images[0]),this.loaded=!0}),this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id}onBtnDeleteClick(t){this.service.delete(t).subscribe(t=>{this.noti.showSuccess(),this.event.emit(!0)})}calculateTime(t){let e=new Date(t),i=new Date;var a=e.getHours(),s=i.getHours(),n=e.getMonth(),r=i.getMonth(),o=e.getDate(),c=i.getDate(),l=e.getUTCFullYear(),d=i.getUTCFullYear(),b=e.getMinutes(),h=i.getMinutes();return d-l>1?d-l+" yrs ago":d-l>0?d-l+" yr ago":r-n>1?r-n+" months ago":r-n>0?r-n+" month ago":c-o>1?c-o+" days ago":c-o>0?c-o+" day ago":s-a>1?s-a+" hours ago":s-a>0?s-a+" hour ago":h-b>1?h-b+" minutes ago":h-b>0?h-b+" minute ago":void 0}editJournal(){this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id,setTimeout(()=>{this.form.form.markAsPristine()},0),this.formDisplay=!0}onBtnAddJournal(){if(this.form.form.dirty){const t=new f.c;t.accept=()=>{1==this.journalStatus&&(this.itemAdd.status=1),0==this.journalStatus&&(this.itemAdd.status=0),this.journalService.merge(this.itemAdd).subscribe(t=>{this.journalService.uploadJournalImages(t.id,this.formDataAdd).subscribe(t=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.itemAdd={},this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.cdr.detectChanges()}onBtnCancelJournal(){if(this.form.form.dirty){const t=new f.a;t.accept=()=>{this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.formDataAdd=new FormData}upload(t){this.formDataAdd=t}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(b.b),d.Ob(p.a),d.Ob(d.h),d.Ob(v.a),d.Ob(u.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-post"]],viewQuery:function(t,e){if(1&t&&d.Xc(k,3),2&t){let t;d.Cc(t=d.fc())&&(e.form=t.first)}},inputs:{id:"id",createdAt:"createdAt",name:"name",imageSource:"imageSource",content:"content",feeling:"feeling",status:"status",avatar:"avatar",service:"service",userName:"userName"},outputs:{event:"event"},decls:38,vars:23,consts:[[2,"margin","0.5rem"],[4,"ngIf"],["class","container-fluid ",4,"ngIf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange"],[1,"fal","fa-user-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show","offLabel","hide","offIcon","pi pi-times","onIcon","pi pi-check","iconPos","right","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","name ",3,"form"],["rows","5 ","cols","30","pitemTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[1,"container-fluid"],[1,"justify-content-between",2,"text-align","center"],[2,"display","flex","width","200px","word-wrap","break-word","flex-direction","row"],["mat-card-avatar","",1,"example-header-image",2,"margin-bottom","16px"],[2,"margin-left","10px","text-align","left"],[1,"wrap-text",2,"margin-bottom","0","word-wrap","break-word"],[1,"wrap-text",2,"word-wrap","break-word"],[1,"float-right",2,"display","flex","flex-direction","row"],[1,"d-flex","flex-row","mt-1","ellipsis"],[1,"mr-2"],[1,"fa","fa-ellipsis-h"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click",4,"ngIf"],["alt","Photo of journal",3,"src",4,"ngIf"],[1,"fad","fa-globe-asia"],[1,"far","fa-lock-alt"],["mat-menu-item","",3,"title","click"],["alt","Photo of journal",3,"src"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(t,e){if(1&t&&(d.Ub(0,"div",0),d.Pc(1,M,1,0,"app-waiting",1),d.Pc(2,_,32,15,"mat-card",2),d.Tb(),d.Ub(3,"p-dialog",3),d.ec("visibleChange",function(t){return e.formDisplay=t}),d.Ub(4,"p-header"),d.Pb(5,"i",4),d.Rc(6),d.Tb(),d.Ub(7,"form",null,5),d.Ub(9,"div",6),d.Ub(10,"div",7),d.Ub(11,"div",8),d.Ub(12,"label"),d.Rc(13),d.Tb(),d.Ub(14,"input",9),d.ec("ngModelChange",function(t){return e.itemAdd.feeling=t}),d.Tb(),d.Tb(),d.Ub(15,"div",8),d.Ub(16,"div",10),d.Ub(17,"label"),d.Rc(18),d.Tb(),d.Ub(19,"div"),d.Ub(20,"p-toggleButton",11),d.ec("ngModelChange",function(t){return e.journalStatus=t}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(21,"div",7),d.Ub(22,"div",8),d.Ub(23,"div",10),d.Ub(24,"label"),d.Rc(25),d.Tb(),d.Pb(26,"validate-form",12),d.Ub(27,"textarea",13),d.ec("ngModelChange",function(t){return e.itemAdd.content=t}),d.Tb(),d.Tb(),d.Tb(),d.Ub(28,"div",8),d.Ub(29,"div",10),d.Ub(30,"label"),d.Rc(31),d.Tb(),d.Ub(32,"app-upload",14),d.ec("onFileLoad",function(t){return e.upload(t)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Pb(33,"br"),d.Pb(34,"br"),d.Pb(35,"br"),d.Pb(36,"br"),d.Pc(37,q,4,4,"ng-template",15),d.Tb()),2&t){const t=d.Dc(8);d.Bb(1),d.pc("ngIf",0==e.loaded),d.Bb(1),d.pc("ngIf",e.loaded),d.Bb(1),d.Lc(d.tc(22,z)),d.pc("visible",e.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),d.Bb(3),d.Tc(" ","Edit journal"," "),d.Bb(7),d.Sc("How are you feeling today?"),d.Bb(1),d.rc("placeholder","","Tell people how you feel"," "),d.pc("ngModel",e.itemAdd.feeling),d.Bb(4),d.Sc("Public/private"),d.Bb(2),d.pc("ngModel",e.journalStatus),d.Bb(5),d.Sc("What do you want to share?"),d.Bb(1),d.pc("form",t),d.Bb(1),d.rc("placeholder","","Your journal goes here"," "),d.pc("ngModel",e.itemAdd.content),d.Bb(4),d.Sc("We have not developed retrieving images, please reupload"),d.Bb(1),d.pc("preview",!0)}},directives:[r.n,T.a,w.h,S.u,S.l,S.m,S.c,S.k,S.n,U.a,P.a,S.r,y.a,w.k,C.a,B.a,B.e,B.c,B.h,B.g,A.b,R.a,x.d,j.a,x.a,B.d,B.b,x.b],pipes:[r.e],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-size:cover}img[_ngcontent-%COMP%]{display:block;width:100%;height:400px;-o-object-fit:cover;object-fit:cover}.card[_ngcontent-%COMP%]{margin:.5rem}[_nghost-%COMP%] .mat-card-header-text{display:none}.img-shop[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:9rem}.card[_ngcontent-%COMP%]{border:none}.ellipsis[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#a09c9c}hr[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:8px}.muted-color[_ngcontent-%COMP%]{color:#a09c9c;font-size:13px}.ellipsis[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:3px;cursor:pointer}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}@media (min-width:0px) and (max-width:800px){.wrap-text[_ngcontent-%COMP%]{width:130px}}@media (min-width:1200px){.wrap-text[_ngcontent-%COMP%]{width:450px}}.icons[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red}.icons[_ngcontent-%COMP%]   .fa-smile-o[_ngcontent-%COMP%]{color:#ff0;font-size:29px}.img-profile[_ngcontent-%COMP%]{display:block;height:300px;width:100%;-o-object-fit:cover;object-fit:cover}.rounded-image[_ngcontent-%COMP%]{border-radius:50%!important;display:flex;justify-content:center;align-items:center;height:50px;width:50px}.name[_ngcontent-%COMP%]{font-weight:600}.comment-text[_ngcontent-%COMP%]{font-size:12px}.status[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:10px;color:#00f}.form-control[_ngcontent-%COMP%]{border-radius:26px}.comment-input[_ngcontent-%COMP%]{position:relative}.fonts[_ngcontent-%COMP%]{position:absolute;right:13px;top:8px;color:#a09c9c}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#8bbafe;outline:0;box-shadow:none}"]}),t})();function N(t,e){if(1&t&&(d.Ub(0,"div"),d.Pb(1,"app-post",15),d.Tb()),2&t){const t=e.$implicit,i=d.ic();d.Bb(1),d.pc("id",t.id)("status",t.status)("feeling",t.feeling)("createdAt",t.createdAt)("content",t.content)("name","Testing user")("service",i.journalService)("userName",t.name)}}function J(t,e){1&t&&d.Pb(0,"app-waiting")}function H(t,e){if(1&t&&(d.Ub(0,"div"),d.Pb(1,"app-review",16),d.Tb()),2&t){const t=e.$implicit,i=d.ic();d.Bb(1),d.pc("id",t.id)("status",t.status)("rating",t.rating)("createdAt",t.createdAt)("content",t.content)("name","Testing user")("service",i.reviewService)("userName",t.userName)}}function V(t,e){1&t&&d.Pb(0,"app-waiting")}let Y=(()=>{class t{constructor(t,e,i,a,s,n){this.cdr=t,this.sanitizer=e,this.http=i,this.journalService=a,this.reviewService=s,this.noti=n,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.selectedFile=null,this.isLoadedReview=!1,this.request=new c,this.reviewRequest=new l.a,this.imageUrl="assets/img/cf_bg1.jpg"}ngOnInit(){this.initJournal(),this.initReview()}initReview(){this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(t=>{this.dataSourceReview.items=t,this.dataSourceReview.items.forEach(t=>{let e=[];t.imagePaths&&t.imagePaths.length>0&&(t.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),t.images=e,t.images&&(t.image=t.images[0]))})})}initJournal(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(t=>{this.dataSource.items=t,this.dataSource.items.forEach(t=>{let e=[];t.imagePaths&&t.imagePaths.length>0&&(t.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),t.images=e,t.images&&(t.image=t.images[0]))})})}onScrollDownReview(){1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(t=>{t&&t!=[]&&0!=t.length?(t.forEach(t=>{let e=[];t.imagePaths&&t.imagePaths.length>0&&(t.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),t.images=e)}),this.isLoadedReview=!0,this.dataSourceReview.items=this.dataSourceReview.items?this.dataSourceReview.items.concat(t):t):this.stopScrollingReview=!0})):this.isLoadedReview=!0}onScrollDown(){1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(t=>{t&&t!=[]&&0!=t.length?(t.forEach(t=>{let e=[];t.imagePaths&&t.imagePaths.length>0&&(t.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),t.images=e)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(t):t):this.stopScrolling=!0})):this.isLoaded=!0}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(d.h),d.Ob(b.b),d.Ob(h.b),d.Ob(u.a),d.Ob(m.a),d.Ob(p.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-forum"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(t,e){1&t&&(d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"div",2),d.Ub(3,"ul",3),d.Ub(4,"li",4),d.Ub(5,"a",5),d.Rc(6,"Details"),d.Tb(),d.Tb(),d.Ub(7,"li",4),d.Ub(8,"a",6),d.Rc(9,"Reviews"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(10,"div",7),d.Ub(11,"div",8),d.Ub(12,"div",9),d.Ub(13,"div",10),d.ec("scrolled",function(){return e.onScrollDown()}),d.Pc(14,N,2,8,"div",11),d.Tb(),d.Pc(15,J,1,0,"app-waiting",12),d.Tb(),d.Ub(16,"div",13),d.Ub(17,"div",10),d.ec("scrolled",function(){return e.onScrollDownReview()}),d.Pc(18,H,2,8,"div",11),d.Tb(),d.Pc(19,V,1,0,"app-waiting",12),d.Tb(),d.Tb(),d.Tb(),d.Pb(20,"div",14),d.Tb(),d.Tb()),2&t&&(d.Bb(14),d.pc("ngForOf",e.dataSource.items),d.Bb(1),d.pc("ngIf",0==e.isLoaded),d.Bb(3),d.pc("ngForOf",e.dataSourceReview.items),d.Bb(1),d.pc("ngIf",0==e.isLoaded))},directives:[g.a,r.m,r.n,E,C.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),t})();var W=i("7mip"),X=i("rF8k"),Z=i("tyNb"),$=i("rEr+"),K=i("dts7");function Q(t,e){if(1&t&&(d.Ub(0,"div"),d.Rc(1),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Tc(" ",t.name,"\n")}}function G(t,e){if(1&t&&(d.Ub(0,"th",7),d.Rc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("width",t.width)("ngClass",t.class),d.Bb(1),d.Tc(" ",t.header," ")}}function tt(t,e){if(1&t&&(d.Ub(0,"tr"),d.Pc(1,G,2,3,"th",6),d.Tb()),2&t){const t=d.ic();d.Bb(1),d.pc("ngForOf",t.cols)}}function et(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr"),d.Ub(1,"td",8),d.Rc(2),d.Tb(),d.Ub(3,"td",8),d.Rc(4),d.Tb(),d.Ub(5,"td",8),d.Rc(6),d.Tb(),d.Ub(7,"td",8),d.Rc(8),d.Tb(),d.Ub(9,"td",8),d.Rc(10),d.Tb(),d.Ub(11,"td",9),d.Ub(12,"button",10),d.Ub(13,"mat-icon"),d.Rc(14,"more_vert"),d.Tb(),d.Tb(),d.Ub(15,"mat-menu",null,11),d.Ub(17,"button",12),d.ec("click",function(){d.Hc(t);const i=e.$implicit;return d.ic().onBtnDeleteClick(i.id)}),d.Ub(18,"span"),d.Rc(19),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit,i=e.rowIndex,a=d.Dc(16);d.Bb(1),d.pc("title",i+1),d.Bb(1),d.Tc(" ",i+1," "),d.Bb(1),d.pc("title",t.id),d.Bb(1),d.Tc(" ",t.id," "),d.Bb(1),d.pc("title",t.name),d.Bb(1),d.Tc(" ",t.name," "),d.Bb(1),d.pc("title",t.address),d.Bb(1),d.Wc(" ",t.address,",",t.street,",",t.district,",",t.city," "),d.Bb(1),d.pc("title",t.unitCode),d.Bb(1),d.Tc(" ",t.unitCode," "),d.Bb(2),d.pc("matMenuTriggerFor",a),d.Bb(5),d.qc("title","S\u1eeda"),d.Bb(2),d.Sc("DELETE")}}function it(t,e){1&t&&(d.Ub(0,"div",15),d.Rc(1,"No data to display"),d.Tb())}function at(t,e){1&t&&(d.Ub(0,"p-messages",13),d.Pc(1,it,2,0,"ng-template",14),d.Tb())}let st=(()=>{class t{constructor(t,e,i,a){this.userShopService=t,this.cd=e,this.router=i,this.noti=a,this.userShopRequest=new W.a,this.cols=[{width:"50px",header:"No"},{width:"100px",header:"Id"},{width:"100px",header:"Name"},{width:"100px",header:"Address"},{width:"300px",header:"Other"},{width:"70px",header:"",maxWidth:"50px",class:"action"}]}ngOnInit(){this.userShopService.select(this.userShopRequest).subscribe(t=>{this.items=t})}viewYield(t){this.router.navigate([`apps/shop/shop-item/${t}`])}onBtnDeleteClick(t){this.userShopRequest.shopId=t,this.userShopService.deleteShopFromUser(this.userShopRequest).subscribe(t=>{this.noti.showSuccess(),this.userShopService.select(this.userShopRequest).subscribe(t=>{this.items=t}),this.cd.detectChanges()})}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(X.a),d.Ob(d.h),d.Ob(Z.b),d.Ob(p.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-shop-saved"]],decls:7,vars:4,consts:[[4,"ngFor","ngForOf"],[1,"mat-table__wrapper"],["tableStyleClass","table-no-wrap",3,"value"],["pTemplate","header"],["pTemplate","body"],["severity","info",4,"ngIf"],["class","table-no-wrap",3,"width","ngClass",4,"ngFor","ngForOf"],[1,"table-no-wrap",3,"width","ngClass"],[3,"title"],[1,"action"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click"],["severity","info"],["pTemplate",""],[1,"p-ml-2"]],template:function(t,e){1&t&&(d.Pc(0,Q,2,1,"div",0),d.Rc(1),d.Ub(2,"div",1),d.Ub(3,"p-table",2),d.Pc(4,tt,2,1,"ng-template",3),d.Pc(5,et,20,16,"ng-template",4),d.Tb(),d.Pc(6,at,2,0,"p-messages",5),d.Tb()),2&t&&(d.pc("ngForOf",e.items),d.Bb(1),d.Tc("\n",e.items,"\n"),d.Bb(2),d.pc("value",e.items),d.Bb(3),d.pc("ngIf",!e.items||0==e.items.length))},directives:[r.m,$.f,w.k,r.n,r.l,A.b,R.a,x.d,j.a,x.a,x.b,K.a],styles:[""]}),t})();var nt=i("LqhL"),rt=i("T5lM"),ot=i("5I3+"),ct=i("iadO"),lt=i("zFJ7");const dt=["calendar"],bt=["form"];function ht(t,e){1&t&&d.Pb(0,"app-waiting")}function ut(t,e){if(1&t&&d.Pb(0,"img",34),2&t){const t=d.ic();d.pc("src",t.imageUrl,d.Jc)}}function mt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",18),d.ec("click",function(){return d.Hc(t),d.ic().uploadAvatar()}),d.Rc(1,"Update avatar"),d.Tb()}}function pt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div"),d.Ub(1,"app-post",35),d.ec("event",function(){return d.Hc(t),d.ic().initData()}),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit,i=d.ic();d.Bb(1),d.pc("id",t.id)("status",t.status)("feeling",t.feeling)("createdAt",t.createdAt)("content",t.content)("name","Testing user")("avatar",i.postAvatar)("service",i.journalService)("userName",t.name)}}function gt(t,e){1&t&&d.Pb(0,"app-waiting")}function ft(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",36),d.ec("click",function(){return d.Hc(t),d.ic().onBtnAddJournal()}),d.Rc(1),d.Tb(),d.Ub(2,"button",37),d.ec("click",function(){return d.Hc(t),d.ic().onBtnCancelJournal()}),d.Rc(3),d.Tb()}2&t&&(d.rc("title","","SAVE","(Enter) "),d.Bb(1),d.Tc(" ","Save"," "),d.Bb(1),d.rc("title","","CANCEL","(Esc) "),d.Bb(1),d.Sc("Cancel"))}const vt=function(){return{width:"70%%"}};let Tt=(()=>{class t extends nt.a{constructor(t,e,i,a,s,n,o){super(),this.cdr=t,this.sanitizer=e,this.http=i,this.journalService=a,this.noti=s,this.authService=n,this.userService=o,this.input={},this.formDataAdd=new FormData,this.formDataAvatar=new FormData,this.pipe=new r.e("en-US"),this.daysSelected=[],this.formDisplay=!1,this.isLoaded=!1,this.avatarLoaded=!1,this.journalAdd={},this.dataSource={},this.images=[],this.selectedFile=null,this.request=new c,this.stopScroll=!1,this.allItems=!1,this.pageLoaded=!1,this.imageUrl="assets/img/cf_bg1.jpg",this.isSelected=t=>{const e=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2);return this.daysSelected.find(t=>t==e)?"selected":null}}ngOnInit(){this.userName=this.authService.getUser(),this.userService.selectById(this.authService.getUserId()).subscribe(t=>{t.avatarPath&&(this.postAvatar="data:image/jpeg;base64,"+t.avatarPath,this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.postAvatar)),this.pageLoaded=!0}),this.resetCalendar(),this.initData()}initData(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.select(this.request).subscribe(t=>{this.dataSource.items=t,this.dataSource.items.forEach(t=>{if(0==t.length)return void(this.allItems=!0);let e=[];t.imagePaths&&t.imagePaths.length>0&&(t.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),t.images=e,t.images&&(t.image=t.images[0])),this.cdr.detectChanges()}),this.data=this.dataSource.items,this.stopScroll=!1,this.allItems=!1})}upload(t){this.formDataAdd=t}loadAvatar(t){this.formDataAvatar=t,this.avatarLoaded=!0}loadAvatarImage(t){this.imageUrl=t,this.cdr.detectChanges()}uploadAvatar(){this.userService.uploadAvatar(this.formDataAvatar).subscribe(t=>{this.noti.showSuccess(),this.avatarLoaded=!1,this.userService.selectById(this.authService.getUserId()).subscribe(t=>{t.avatarPath&&(this.imageUrl=this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t.avatarPath),this.cdr.detectChanges())})})}onScrollDown(){1!=this.stopScroll&&1!=this.allItems?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.select(this.request).subscribe(t=>{0!=t.length?(t.forEach(t=>{let e=new Date(t.createdAt);this.selectNew(e,this.calendar),this.isSelected(e)}),t.forEach(t=>{let e=[];t.imagePaths&&t.imagePaths.length>0&&(t.imagePaths.forEach(t=>{e.push(this.sanitizer.bypassSecurityTrustResourceUrl("data:image/jpeg;base64,"+t))}),t.images=e)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(t):t,this.data=this.dataSource.items):this.allItems=!0})):this.isLoaded=!0}resetCalendar(){this.journalService.getAllById().subscribe(t=>{t.forEach(t=>{let e=new Date(t.createdAt);this.selectNew(e,this.calendar),this.isSelected(e)}),this.cdr.detectChanges()})}update(t){this.dates=this.dateJournal}selectNew(t,e){const i=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2);this.daysSelected.findIndex(t=>t==i)<0&&this.daysSelected.push(i),e.updateTodaysDate()}format(t){return t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)}select(t,e){const i=this.format(t);this.daysSelected.findIndex(t=>t==i)>=0&&(this.data=this.dataSource.items.filter(t=>this.format(new Date(t.createdAt))==i),this.stopScroll=!0,this.cdr.detectChanges()),e.updateTodaysDate()}handleFileInput(t){if(t.target.files){var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=t=>{this.imageUrl=t.target.result}}}onFileSelected(t){this.selectedFile=t.target.files[0]}editJournal(t){this.input={},this.input.content="",t&&(this.input.name=t.name,this.input.id=t.id,this.input.code=t.code),setTimeout(()=>{this.form.form.markAsPristine()},0),this.formDisplay=!0}onBtnSaveJournal(){this.journalAdd.content=this.journalContent,1==this.journalStatus&&(this.journalAdd.status=1),0==this.journalStatus&&(this.journalAdd.status=0),this.journalAdd.created=new Date,this.journalService.insert(this.journalAdd).subscribe(t=>{this.journalService.uploadJournalImages(t.id,this.formDataAdd).subscribe(t=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.cdr.detectChanges(),this.initData(),this.resetCalendar()})})}onBtnAddJournal(){if(this.form.form.dirty){const t=new rt.a;t.accept=()=>{1==this.journalStatus&&(this.input.status=1),0==this.journalStatus&&(this.input.status=0),this.journalService.insert(this.input).subscribe(t=>{this.journalService.uploadJournalImages(t.id,this.formDataAdd).subscribe(t=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.input={},this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.initData(),this.resetCalendar(),this.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.input={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.cdr.detectChanges()}onBtnCancelJournal(){if(this.form.form.dirty){const t=new f.a;t.accept=()=>{this.formDisplay=!1,this.journalStatus=!1,this.input={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.formDataAdd=new FormData}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(d.h),d.Ob(b.b),d.Ob(h.b),d.Ob(u.a),d.Ob(p.a),d.Ob(v.a),d.Ob(ot.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-user"]],viewQuery:function(t,e){if(1&t&&(d.Xc(dt,1),d.Xc(bt,3)),2&t){let t;d.Cc(t=d.fc())&&(e.calendar=t.first),d.Cc(t=d.fc())&&(e.form=t.first)}},features:[d.yb],decls:72,vars:31,consts:[[1,"container-fluid",2,"margin-top","30px","width","100%"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[4,"ngIf"],["style","width: 250px; height:250px; object-fit: cover; border-radius: 50%;",3,"src",4,"ngIf"],[2,"flex-direction","row"],[3,"onReadImage","onFileLoad"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"col-md-4"],[1,"sticky-top",2,"top","4rem"],["id","all",1,"btn","float-right",2,"background-color","deeppink","color","white",3,"click"],[3,"click"],[3,"dateClass","selectedChange"],["calendar",""],[1,"col-md-8"],[2,"margin","0.5rem"],[1,"btn","btn-primary",3,"click"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange"],[1,"fal","fa-user-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text ","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show ","offLabel","hide ","offIcon","pi pi-times ","onIcon","pi pi-check ","iconPos","right ","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","name ",3,"form"],["rows","5 ","cols","30","pInputTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],[3,"id","status","feeling","createdAt","content","name","avatar","service","userName","event"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"h2"),d.Rc(3),d.Tb(),d.Pc(4,ht,1,0,"app-waiting",2),d.Pc(5,ut,1,1,"img",3),d.Ub(6,"div",4),d.Ub(7,"app-upload",5),d.ec("onReadImage",function(t){return e.loadAvatarImage(t)})("onFileLoad",function(t){return e.loadAvatar(t)}),d.Tb(),d.Tb(),d.Pc(8,mt,2,0,"button",6),d.Tb(),d.Ub(9,"div",7),d.Ub(10,"div",8),d.Rc(11),d.jc(12,"json"),d.Tb(),d.Ub(13,"div",9),d.Ub(14,"div",7),d.Ub(15,"div",10),d.Ub(16,"div",11),d.Ub(17,"mat-card"),d.Ub(18,"mat-card-title"),d.Rc(19," My coffee journey "),d.Ub(20,"button",12),d.ec("click",function(){return e.initData()}),d.Rc(21,"All"),d.Tb(),d.Tb(),d.Ub(22,"mat-card-subtitle"),d.Rc(23,"Click highlighted date to view journals"),d.Tb(),d.Ub(24,"div",13),d.ec("click",function(t){return t.stopPropagation()}),d.Ub(25,"mat-calendar",14,15),d.ec("selectedChange",function(i){d.Hc(t);const a=d.Dc(26);return e.select(i,a)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(27,"div",16),d.Ub(28,"div",17),d.Ub(29,"h2"),d.Rc(30,"Share your coffee journal now"),d.Tb(),d.Ub(31,"button",18),d.ec("click",function(){return e.editJournal()}),d.Rc(32,"Add Journal"),d.Tb(),d.Tb(),d.Ub(33,"div",19),d.ec("scrolled",function(){return e.onScrollDown()}),d.Pc(34,pt,2,9,"div",20),d.Tb(),d.Pc(35,gt,1,0,"app-waiting",2),d.Tb(),d.Tb(),d.Pb(36,"div",8),d.Tb(),d.Tb(),d.Tb(),d.Ub(37,"p-dialog",21),d.ec("visibleChange",function(t){return e.formDisplay=t}),d.Ub(38,"p-header"),d.Pb(39,"i",22),d.Rc(40),d.Tb(),d.Ub(41,"form",null,23),d.Ub(43,"div",24),d.Ub(44,"div",25),d.Ub(45,"div",26),d.Ub(46,"label"),d.Rc(47),d.Tb(),d.Ub(48,"input",27),d.ec("ngModelChange",function(t){return e.input.feeling=t}),d.Tb(),d.Tb(),d.Ub(49,"div",26),d.Ub(50,"div",28),d.Ub(51,"label"),d.Rc(52),d.Tb(),d.Ub(53,"div"),d.Ub(54,"p-toggleButton",29),d.ec("ngModelChange",function(t){return e.journalStatus=t}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(55,"div",25),d.Ub(56,"div",26),d.Ub(57,"div",28),d.Ub(58,"label"),d.Rc(59),d.Tb(),d.Pb(60,"validate-form",30),d.Ub(61,"textarea",31),d.ec("ngModelChange",function(t){return e.input.content=t}),d.Tb(),d.Tb(),d.Tb(),d.Ub(62,"div",26),d.Ub(63,"div",28),d.Ub(64,"label"),d.Rc(65),d.Tb(),d.Ub(66,"app-upload",32),d.ec("onFileLoad",function(t){return e.upload(t)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Pb(67,"br"),d.Pb(68,"br"),d.Pb(69,"br"),d.Pb(70,"br"),d.Pc(71,ft,4,4,"ng-template",33),d.Tb()}if(2&t){const t=d.Dc(42);d.Bb(3),d.Tc("Welcome to your journey page ",e.userName,""),d.Bb(1),d.pc("ngIf",0==e.pageLoaded),d.Bb(1),d.pc("ngIf",1==e.pageLoaded),d.Bb(3),d.pc("ngIf",1==e.avatarLoaded),d.Bb(3),d.Tc("",d.kc(12,28,e.daysSelected)," "),d.Bb(14),d.pc("dateClass",e.isSelected),d.Bb(9),d.pc("ngForOf",e.data),d.Bb(1),d.pc("ngIf",0==e.isLoaded),d.Bb(2),d.Lc(d.tc(30,vt)),d.pc("visible",e.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),d.Bb(3),d.Tc(" ","Add journal "," "),d.Bb(7),d.Sc("How are you feeling today?"),d.Bb(1),d.rc("placeholder","","Tell people how you feel"," "),d.pc("ngModel",e.input.feeling),d.Bb(4),d.Sc("Public/private"),d.Bb(2),d.pc("ngModel",e.journalStatus),d.Bb(5),d.Sc("What do you want to share?"),d.Bb(1),d.pc("form",t),d.Bb(1),d.rc("placeholder","","Your journal goes here"," "),d.pc("ngModel",e.input.content),d.Bb(4),d.Sc("Do you have any photo you want to share?"),d.Bb(1),d.pc("preview",!0)}},directives:[r.n,y.a,B.a,B.h,B.g,ct.a,g.a,r.m,T.a,w.h,S.u,S.l,S.m,S.c,S.k,S.n,U.a,P.a,lt.a,S.r,w.k,C.a,E],pipes:[r.h],styles:[".first{height:50vh;min-height:200px;background-size:cover;background-image:linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef),linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef);background-position:50%}#all:hover{opacity:.5}.mat-calendar-body-cell-content{color:inherit}.mat-calendar-body-cell.selected{background-color:#ff1493!important;color:#fff;border-radius:50%}.drop-calendar{width:100%}.p-datepicker table td.p-datepicker-today>span{background:var(--hue-color-2);color:#495057;border-color:transparent}.p-datepicker table td>span{width:2.5rem;height:2.5rem;border-radius:50%;transition:box-shadow .2s;border:1px solid transparent}.p-datepicker table td.p-datepicker-today>span.p-highlight{color:#495057;background:red}.p-datepicker table td>span.p-highlight{color:#f5f5f5;background:#ff1493}"],encapsulation:2}),t})();var wt=i("vza5");const St=[{path:"",component:Tt,canActivate:[wt.a]},{path:"saved-shops",component:st,canActivate:[wt.a]},{path:"forum",component:Y}];let Ut=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[Z.e.forChild(St)],Z.e]}),t})();var Pt=i("1kSV"),yt=i("FKr1"),Ct=i("eO1q"),Bt=i("0IaG"),At=i("qFsG"),Rt=i("M9IT"),xt=i("Xa2L"),jt=i("d3UM"),kt=i("Nf9I"),Mt=i("7kUa"),Dt=i("xlun");let It=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[r.c,Ut,h.c,s.a,a.ReviewerModule,S.g,S.q,Pt.b,T.b,lt.b,U.b,j.b,x.c,ct.b,yt.g,B.f,Ct.b,g.b,n.a,$.g,K.b,A.c,jt.b,At.c,Rt.b,xt.a,R.b,Bt.b,Pt.a,Pt.f,kt.b,Mt.b,Dt.b]]}),t})()}}]);