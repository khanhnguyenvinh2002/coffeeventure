(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{n60B:function(t,e,i){"use strict";i.r(e),i.d(e,"UserModule",function(){return Ft});var a=i("SPc8"),n=i("xfXw"),o=i("V0Zc"),s=i("ofXK"),r=i("FMWu");class c extends r.a{}var l=i("xP/o"),d=i("fXoL"),b=i("jhN1"),h=i("tk/3"),u=i("dD+E"),m=i("R1yZ"),p=i("w6oe"),g=i("dlKe"),f=i("ZRK5"),v=i("8VXs"),w=i("/RsI"),T=i("7zfz"),S=i("3Pt+"),U=i("Y+ZO"),y=i("+pS1"),C=i("RCHe"),P=i("vR4d"),D=i("Wp6s"),A=i("bTqV"),B=i("Qu3c"),x=i("STbY"),R=i("NFeN");const j=["form"];function k(t,e){1&t&&d.Pb(0,"app-waiting")}function M(t,e){1&t&&(d.Ub(0,"span"),d.Rc(1,"Public"),d.Tb())}function I(t,e){1&t&&(d.Ub(0,"span"),d.Rc(1,"Private"),d.Tb())}function O(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",32),d.ec("click",function(){d.Hc(t);const e=d.ic(2);return e.onBtnDeleteClick(e.item.id)}),d.Ub(1,"span"),d.Rc(2),d.Tb(),d.Tb()}2&t&&(d.qc("title","Delete"),d.Bb(2),d.Sc("Delete"))}function F(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",32),d.ec("click",function(){return d.Hc(t),d.ic(2).editJournal()}),d.Ub(1,"span"),d.Rc(2),d.Tb(),d.Tb()}2&t&&(d.qc("title","Delete"),d.Bb(2),d.Sc("Edit"))}function L(t,e){if(1&t&&d.Pb(0,"img",33),2&t){const t=d.ic(2);d.pc("src",t.item.image,d.Jc)}}function _(t,e){if(1&t&&(d.Ub(0,"mat-card",16),d.Ub(1,"mat-card-header",17),d.Ub(2,"div",18),d.Ub(3,"div",19),d.Pb(4,"img",20),d.Tb(),d.Ub(5,"div",21),d.Ub(6,"mat-card-title",22),d.Rc(7),d.Tb(),d.Ub(8,"mat-card-subtitle",23),d.Pc(9,M,2,0,"span",1),d.Pc(10,I,2,0,"span",1),d.Rc(11),d.Tb(),d.Tb(),d.Tb(),d.Ub(12,"div",24),d.Ub(13,"div",25),d.Ub(14,"small",26),d.Rc(15),d.Tb(),d.Pb(16,"i",27),d.Tb(),d.Ub(17,"button",28),d.Ub(18,"mat-icon"),d.Rc(19,"more_vert"),d.Tb(),d.Tb(),d.Ub(20,"mat-menu",null,29),d.Pc(22,O,3,2,"button",30),d.Pc(23,F,3,2,"button",30),d.Tb(),d.Tb(),d.Tb(),d.Ub(24,"mat-card-content"),d.Ub(25,"p"),d.Rc(26),d.Ub(27,"i"),d.Rc(28),d.jc(29,"date"),d.Tb(),d.Tb(),d.Pc(30,L,1,1,"img",31),d.Tb(),d.Ub(31,"mat-card-actions"),d.Rc(32," Currently no action available "),d.Tb(),d.Tb()),2&t){const t=d.Dc(21),e=d.ic();d.Bb(4),d.pc("src",e.avatar,d.Jc),d.Bb(3),d.Tc(" ",e.item.userName,""),d.Bb(2),d.pc("ngIf",0==e.item.status),d.Bb(1),d.pc("ngIf",0!=e.item.status),d.Bb(1),d.Tc(" -- ",e.item.feeling," "),d.Bb(4),d.Sc(e.calculateTime(e.item.createdAt)),d.Bb(2),d.pc("matMenuTriggerFor",t),d.Bb(5),d.pc("ngIf",e.authService.getUserId()==e.item.createdBy),d.Bb(1),d.pc("ngIf",e.authService.getUserId()==e.item.createdBy),d.Bb(3),d.Tc(" ",e.item.content+" "," "),d.Bb(2),d.Tc("Created at ",d.kc(29,12,e.item.createdAt),""),d.Bb(2),d.pc("ngIf",e.item.image)}}function q(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",34),d.ec("click",function(){return d.Hc(t),d.ic().onBtnAddJournal()}),d.Rc(1),d.Tb(),d.Ub(2,"button",35),d.ec("click",function(){return d.Hc(t),d.ic().onBtnCancelJournal()}),d.Rc(3),d.Tb()}2&t&&(d.rc("title","","SAVE","(Enter) "),d.Bb(1),d.Tc(" ","Save"," "),d.Bb(1),d.rc("title","","CANCEL","(Esc) "),d.Bb(1),d.Sc("Cancel"))}const E=function(){return{width:"70%%"}};let N=(()=>{class t{constructor(t,e,i,a,n){this.sanitizer=t,this.noti=e,this.cdr=i,this.authService=a,this.journalService=n,this.formDataAdd=new FormData,this.formDisplay=!1,this.loaded=!1,this.journalAdd={},this.dataSource={},this.event=new d.n,this.item={}}ngOnInit(){this.loaded=!1,this.service.selectById(this.id).subscribe(t=>{this.item=t;let e=[];this.item.imageDirectories&&this.item.imageDirectories.length>0&&this.item.imageDirectories.forEach(t=>{e.push(t)}),this.item&&this.item.avatarPath&&(this.avatar=this.item.avatarPath),this.item.images=e,this.item.images&&(this.item.image=this.item.images[0]),this.loaded=!0}),this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id}onBtnDeleteClick(t){this.service.delete(t).subscribe(t=>{this.noti.showSuccess(),this.event.emit(!0)})}calculateTime(t){let e=new Date(t),i=new Date;var a=e.getSeconds(),n=i.getSeconds(),o=e.getHours(),s=i.getHours(),r=e.getMonth(),c=i.getMonth(),l=e.getDate(),d=i.getDate(),b=e.getUTCFullYear(),h=i.getUTCFullYear(),u=e.getMinutes(),m=i.getMinutes();return h-b>1?h-b+" yrs ago":h-b>0?h-b+" yr ago":c-r>1?c-r+" months ago":c-r>0?c-r+" month ago":d-l>1?d-l+" days ago":d-l>0?d-l+" day ago":s-o>1?s-o+" hours ago":s-o>0?s-o+" hour ago":m-u>1?m-u+" minutes ago":m-u>0?m-u+" minute ago":n-a>1?n-a+" secs ago":n-a>0?n-a+" sec ago":void 0}editJournal(){this.itemAdd={},this.itemAdd.feeling=this.item.feeling?this.item.feeling:"",1==this.item.status&&(this.journalStatus=!0),0==this.item.status&&(this.journalStatus=!1),this.itemAdd.status=this.item.status?this.item.status:"",this.itemAdd.content=this.item.content?this.item.content:"",this.itemAdd.id=this.item.id,setTimeout(()=>{this.form.form.markAsPristine()},0),this.formDisplay=!0}onBtnAddJournal(){if(this.form.form.dirty){const t=new f.c;t.accept=()=>{1==this.journalStatus&&(this.itemAdd.status=1),0==this.journalStatus&&(this.itemAdd.status=0),this.journalService.merge(this.itemAdd).subscribe(t=>{this.journalService.uploadJournalImages(t.id,this.formDataAdd).subscribe(t=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.itemAdd={},this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.cdr.detectChanges()}onBtnCancelJournal(){if(this.form.form.dirty){const t=new f.a;t.accept=()=>{this.formDisplay=!1,this.journalStatus=!1,this.itemAdd={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges();this.formDataAdd=new FormData}upload(t){this.formDataAdd=t}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(b.b),d.Ob(p.a),d.Ob(d.h),d.Ob(v.a),d.Ob(u.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-post"]],viewQuery:function(t,e){if(1&t&&d.Xc(j,3),2&t){let t;d.Cc(t=d.fc())&&(e.form=t.first)}},inputs:{id:"id",createdAt:"createdAt",name:"name",imageSource:"imageSource",content:"content",feeling:"feeling",status:"status",avatar:"avatar",service:"service",userName:"userName"},outputs:{event:"event"},decls:38,vars:23,consts:[[2,"margin","0.5rem"],[4,"ngIf"],["class","container-fluid ",4,"ngIf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange"],[1,"fal","fa-user-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show","offLabel","hide","offIcon","pi pi-times","onIcon","pi pi-check","iconPos","right","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","name ",3,"form"],["rows","5 ","cols","30","pitemTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[1,"container-fluid"],[1,"justify-content-between",2,"text-align","center"],[2,"display","flex","width","200px","word-wrap","break-word","flex-direction","row"],["mat-card-avatar","",1,"example-header-image",2,"margin-bottom","16px"],[2,"height","40px","width","40px","border-radius","50%","flex-shrink","0","object-fit","cover",3,"src"],[2,"margin-left","10px","text-align","left"],[1,"wrap-text",2,"margin-bottom","0","word-wrap","break-word"],[1,"wrap-text",2,"word-wrap","break-word"],[1,"float-right",2,"display","flex","flex-direction","row"],[1,"d-flex","flex-row","mt-1","ellipsis"],[1,"mr-2"],[1,"fa","fa-ellipsis-h"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click",4,"ngIf"],["alt","Photo of journal",3,"src",4,"ngIf"],["mat-menu-item","",3,"title","click"],["alt","Photo of journal",3,"src"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(t,e){if(1&t&&(d.Ub(0,"div",0),d.Pc(1,k,1,0,"app-waiting",1),d.Pc(2,_,33,14,"mat-card",2),d.Tb(),d.Ub(3,"p-dialog",3),d.ec("visibleChange",function(t){return e.formDisplay=t}),d.Ub(4,"p-header"),d.Pb(5,"i",4),d.Rc(6),d.Tb(),d.Ub(7,"form",null,5),d.Ub(9,"div",6),d.Ub(10,"div",7),d.Ub(11,"div",8),d.Ub(12,"label"),d.Rc(13),d.Tb(),d.Ub(14,"input",9),d.ec("ngModelChange",function(t){return e.itemAdd.feeling=t}),d.Tb(),d.Tb(),d.Ub(15,"div",8),d.Ub(16,"div",10),d.Ub(17,"label"),d.Rc(18),d.Tb(),d.Ub(19,"div"),d.Ub(20,"p-toggleButton",11),d.ec("ngModelChange",function(t){return e.journalStatus=t}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(21,"div",7),d.Ub(22,"div",8),d.Ub(23,"div",10),d.Ub(24,"label"),d.Rc(25),d.Tb(),d.Pb(26,"validate-form",12),d.Ub(27,"textarea",13),d.ec("ngModelChange",function(t){return e.itemAdd.content=t}),d.Tb(),d.Tb(),d.Tb(),d.Ub(28,"div",8),d.Ub(29,"div",10),d.Ub(30,"label"),d.Rc(31),d.Tb(),d.Ub(32,"app-upload",14),d.ec("onFileLoad",function(t){return e.upload(t)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Pb(33,"br"),d.Pb(34,"br"),d.Pb(35,"br"),d.Pb(36,"br"),d.Pc(37,q,4,4,"ng-template",15),d.Tb()),2&t){const t=d.Dc(8);d.Bb(1),d.pc("ngIf",0==e.loaded),d.Bb(1),d.pc("ngIf",e.loaded),d.Bb(1),d.Lc(d.tc(22,E)),d.pc("visible",e.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),d.Bb(3),d.Tc(" ","Edit journal"," "),d.Bb(7),d.Sc("How are you feeling today?"),d.Bb(1),d.rc("placeholder","","Tell people how you feel"," "),d.pc("ngModel",e.itemAdd.feeling),d.Bb(4),d.Sc("Public/private"),d.Bb(2),d.pc("ngModel",e.journalStatus),d.Bb(5),d.Sc("What do you want to share?"),d.Bb(1),d.pc("form",t),d.Bb(1),d.rc("placeholder","","Your journal goes here"," "),d.pc("ngModel",e.itemAdd.content),d.Bb(4),d.Sc("We have not developed retrieving images, please reupload"),d.Bb(1),d.pc("preview",!0)}},directives:[s.m,w.a,T.h,S.u,S.l,S.m,S.c,S.k,S.n,U.a,y.a,S.r,C.a,T.k,P.a,D.a,D.e,D.c,D.h,D.g,A.b,B.a,x.d,R.a,x.a,D.d,D.b,x.b],pipes:[s.e],styles:[".example-card[_ngcontent-%COMP%]{max-width:400px}.example-header-image[_ngcontent-%COMP%]{background-size:cover}img[_ngcontent-%COMP%]{display:block;width:100%;height:400px;-o-object-fit:cover;object-fit:cover}.card[_ngcontent-%COMP%]{margin:.5rem}[_nghost-%COMP%] .mat-card-header-text{display:none}.img-shop[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover;width:100%;height:9rem}.card[_ngcontent-%COMP%]{border:none}.ellipsis[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{color:#a09c9c}hr[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:8px}.muted-color[_ngcontent-%COMP%]{color:#a09c9c;font-size:13px}.ellipsis[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:3px;cursor:pointer}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}@media (min-width:0px) and (max-width:800px){.wrap-text[_ngcontent-%COMP%]{width:130px}}@media (min-width:1200px){.wrap-text[_ngcontent-%COMP%]{width:450px}}.icons[_ngcontent-%COMP%]   .fa-heart[_ngcontent-%COMP%]{color:red}.icons[_ngcontent-%COMP%]   .fa-smile-o[_ngcontent-%COMP%]{color:#ff0;font-size:29px}.img-profile[_ngcontent-%COMP%]{display:block;height:300px;width:100%;-o-object-fit:cover;object-fit:cover}.rounded-image[_ngcontent-%COMP%]{border-radius:50%!important;display:flex;justify-content:center;align-items:center;height:50px;width:50px}.name[_ngcontent-%COMP%]{font-weight:600}.comment-text[_ngcontent-%COMP%]{font-size:12px}.status[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:10px;color:#00f}.form-control[_ngcontent-%COMP%]{border-radius:26px}.comment-input[_ngcontent-%COMP%]{position:relative}.fonts[_ngcontent-%COMP%]{position:absolute;right:13px;top:8px;color:#a09c9c}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#8bbafe;outline:0;box-shadow:none}"]}),t})();var J=i("IaCn");function z(t,e){if(1&t&&(d.Ub(0,"div"),d.Pb(1,"app-post",15),d.Tb()),2&t){const t=e.$implicit,i=d.ic();d.Bb(1),d.pc("id",t.id)("status",t.status)("feeling",t.feeling)("createdAt",t.createdAt)("content",t.content)("name","Testing user")("service",i.journalService)("userName",t.name)}}function H(t,e){1&t&&d.Pb(0,"app-waiting")}function V(t,e){if(1&t&&(d.Ub(0,"div"),d.Pb(1,"app-review",16),d.Tb()),2&t){const t=e.$implicit,i=d.ic();d.Bb(1),d.pc("id",t.id)("status",t.status)("rating",t.rating)("createdAt",t.createdAt)("content",t.content)("name","Testing user")("service",i.reviewService)("userName",t.userName)}}function Y(t,e){1&t&&d.Pb(0,"app-waiting")}let W=(()=>{class t{constructor(t,e,i,a,n,o){this.cdr=t,this.sanitizer=e,this.http=i,this.journalService=a,this.reviewService=n,this.noti=o,this.stopScrolling=!1,this.stopScrollingReview=!1,this.formDataAdd=new FormData,this.daysSelected=[],this.isLoaded=!1,this.journalAdd={},this.dataSource={},this.dataSourceReview={},this.images=[],this.selectedFile=null,this.isLoadedReview=!1,this.request=new c,this.reviewRequest=new l.a,this.imageUrl="assets/img/cf_bg1.jpg"}ngOnInit(){this.initJournal(),this.initReview()}initReview(){this.reviewRequest.pageIndex=0,this.reviewRequest.pageSize=3,this.reviewService.getAll(this.reviewRequest).subscribe(t=>{this.dataSourceReview.items=t,this.dataSourceReview.items.forEach(t=>{let e=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(t=>{e.push(t)}),t.images=e,t.images&&(t.image=t.images[0]))})})}initJournal(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.getAll(this.request).subscribe(t=>{this.dataSource.items=t,this.dataSource.items.forEach(t=>{let e=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(t=>{e.push(t)}),t.images=e,t.images&&(t.image=t.images[0]))})})}onScrollDownReview(){1!=this.stopScrollingReview?(this.isLoadedReview=!1,this.reviewRequest.pageIndex++,this.reviewService.getAll(this.reviewRequest).subscribe(t=>{t&&t!=[]&&0!=t.length?(t.forEach(t=>{let e=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(t=>{e.push(t)}),t.images=e)}),this.isLoadedReview=!0,this.dataSourceReview.items=this.dataSourceReview.items?this.dataSourceReview.items.concat(t):t):this.stopScrollingReview=!0})):this.isLoadedReview=!0}onScrollDown(){1!=this.stopScrolling?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.getAll(this.request).subscribe(t=>{t&&t!=[]&&0!=t.length?(t.forEach(t=>{let e=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(t=>{e.push(t)}),t.images=e)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(t):t):this.stopScrolling=!0})):this.isLoaded=!0}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(d.h),d.Ob(b.b),d.Ob(h.b),d.Ob(u.a),d.Ob(m.a),d.Ob(p.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-forum"]],decls:21,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","col-lg-2","align-items-center"],["id","myTab","role","tablist ",1,"nav","nav-tabs","flex-row","align-items-center","sticky-top",2,"top","5rem","justify-content","center"],[1,"nav-item"],["id","home-tab ","data-toggle","tab","href","#journal","role","tab ","aria-controls","home ","aria-selected","true ",1,"nav-link","active"],["id","profile-tab ","data-toggle","tab","href","#review","role","tab ","aria-controls","profile ","aria-selected","false ",1,"nav-link"],[1,"col-md-10","col-lg-8"],["id","myTabContent",1,"tab-content","profile-tab",2,"word-wrap","break-word"],["id","journal","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],[4,"ngIf"],["id","review","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"col-lg-2"],[3,"id","status","feeling","createdAt","content","name","service","userName"],[3,"id","status","rating","createdAt","content","name","service","userName"]],template:function(t,e){1&t&&(d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"div",2),d.Ub(3,"ul",3),d.Ub(4,"li",4),d.Ub(5,"a",5),d.Rc(6,"Details"),d.Tb(),d.Tb(),d.Ub(7,"li",4),d.Ub(8,"a",6),d.Rc(9,"Reviews"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(10,"div",7),d.Ub(11,"div",8),d.Ub(12,"div",9),d.Ub(13,"div",10),d.ec("scrolled",function(){return e.onScrollDown()}),d.Pc(14,z,2,8,"div",11),d.Tb(),d.Pc(15,H,1,0,"app-waiting",12),d.Tb(),d.Ub(16,"div",13),d.Ub(17,"div",10),d.ec("scrolled",function(){return e.onScrollDownReview()}),d.Pc(18,V,2,8,"div",11),d.Tb(),d.Pc(19,Y,1,0,"app-waiting",12),d.Tb(),d.Tb(),d.Tb(),d.Pb(20,"div",14),d.Tb(),d.Tb()),2&t&&(d.Bb(14),d.pc("ngForOf",e.dataSource.items),d.Bb(1),d.pc("ngIf",0==e.isLoaded),d.Bb(3),d.pc("ngForOf",e.dataSourceReview.items),d.Bb(1),d.pc("ngIf",0==e.isLoaded))},directives:[g.a,s.l,s.m,N,P.a,J.a],styles:[".nav-link[_ngcontent-%COMP%]{color:#ff1493}.nav-link.active[_ngcontent-%COMP%]{background-color:#fff;color:#000!important}"]}),t})();var X=i("7mip"),Z=i("rF8k"),$=i("tyNb"),K=i("rEr+"),Q=i("dts7");function G(t,e){if(1&t&&(d.Ub(0,"th",8),d.Rc(1),d.Tb()),2&t){const t=e.$implicit;d.pc("width",t.width)("ngClass",t.class),d.Bb(1),d.Tc(" ",t.header," ")}}function tt(t,e){if(1&t&&(d.Ub(0,"tr"),d.Pc(1,G,2,3,"th",7),d.Tb()),2&t){const t=d.ic();d.Bb(1),d.pc("ngForOf",t.cols)}}function et(t,e){if(1&t&&(d.Ub(0,"span"),d.Rc(1),d.Tb()),2&t){const t=e.$implicit;d.Bb(1),d.Tc("",t.name+" "," ")}}function it(t,e){if(1&t){const t=d.Vb();d.Ub(0,"tr"),d.Ub(1,"td",9),d.Rc(2),d.Tb(),d.Ub(3,"td",9),d.Rc(4),d.Tb(),d.Ub(5,"td",9),d.Rc(6),d.Tb(),d.Ub(7,"td",9),d.Pc(8,et,2,1,"span",10),d.Tb(),d.Ub(9,"td",11),d.Ub(10,"button",12),d.Ub(11,"mat-icon"),d.Rc(12,"more_vert"),d.Tb(),d.Tb(),d.Ub(13,"mat-menu",null,13),d.Ub(15,"button",14),d.ec("click",function(){d.Hc(t);const i=e.$implicit;return d.ic().onBtnDeleteClick(i.id)}),d.Ub(16,"span"),d.Rc(17),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit,i=e.rowIndex,a=d.Dc(14);d.Bb(1),d.pc("title",i+1),d.Bb(1),d.Tc(" ",i+1," "),d.Bb(1),d.pc("title",t.name),d.Bb(1),d.Tc(" ",t.name," "),d.Bb(1),d.pc("title",t.address),d.Bb(1),d.Wc(" ",t.address,", ",t.street,", ",t.district,", ",t.city," "),d.Bb(1),d.pc("title","Categories"),d.Bb(1),d.pc("ngForOf",t.shopCategory),d.Bb(2),d.pc("matMenuTriggerFor",a),d.Bb(5),d.qc("title","X\xf3a"),d.Bb(2),d.Sc("DELETE")}}function at(t,e){1&t&&(d.Ub(0,"div",17),d.Rc(1,"No data to display"),d.Tb())}function nt(t,e){1&t&&(d.Ub(0,"p-messages",15),d.Pc(1,at,2,0,"ng-template",16),d.Tb())}let ot=(()=>{class t{constructor(t,e,i,a,n){this.userShopService=t,this.authService=e,this.cd=i,this.router=a,this.noti=n,this.userShopRequest=new X.a,this.cols=[{width:"50px",header:"No"},{width:"100px",header:"Name"},{width:"300px",header:"Address"},{width:"200px",header:"Category"},{width:"70px",header:"",maxWidth:"50px",class:"action"}]}ngOnInit(){this.userShopService.select(this.userShopRequest).subscribe(t=>{this.items=t})}viewYield(t){this.router.navigate([`apps/shop/shop-item/${t}`])}onBtnDeleteClick(t){this.userName=this.authService.getUser(),this.userShopRequest.shopId=t,this.userShopService.deleteShopFromUser(this.userShopRequest).subscribe(t=>{this.noti.showSuccess(),this.userShopService.select(this.userShopRequest).subscribe(t=>{this.items=t}),this.cd.detectChanges()})}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(Z.a),d.Ob(v.a),d.Ob(d.h),d.Ob($.b),d.Ob(p.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-shop-saved"]],decls:9,vars:4,consts:[[1,"container-fluid",2,"margin-top","30px"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column","margin-bottom","4rem"],[1,"mat-table__wrapper"],["tableStyleClass","table-no-wrap",3,"value","autoLayout"],["pTemplate","header"],["pTemplate","body"],["severity","info",4,"ngIf"],["class","table-no-wrap",3,"width","ngClass",4,"ngFor","ngForOf"],[1,"table-no-wrap",3,"width","ngClass"],[3,"title"],[4,"ngFor","ngForOf"],[1,"action"],["mat-icon-button","","matTooltip","More actions",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"title","click"],["severity","info"],["pTemplate",""],[1,"p-ml-2"]],template:function(t,e){1&t&&(d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"h2"),d.Rc(3),d.Tb(),d.Tb(),d.Ub(4,"div",2),d.Ub(5,"p-table",3),d.Pc(6,tt,2,1,"ng-template",4),d.Pc(7,it,18,14,"ng-template",5),d.Tb(),d.Pc(8,nt,2,0,"p-messages",6),d.Tb(),d.Tb()),2&t&&(d.Bb(3),d.Tc("Welcome to your review page ",e.userName,""),d.Bb(2),d.pc("value",e.items)("autoLayout",!0),d.Bb(3),d.pc("ngIf",!e.items||0==e.items.length))},directives:[K.f,T.k,s.m,s.l,s.k,A.b,B.a,x.d,R.a,x.a,x.b,Q.a],styles:[""]}),t})();var st=i("LqhL"),rt=i("T5lM"),ct=i("5I3+"),lt=i("iadO"),dt=i("zFJ7");const bt=["calendar"],ht=["form"];function ut(t,e){1&t&&d.Pb(0,"app-waiting")}function mt(t,e){if(1&t&&d.Pb(0,"img",35),2&t){const t=d.ic();d.pc("src",t.imageUrl,d.Jc)}}function pt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",18),d.ec("click",function(){return d.Hc(t),d.ic().uploadAvatar()}),d.Rc(1,"Update avatar"),d.Tb()}}function gt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div"),d.Ub(1,"app-post",36),d.ec("event",function(){return d.Hc(t),d.ic().initData()}),d.Tb(),d.Tb()}if(2&t){const t=e.$implicit,i=d.ic();d.Bb(1),d.pc("id",t.id)("status",t.status)("feeling",t.feeling)("createdAt",t.createdAt)("content",t.content)("name","Testing user")("avatar",i.postAvatar)("service",i.journalService)("userName",t.name)}}function ft(t,e){1&t&&d.Pb(0,"app-waiting")}function vt(t,e){if(1&t){const t=d.Vb();d.Ub(0,"button",37),d.ec("click",function(){return d.Hc(t),d.ic().onBtnAddJournal()}),d.Rc(1),d.Tb(),d.Ub(2,"button",38),d.ec("click",function(){return d.Hc(t),d.ic().onBtnCancelJournal()}),d.Rc(3),d.Tb()}2&t&&(d.rc("title","","SAVE","(Enter) "),d.Bb(1),d.Tc(" ","Save"," "),d.Bb(1),d.rc("title","","CANCEL","(Esc) "),d.Bb(1),d.Sc("Cancel"))}const wt=function(){return{width:"70%%"}};let Tt=(()=>{class t extends st.a{constructor(t,e,i,a,n,o,r){super(),this.cdr=t,this.sanitizer=e,this.http=i,this.journalService=a,this.noti=n,this.authService=o,this.userService=r,this.input={},this.formDataAdd=new FormData,this.formDataAvatar=new FormData,this.pipe=new s.e("en-US"),this.daysSelected=[],this.formDisplay=!1,this.isLoaded=!1,this.avatarLoaded=!1,this.journalAdd={},this.dataSource={},this.images=[],this.selectedFile=null,this.request=new c,this.stopScroll=!1,this.allItems=!1,this.pageLoaded=!1,this.imageUrl="assets/img/cf_bg1.jpg",this.isSelected=t=>{const e=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2);return this.daysSelected.find(t=>t==e)?"selected":null}}ngOnInit(){this.userName=this.authService.getUser(),this.userService.selectById(this.authService.getUserId()).subscribe(t=>{t.avatarPath&&(this.postAvatar=t.avatarPath,this.imageUrl=this.postAvatar),this.pageLoaded=!0}),this.resetCalendar(),this.initData()}initData(){this.request.pageIndex=0,this.request.pageSize=3,this.journalService.select(this.request).subscribe(t=>{this.dataSource.items=t,this.dataSource.items&&this.dataSource.items.length>0&&this.dataSource.items.forEach(t=>{if(0==t.length)return void(this.allItems=!0);let e=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(t=>{e.push(t)}),t.images=e,t.images&&(t.image=t.images[0])),this.cdr.detectChanges()}),this.data=this.dataSource.items,this.stopScroll=!1,this.allItems=!1})}upload(t){this.formDataAdd=t}loadAvatar(t){this.formDataAvatar=t,this.avatarLoaded=!0}loadAvatarImage(t){this.imageUrl=t,this.cdr.detectChanges()}renewPage(){this.resetCalendar(),this.initData()}reset(){this.formDataAdd=new FormData,this.input={},this.journalStatus=!1,this.journalContent="",this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0)}uploadAvatar(){this.userService.uploadAvatar(this.formDataAvatar).subscribe(t=>{this.noti.showSuccess(),this.avatarLoaded=!1,this.userService.selectById(this.authService.getUserId()).subscribe(t=>{t.avatarPath&&(this.imageUrl=t.avatarPath,this.cdr.detectChanges())})})}onScrollDown(){1!=this.stopScroll&&1!=this.allItems?(this.isLoaded=!1,this.request.pageIndex++,this.journalService.select(this.request).subscribe(t=>{0!=t.length?(t.forEach(t=>{let e=new Date(t.createdAt);this.selectNew(e,this.calendar),this.isSelected(e)}),t.forEach(t=>{let e=[];t.imageDirectories&&t.imageDirectories.length>0&&(t.imageDirectories.forEach(t=>{e.push(t)}),t.images=e)}),this.isLoaded=!0,this.dataSource.items=this.dataSource.items=this.dataSource.items?this.dataSource.items.concat(t):t,this.data=this.dataSource.items):this.allItems=!0})):this.isLoaded=!0}resetCalendar(){this.journalService.getAllById().subscribe(t=>{t.forEach(t=>{let e=new Date(t.createdAt);this.selectNew(e,this.calendar),this.isSelected(e)}),this.cdr.detectChanges()})}update(t){this.dates=this.dateJournal}selectNew(t,e){const i=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2);this.daysSelected.findIndex(t=>t==i)<0&&this.daysSelected.push(i),e.updateTodaysDate()}format(t){return t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)}select(t,e){const i=this.format(t);this.daysSelected.findIndex(t=>t==i)>=0&&(this.data=this.dataSource.items.filter(t=>this.format(new Date(t.createdAt))==i),this.stopScroll=!0,this.cdr.detectChanges()),e.updateTodaysDate()}handleFileInput(t){if(t.target.files){var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=t=>{this.imageUrl=t.target.result}}}onFileSelected(t){this.selectedFile=t.target.files[0]}editJournal(t){this.input={},this.input.content="",t&&(this.input.name=t.name,this.input.id=t.id,this.input.code=t.code),setTimeout(()=>{this.form.form.markAsPristine()},0),this.formDisplay=!0}onBtnSaveJournal(){this.journalAdd.content=this.journalContent,1==this.journalStatus&&(this.journalAdd.status=1),0==this.journalStatus&&(this.journalAdd.status=0),this.journalAdd.created=new Date,this.journalService.insert(this.journalAdd).subscribe(t=>{this.journalService.uploadJournalImages(t.id,this.formDataAdd).subscribe(t=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.cdr.detectChanges(),this.initData(),this.resetCalendar()})})}onBtnAddJournal(){if(this.form){if(!this.validateForm(this.form,"journal-edit"))return;if(this.form.form.dirty){const t=new rt.a;t.accept=()=>{1==this.journalStatus&&(this.input.status=1),0==this.journalStatus&&(this.input.status=0),this.journalService.insert(this.input).subscribe(t=>{this.journalService.uploadJournalImages(t.id,this.formDataAdd).subscribe(t=>{this.noti.showSuccess(),this.journalContent="",this.journalStatus=!1,this.input={},this.formDisplay=!1,setTimeout(()=>{this.form.form.markAsPristine()},0),this.initData(),this.resetCalendar(),this.cdr.detectChanges()})})},this.noti.confirm(t)}else this.formDisplay=!1,this.journalStatus=!1,this.input={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()}this.cdr.detectChanges()}onBtnCancelJournal(){if(this.form.form.dirty){const t=new f.a;t.accept=()=>{this.formDisplay=!1,this.journalContent="",this.journalStatus=!1,this.formDataAdd=new FormData,this.input={},setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()},this.noti.confirm(t)}else this.formDisplay=!1,this.formDataAdd=new FormData,setTimeout(()=>{this.form.form.markAsPristine()},0),this.cdr.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(d.h),d.Ob(b.b),d.Ob(h.b),d.Ob(u.a),d.Ob(p.a),d.Ob(v.a),d.Ob(ct.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-user"]],viewQuery:function(t,e){if(1&t&&(d.Xc(bt,1),d.Xc(ht,3)),2&t){let t;d.Cc(t=d.fc())&&(e.calendar=t.first),d.Cc(t=d.fc())&&(e.form=t.first)}},features:[d.yb],decls:70,vars:28,consts:[[1,"container-fluid",2,"margin-top","30px","width","100%"],[1,"d-flex","align-items-center","justify-content-center",2,"flex-direction","column"],[4,"ngIf"],["style","width: 250px; height:250px; object-fit: cover; border-radius: 50%;",3,"src",4,"ngIf"],[2,"flex-direction","row"],[3,"onReadImage","onFileLoad"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"row"],[1,"col-md-1"],[1,"col-md-10"],[1,"col-md-4"],[1,"sticky-top",2,"top","4rem"],["id","all",1,"btn","float-right",2,"background-color","deeppink","color","white",3,"click"],[3,"click"],[3,"dateClass","selectedChange"],["calendar",""],[1,"col-md-8"],[2,"margin","0.5rem"],[1,"btn","btn-primary",3,"click"],["infinite-scroll","",2,"width","100%","word-wrap","break-word",3,"scrolled"],[4,"ngFor","ngForOf"],["appendTo","body",3,"visible","modal","baseZIndex","draggable","maximizable","closable","visibleChange","onHide"],[1,"fal","fa-user-edit"],["autocomplete","off","id","journal-edit"],["form","ngForm"],[1,"col-md-12"],[1,"form-row"],[1,"col-md-6"],["type","text ","name","feeling",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group"],["onLabel","show ","offLabel","hide ","offIcon","pi pi-times ","onIcon","pi pi-check ","iconPos","right ","name","toggleButton",3,"ngModel","ngModelChange"],["controlName","content",3,"form"],["rows","5 ","cols","30","pInputTextarea","","autoResize","autoResize","required","","name","content",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[3,"preview","onFileLoad"],["pTemplate","footer "],[2,"width","250px","height","250px","object-fit","cover","border-radius","50%",3,"src"],[3,"id","status","feeling","createdAt","content","name","avatar","service","userName","event"],[1,"btn","btn-primary",3,"title","click"],[1,"btn","btn-secondary",2,"float","right",3,"title","click"]],template:function(t,e){if(1&t){const t=d.Vb();d.Ub(0,"div",0),d.Ub(1,"div",1),d.Ub(2,"h2"),d.Rc(3),d.Tb(),d.Pc(4,ut,1,0,"app-waiting",2),d.Pc(5,mt,1,1,"img",3),d.Ub(6,"div",4),d.Ub(7,"app-upload",5),d.ec("onReadImage",function(t){return e.loadAvatarImage(t)})("onFileLoad",function(t){return e.loadAvatar(t)}),d.Tb(),d.Tb(),d.Pc(8,pt,2,0,"button",6),d.Tb(),d.Ub(9,"div",7),d.Pb(10,"div",8),d.Ub(11,"div",9),d.Ub(12,"div",7),d.Ub(13,"div",10),d.Ub(14,"div",11),d.Ub(15,"mat-card"),d.Ub(16,"mat-card-title"),d.Rc(17," My coffee journey "),d.Ub(18,"button",12),d.ec("click",function(){return e.initData()}),d.Rc(19,"All"),d.Tb(),d.Tb(),d.Ub(20,"mat-card-subtitle"),d.Rc(21,"Click highlighted date to view journals"),d.Tb(),d.Ub(22,"div",13),d.ec("click",function(t){return t.stopPropagation()}),d.Ub(23,"mat-calendar",14,15),d.ec("selectedChange",function(i){d.Hc(t);const a=d.Dc(24);return e.select(i,a)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(25,"div",16),d.Ub(26,"div",17),d.Ub(27,"h2"),d.Rc(28,"Share your coffee journal now"),d.Tb(),d.Ub(29,"button",18),d.ec("click",function(){return e.editJournal()}),d.Rc(30,"Add Journal"),d.Tb(),d.Tb(),d.Ub(31,"div",19),d.ec("scrolled",function(){return e.onScrollDown()}),d.Pc(32,gt,2,9,"div",20),d.Tb(),d.Pc(33,ft,1,0,"app-waiting",2),d.Tb(),d.Tb(),d.Pb(34,"div",8),d.Tb(),d.Tb(),d.Tb(),d.Ub(35,"p-dialog",21),d.ec("visibleChange",function(t){return e.formDisplay=t})("onHide",function(){return e.reset()}),d.Ub(36,"p-header"),d.Pb(37,"i",22),d.Rc(38),d.Tb(),d.Ub(39,"form",23,24),d.Ub(41,"div",25),d.Ub(42,"div",26),d.Ub(43,"div",27),d.Ub(44,"label"),d.Rc(45),d.Tb(),d.Ub(46,"input",28),d.ec("ngModelChange",function(t){return e.input.feeling=t}),d.Tb(),d.Tb(),d.Ub(47,"div",27),d.Ub(48,"div",29),d.Ub(49,"label"),d.Rc(50),d.Tb(),d.Ub(51,"div"),d.Ub(52,"p-toggleButton",30),d.ec("ngModelChange",function(t){return e.journalStatus=t}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Ub(53,"div",26),d.Ub(54,"div",27),d.Ub(55,"div",29),d.Ub(56,"label"),d.Rc(57),d.Tb(),d.Pb(58,"validate-form",31),d.Ub(59,"textarea",32),d.ec("ngModelChange",function(t){return e.input.content=t}),d.Tb(),d.Tb(),d.Tb(),d.Ub(60,"div",27),d.Ub(61,"div",29),d.Ub(62,"label"),d.Rc(63),d.Tb(),d.Ub(64,"app-upload",33),d.ec("onFileLoad",function(t){return e.upload(t)}),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Pb(65,"br"),d.Pb(66,"br"),d.Pb(67,"br"),d.Pb(68,"br"),d.Pc(69,vt,4,4,"ng-template",34),d.Tb()}if(2&t){const t=d.Dc(40);d.Bb(3),d.Tc("Welcome to your journey page ",e.userName,""),d.Bb(1),d.pc("ngIf",0==e.pageLoaded),d.Bb(1),d.pc("ngIf",1==e.pageLoaded),d.Bb(3),d.pc("ngIf",1==e.avatarLoaded),d.Bb(15),d.pc("dateClass",e.isSelected),d.Bb(9),d.pc("ngForOf",e.data),d.Bb(1),d.pc("ngIf",0==e.isLoaded),d.Bb(2),d.Lc(d.tc(27,wt)),d.pc("visible",e.formDisplay)("modal",!0)("baseZIndex",1e4)("draggable",!0)("maximizable",!0)("closable",!1),d.Bb(3),d.Tc(" ","Add journal "," "),d.Bb(7),d.Sc("How are you feeling today?"),d.Bb(1),d.rc("placeholder","","Tell people how you feel"," "),d.pc("ngModel",e.input.feeling),d.Bb(4),d.Sc("Public/private"),d.Bb(2),d.pc("ngModel",e.journalStatus),d.Bb(5),d.Sc("What do you want to share?"),d.Bb(1),d.pc("form",t),d.Bb(1),d.rc("placeholder","","Your journal goes here"," "),d.pc("ngModel",e.input.content),d.Bb(4),d.Sc("Do you have any photo you want to share?"),d.Bb(1),d.pc("preview",!0)}},directives:[s.m,C.a,D.a,D.h,D.g,lt.a,g.a,s.l,w.a,T.h,S.u,S.l,S.m,S.c,S.k,S.n,U.a,y.a,dt.a,S.r,T.k,P.a,N],styles:[".first{height:50vh;min-height:200px;background-size:cover;background-image:linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef),linear-gradient(45deg,#efefef 25%,hsla(0,0%,93.7%,0) 0,hsla(0,0%,93.7%,0) 75%,#efefef 0,#efefef);background-position:50%}#all:hover{opacity:.5}.mat-calendar-body-cell-content{color:inherit}.mat-calendar-body-cell.selected{background-color:#ff1493!important;color:#fff;border-radius:50%}.drop-calendar{width:100%}.p-datepicker table td.p-datepicker-today>span{background:var(--hue-color-2);color:#495057;border-color:transparent}.p-datepicker table td>span{width:2.5rem;height:2.5rem;border-radius:50%;transition:box-shadow .2s;border:1px solid transparent}.p-datepicker table td.p-datepicker-today>span.p-highlight{color:#495057;background:red}.p-datepicker table td>span.p-highlight{color:#f5f5f5;background:#ff1493}"],encapsulation:2}),t})();var St=i("vza5");const Ut=[{path:"",component:Tt,canActivate:[St.a]},{path:"saved-shops",component:ot,canActivate:[St.a]},{path:"forum",component:W}];let yt=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[$.e.forChild(Ut)],$.e]}),t})();var Ct=i("1kSV"),Pt=i("FKr1"),Dt=i("eO1q"),At=i("0IaG"),Bt=i("qFsG"),xt=i("M9IT"),Rt=i("Xa2L"),jt=i("d3UM"),kt=i("Nf9I"),Mt=i("7kUa"),It=i("xlun"),Ot=i("Ka1L");let Ft=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(e){return new(e||t)},imports:[[s.c,yt,Ot.a,h.c,n.a,a.ReviewerModule,S.g,S.q,Ct.b,w.b,dt.b,U.b,R.b,x.c,lt.b,Pt.g,D.f,Dt.b,g.b,o.a,K.g,Q.b,A.c,jt.b,Bt.c,xt.b,Rt.a,B.b,At.b,Ct.a,Ct.f,kt.b,Mt.b,It.b]]}),t})()}}]);