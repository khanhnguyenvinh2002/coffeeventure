{"version":3,"file":"mini-calendar.umd.js.map","sources":["ng://mini-calendar/lib/mini-calendar.service.ts","ng://mini-calendar/lib/mini-calendar.component.ts","ng://mini-calendar/lib/mini-calendar.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MiniCalendarService {\n\n  constructor() { }\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\n@Component({\n  selector: 'mini-calendar',\n  templateUrl: 'mini-calendar.component.html',\n  styleUrls: ['mini-calendar.component.less']\n})\nexport class MiniCalendarComponent implements OnInit {\n  @Input() mainColor = '#03a9f4';\n  @Input() secondaryColor = '#ff5';\n  @Input() showWeek: boolean;\n  @Input() selectedDate: any;\n  @Output() selectedDateChange = new EventEmitter();\n\n  public month;\n  weeks: any[];\n\n  constructor(private ref: ChangeDetectorRef) {}\n\n  ngOnInit() {\n    this.month = moment(this.selectedDate).clone();\n\n    const start = moment(this.selectedDate).clone();\n    start.date(1);\n    this._removeTime(start.day(0));\n\n    this._buildMonth(start, this.month);\n    this.select(moment(this.selectedDate).clone());\n    this.ref.detectChanges();\n  }\n\n  public select(day) {\n    this.selectedDate = day.date;\n    this.selectedDateChange.emit(this.selectedDate);\n  }\n\n  getBgColor(day) {\n    return {\n      'background-color': this.isInWeek(day) ? this.secondaryColor : day.isToday ? this.mainColor : '',\n      'opacity': day.isToday ? '.5' : '1'\n    };\n  }\n\n  public isInWeek(day) {\n    if (this.selectedDate && this.selectedDate.isSame) {\n      if (this.showWeek) {\n        const tempMoment = this.selectedDate.clone();\n        tempMoment.isoWeekday(0);\n        const otherTempMoment = this.selectedDate.clone();\n        otherTempMoment.isoWeekday(7);\n        otherTempMoment.isAfter(day.date);\n        return tempMoment.isSame(day.date) || (tempMoment.isBefore(day.date) && otherTempMoment.isAfter(day.date));\n      } else {\n        return this.selectedDate.isSame(day.date);\n      }\n    }\n    return false;\n  }\n\n  public next() {\n    const next = this.month.clone();\n    this._removeTime(next.month(next.month() + 1).date(1));\n    this.month.month(this.month.month() + 1);\n    this._buildMonth(next, this.month);\n  }\n\n  public previous() {\n    const previous = this.month.clone();\n    this._removeTime(previous.month(previous.month() - 1).date(1));\n    this.month.month(this.month.month() - 1);\n    this._buildMonth(previous, this.month);\n  }\n\n  public _removeTime(date) {\n    return date.day(0).hour(0).minute(0).second(0).millisecond(0);\n  }\n\n  public _buildWeek(date, month) {\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      days.push({\n        name: date.format('dd').substring(0, 1),\n        numb: date.date(),\n        isCurrentMonth: date.month() === month.month(),\n        isToday: date.isSame(new Date(), 'day'),\n        date: date\n      });\n      date = date.clone();\n      date.add(1, 'd');\n    }\n    return days;\n  }\n\n  public _buildMonth(start, month) {\n    this.weeks = [];\n    const date = start.clone();\n    let done = false, monthIndex = date.month(), count = 0;\n    while (!done) {\n      this.weeks.push({ days: this._buildWeek(date.clone(), month) });\n      date.add(1, 'w');\n      done = count++ > 2 && monthIndex !== date.month();\n      monthIndex = date.month();\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MiniCalendarComponent } from './mini-calendar.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [MiniCalendarComponent],\n  exports: [MiniCalendarComponent]\n})\nexport class MiniCalendarModule { }\n"],"names":["Injectable","EventEmitter","Component","ChangeDetectorRef","Input","Output","NgModule","CommonModule"],"mappings":"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"}
