{"version":3,"file":"mini-calendar.js.map","sources":["ng://mini-calendar/lib/mini-calendar.service.ts","ng://mini-calendar/lib/mini-calendar.component.ts","ng://mini-calendar/lib/mini-calendar.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MiniCalendarService {\n\n  constructor() { }\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\n@Component({\n  selector: 'mini-calendar',\n  templateUrl: 'mini-calendar.component.html',\n  styleUrls: ['mini-calendar.component.less']\n})\nexport class MiniCalendarComponent implements OnInit {\n  @Input() mainColor = '#03a9f4';\n  @Input() secondaryColor = '#ff5';\n  @Input() showWeek: boolean;\n  @Input() selectedDate: any;\n  @Output() selectedDateChange = new EventEmitter();\n\n  public month;\n  weeks: any[];\n\n  constructor(private ref: ChangeDetectorRef) {}\n\n  ngOnInit() {\n    this.month = moment(this.selectedDate).clone();\n\n    const start = moment(this.selectedDate).clone();\n    start.date(1);\n    this._removeTime(start.day(0));\n\n    this._buildMonth(start, this.month);\n    this.select(moment(this.selectedDate).clone());\n    this.ref.detectChanges();\n  }\n\n  public select(day) {\n    this.selectedDate = day.date;\n    this.selectedDateChange.emit(this.selectedDate);\n  }\n\n  getBgColor(day) {\n    return {\n      'background-color': this.isInWeek(day) ? this.secondaryColor : day.isToday ? this.mainColor : '',\n      'opacity': day.isToday ? '.5' : '1'\n    };\n  }\n\n  public isInWeek(day) {\n    if (this.selectedDate && this.selectedDate.isSame) {\n      if (this.showWeek) {\n        const tempMoment = this.selectedDate.clone();\n        tempMoment.isoWeekday(0);\n        const otherTempMoment = this.selectedDate.clone();\n        otherTempMoment.isoWeekday(7);\n        otherTempMoment.isAfter(day.date);\n        return tempMoment.isSame(day.date) || (tempMoment.isBefore(day.date) && otherTempMoment.isAfter(day.date));\n      } else {\n        return this.selectedDate.isSame(day.date);\n      }\n    }\n    return false;\n  }\n\n  public next() {\n    const next = this.month.clone();\n    this._removeTime(next.month(next.month() + 1).date(1));\n    this.month.month(this.month.month() + 1);\n    this._buildMonth(next, this.month);\n  }\n\n  public previous() {\n    const previous = this.month.clone();\n    this._removeTime(previous.month(previous.month() - 1).date(1));\n    this.month.month(this.month.month() - 1);\n    this._buildMonth(previous, this.month);\n  }\n\n  public _removeTime(date) {\n    return date.day(0).hour(0).minute(0).second(0).millisecond(0);\n  }\n\n  public _buildWeek(date, month) {\n    const days = [];\n    for (let i = 0; i < 7; i++) {\n      days.push({\n        name: date.format('dd').substring(0, 1),\n        numb: date.date(),\n        isCurrentMonth: date.month() === month.month(),\n        isToday: date.isSame(new Date(), 'day'),\n        date: date\n      });\n      date = date.clone();\n      date.add(1, 'd');\n    }\n    return days;\n  }\n\n  public _buildMonth(start, month) {\n    this.weeks = [];\n    const date = start.clone();\n    let done = false, monthIndex = date.month(), count = 0;\n    while (!done) {\n      this.weeks.push({ days: this._buildWeek(date.clone(), month) });\n      date.add(1, 'w');\n      done = count++ > 2 && monthIndex !== date.month();\n      monthIndex = date.month();\n    }\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { MiniCalendarComponent } from './mini-calendar.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [MiniCalendarComponent],\n  exports: [MiniCalendarComponent]\n})\nexport class MiniCalendarModule { }\n"],"names":[],"mappings":"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"}
